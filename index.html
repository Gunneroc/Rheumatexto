<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rheumatexto - The Rheumatology Word Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-tertiary: #0f3460;
            --text-primary: #eaeaea;
            --text-secondary: #a0a0a0;
            --accent-red: #e94560;
            --accent-orange: #ff6b35;
            --accent-yellow: #f0c808;
            --accent-blue: #4da8da;
            --accent-cold: #7ec8e3;
            --clinical-white: #f5f5f5;
            --success: #4caf50;
        }

        .light-mode {
            --bg-primary: #f5f5f5;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e8f4f8;
            --text-primary: #1a1a2e;
            --text-secondary: #555555;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            transition: background 0.3s, color 0.3s;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0 20px;
            border-bottom: 1px solid var(--bg-tertiary);
            margin-bottom: 20px;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--accent-red), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo span {
            font-size: 0.7rem;
            display: block;
            color: var(--text-secondary);
            -webkit-text-fill-color: var(--text-secondary);
        }

        .header-buttons {
            display: flex;
            gap: 10px;
        }

        .icon-btn {
            background: var(--bg-secondary);
            border: none;
            color: var(--text-primary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: background 0.2s, transform 0.2s;
        }

        .icon-btn:hover {
            background: var(--bg-tertiary);
            transform: scale(1.1);
        }

        /* Joint Visualization */
        .joint-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .joint-svg {
            width: 150px;
            height: 200px;
        }

        .joint-bone {
            fill: var(--clinical-white);
            transition: all 0.5s;
        }

        .joint-cartilage {
            fill: var(--accent-blue);
            transition: all 0.5s;
        }

        .joint-synovium {
            fill: var(--accent-cold);
            opacity: 0.3;
            transition: all 0.5s;
        }

        .inflamed-1 .joint-synovium { fill: var(--accent-red); opacity: 0.8; }
        .inflamed-1 .joint-cartilage { fill: var(--accent-orange); }
        .inflamed-2 .joint-synovium { fill: var(--accent-orange); opacity: 0.6; }
        .inflamed-2 .joint-cartilage { fill: #e8a445; }
        .inflamed-3 .joint-synovium { fill: var(--accent-yellow); opacity: 0.5; }
        .inflamed-4 .joint-synovium { fill: var(--accent-blue); opacity: 0.4; }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
        }

        .inflamed-1 .joint-synovium {
            animation: pulse 1s ease-in-out infinite;
        }

        /* Inflammation Meter */
        .meter-container {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
        }

        .meter-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .meter-bar {
            height: 30px;
            background: linear-gradient(to right,
                var(--accent-cold) 0%,
                var(--accent-blue) 25%,
                var(--accent-yellow) 50%,
                var(--accent-orange) 75%,
                var(--accent-red) 100%);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .meter-indicator {
            position: absolute;
            width: 8px;
            height: 40px;
            background: white;
            border-radius: 4px;
            top: -5px;
            transform: translateX(-50%);
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
            transition: left 0.5s ease-out;
            display: none;
        }

        .meter-indicator.active {
            display: block;
        }

        .meter-value {
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            margin-top: 10px;
            min-height: 50px;
        }

        .meter-hint {
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-style: italic;
            min-height: 24px;
        }

        /* Input Area */
        .input-container {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }

        .guess-input {
            flex: 1;
            padding: 15px 20px;
            font-size: 1.1rem;
            border: 2px solid var(--bg-tertiary);
            border-radius: 10px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            outline: none;
            transition: border-color 0.2s;
        }

        .guess-input:focus {
            border-color: var(--accent-blue);
        }

        .guess-input::placeholder {
            color: var(--text-secondary);
        }

        .submit-btn {
            padding: 15px 25px;
            font-size: 1.1rem;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-red));
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .submit-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(233, 69, 96, 0.3);
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Guess Count */
        .guess-count {
            text-align: center;
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        /* Guess History */
        .history-container {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .history-title {
            font-size: 1rem;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-list {
            list-style: none;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 8px;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .history-item.rank-hot {
            background: linear-gradient(135deg, rgba(233, 69, 96, 0.3), rgba(255, 107, 53, 0.2));
            border-left: 4px solid var(--accent-red);
        }

        .history-item.rank-warm {
            background: rgba(255, 107, 53, 0.2);
            border-left: 4px solid var(--accent-orange);
        }

        .history-item.rank-mild {
            background: rgba(240, 200, 8, 0.2);
            border-left: 4px solid var(--accent-yellow);
        }

        .history-item.rank-cool {
            background: rgba(77, 168, 218, 0.2);
            border-left: 4px solid var(--accent-blue);
        }

        .history-item.rank-cold {
            background: rgba(126, 200, 227, 0.1);
            border-left: 4px solid var(--accent-cold);
        }

        .history-item.new-best {
            animation: newBest 0.5s ease-out;
        }

        @keyframes newBest {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .history-word {
            font-weight: bold;
            text-transform: uppercase;
        }

        .history-word.hint-word::before {
            content: 'üí° ';
        }

        .history-rank {
            font-weight: bold;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .rank-hot .history-rank { background: var(--accent-red); color: white; }
        .rank-warm .history-rank { background: var(--accent-orange); color: white; }
        .rank-mild .history-rank { background: var(--accent-yellow); color: #333; }
        .rank-cool .history-rank { background: var(--accent-blue); color: white; }
        .rank-cold .history-rank { background: var(--accent-cold); color: #333; }

        /* Give Up Button */
        .give-up-btn {
            padding: 10px 20px;
            background: transparent;
            border: 1px solid var(--text-secondary);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .give-up-btn:hover {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        /* Action Buttons Container */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px auto;
        }

        .hint-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--accent-yellow), var(--accent-orange));
            border: none;
            border-radius: 8px;
            color: #333;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        .hint-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 15px rgba(240, 200, 8, 0.4);
        }

        .hint-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .hint-count {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        /* Autocorrect notification */
        .autocorrect-msg {
            text-align: center;
            color: var(--accent-blue);
            font-size: 0.85rem;
            font-style: italic;
            min-height: 20px;
            margin-top: 5px;
        }

        /* Modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 25px;
            max-width: 90%;
            width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s;
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
        }

        .modal-content p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .modal-content h3 {
            margin: 20px 0 10px;
            color: var(--accent-blue);
        }

        /* Stats Modal */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .stat-box {
            background: var(--bg-tertiary);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-blue);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Win Modal */
        .win-modal .modal {
            text-align: center;
        }

        .win-title {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .win-word {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-red);
            margin: 20px 0;
        }

        .win-stats {
            font-size: 1.2rem;
            margin: 15px 0;
        }

        .share-btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            background: var(--success);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            margin: 10px 5px;
            transition: transform 0.2s;
        }

        .share-btn:hover {
            transform: scale(1.05);
        }

        .new-game-btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            background: var(--accent-blue);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            margin: 10px 5px;
            transition: transform 0.2s;
        }

        .new-game-btn:hover {
            transform: scale(1.05);
        }

        .guess-visualization {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .guess-block {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }

        /* Settings */
        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--bg-tertiary);
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-tertiary);
            border-radius: 26px;
            transition: 0.3s;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background: white;
            border-radius: 50%;
            transition: 0.3s;
        }

        input:checked + .toggle-slider {
            background: var(--accent-blue);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Confetti */
        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(720deg); }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            top: 0;
            z-index: 999;
            animation: confetti-fall 3s linear forwards;
        }

        /* Error Message */
        .error-msg {
            text-align: center;
            color: var(--accent-red);
            font-size: 0.9rem;
            min-height: 24px;
            margin-top: 10px;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }

            .logo {
                font-size: 1.4rem;
            }

            .joint-svg {
                width: 120px;
                height: 160px;
            }

            .meter-value {
                font-size: 1.5rem;
            }

            .input-container {
                flex-direction: column;
            }

            .submit-btn {
                width: 100%;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .stat-value {
                font-size: 1.5rem;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--bg-tertiary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-blue);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                RHEUMATEXTO
                <span>The Rheumatology Word Game</span>
            </div>
            <div class="header-buttons">
                <button class="icon-btn" id="helpBtn" title="How to Play">?</button>
                <button class="icon-btn" id="statsBtn" title="Statistics">üìä</button>
                <button class="icon-btn" id="settingsBtn" title="Settings">‚öôÔ∏è</button>
            </div>
        </header>

        <div class="joint-container">
            <svg class="joint-svg" id="jointDiagram" viewBox="0 0 100 140">
                <defs>
                    <linearGradient id="boneGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="#e0dcd5"/>
                        <stop offset="50%" stop-color="#f5f2ed"/>
                        <stop offset="100%" stop-color="#d5d0c8"/>
                    </linearGradient>
                    <linearGradient id="cartGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#5ba3c0"/>
                        <stop offset="100%" stop-color="#3d8eb0"/>
                    </linearGradient>
                </defs>

                <!-- Upper bone (wider at ends like real bone) -->
                <ellipse cx="50" cy="12" rx="18" ry="10" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                <path d="M34 12 Q32 28 40 48 L60 48 Q68 28 66 12" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                <ellipse class="joint-bone" cx="50" cy="50" rx="22" ry="12" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                <!-- Subtle bone lines -->
                <line x1="46" y1="18" x2="45" y2="40" stroke="#c5beb0" stroke-width="1" opacity="0.5"/>
                <line x1="54" y1="18" x2="55" y2="40" stroke="#c5beb0" stroke-width="1" opacity="0.5"/>

                <!-- Upper cartilage -->
                <ellipse class="joint-cartilage" cx="50" cy="58" rx="20" ry="4" fill="url(#cartGrad)"/>

                <!-- Synovium/Joint space (inflames!) -->
                <ellipse class="joint-synovium" cx="50" cy="70" rx="24" ry="10"/>

                <!-- Lower cartilage -->
                <ellipse class="joint-cartilage" cx="50" cy="82" rx="20" ry="4" fill="url(#cartGrad)"/>

                <!-- Lower bone -->
                <ellipse class="joint-bone" cx="50" cy="90" rx="22" ry="12" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                <path d="M40 92 Q32 112 34 128 L66 128 Q68 112 60 92" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                <ellipse cx="50" cy="128" rx="18" ry="10" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                <!-- Subtle bone lines -->
                <line x1="45" y1="100" x2="46" y2="122" stroke="#c5beb0" stroke-width="1" opacity="0.5"/>
                <line x1="55" y1="100" x2="54" y2="122" stroke="#c5beb0" stroke-width="1" opacity="0.5"/>
            </svg>
        </div>

        <div class="meter-container">
            <div class="meter-label">
                <span>‚ùÑÔ∏è Cold</span>
                <span>üî• Flaring</span>
            </div>
            <div class="meter-bar">
                <div class="meter-indicator" id="meterIndicator"></div>
            </div>
            <div class="meter-value" id="meterValue">-</div>
            <div class="meter-hint" id="meterHint">Enter a word to begin</div>
        </div>

        <div class="input-container">
            <input type="text" class="guess-input" id="guessInput" placeholder="Type your guess..." autocomplete="off" autofocus>
            <button class="submit-btn" id="submitBtn">Guess</button>
        </div>
        <div class="error-msg" id="errorMsg"></div>
        <div class="autocorrect-msg" id="autocorrectMsg"></div>

        <div class="guess-count" id="guessCount">Guesses: 0</div>

        <div class="history-container">
            <div class="history-title">
                <span>Guess History</span>
                <span id="bestRank">Best: -</span>
            </div>
            <ul class="history-list" id="historyList"></ul>
        </div>

        <div class="action-buttons">
            <button class="hint-btn" id="hintBtn">üí° Get Hint</button>
            <button class="give-up-btn" id="giveUpBtn">Give Up</button>
        </div>
        <div class="hint-count" id="hintCount">Hints used: 0/3</div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">How to Play</h2>
                <button class="modal-close" onclick="closeModal('helpModal')">√ó</button>
            </div>
            <div class="modal-content">
                <p>Welcome to <strong>Rheumatexto</strong> ‚Äì the word guessing game for rheumatology enthusiasts!</p>

                <h3>üéØ Goal</h3>
                <p>Find the secret word! It's related to rheumatology, medicine, or the life of a doctor.</p>

                <h3>üéÆ How It Works</h3>
                <p>1. Type any word and submit your guess</p>
                <p>2. You'll see a <strong>rank</strong> showing how close your guess is:</p>
                <ul style="margin-left: 20px; margin-bottom: 15px;">
                    <li><span style="color: var(--accent-red)">1-10</span>: You're ON FIRE! üî•</li>
                    <li><span style="color: var(--accent-orange)">11-100</span>: Getting warm!</li>
                    <li><span style="color: var(--accent-yellow)">101-500</span>: Lukewarm</li>
                    <li><span style="color: var(--accent-blue)">501-1000</span>: Cool</li>
                    <li><span style="color: var(--accent-cold)">1000+</span>: Ice cold ‚ùÑÔ∏è</li>
                </ul>
                <p>3. Use the hints to guide your next guess</p>
                <p>4. Win by finding the exact word (Rank 1)!</p>

                <h3>üí° Hints</h3>
                <p>Stuck? Use up to 3 hints per game! Each hint reveals a word that's closer to the answer than your current best guess.</p>

                <h3>‚ú® Autocorrect</h3>
                <p>The game recognizes common variations like plurals (joints ‚Üí joint) and will autocorrect your guess automatically.</p>

                <h3>ü©∫ Tips</h3>
                <p>Think about rheumatology conditions, treatments, anatomy, lab tests, and doctor life!</p>
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div class="modal-overlay" id="statsModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Statistics</h2>
                <button class="modal-close" onclick="closeModal('statsModal')">√ó</button>
            </div>
            <div class="modal-content">
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="statPlayed">0</div>
                        <div class="stat-label">Played</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statWon">0</div>
                        <div class="stat-label">Won</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statAvg">-</div>
                        <div class="stat-label">Avg Guesses</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statBest">-</div>
                        <div class="stat-label">Best Win</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statStreak">0</div>
                        <div class="stat-label">Current Streak</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statMaxStreak">0</div>
                        <div class="stat-label">Max Streak</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Settings</h2>
                <button class="modal-close" onclick="closeModal('settingsModal')">√ó</button>
            </div>
            <div class="modal-content">
                <div class="setting-row">
                    <span>Light Mode</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="lightModeToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-row">
                    <span>Hard Mode (no hints)</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="hardModeToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Win Modal -->
    <div class="modal-overlay win-modal" id="winModal">
        <div class="modal">
            <h2 class="win-title">üéâ Diagnosis Complete!</h2>
            <div class="win-word" id="winWord">LUPUS</div>
            <div class="win-stats">
                Solved in <strong id="winGuesses">0</strong> guesses!
            </div>
            <div class="guess-visualization" id="guessVisualization"></div>
            <button class="share-btn" id="shareBtn">üìã Share Result</button>
            <button class="new-game-btn" id="newGameBtn">New Game</button>
        </div>
    </div>

    <!-- Give Up Modal -->
    <div class="modal-overlay" id="giveUpModal">
        <div class="modal" style="text-align: center;">
            <h2 class="modal-title">The word was...</h2>
            <div class="win-word" id="revealWord">LUPUS</div>
            <p style="margin: 20px 0; color: var(--text-secondary);">Better luck next time! Every attending started as an intern. üí™</p>
            <button class="new-game-btn" id="newGameAfterGiveUp">New Game</button>
        </div>
    </div>

    <script>
        // ==================== WORD DATA ====================
        const targetWords = [
            'lupus', 'gout', 'arthritis', 'vasculitis', 'scleroderma', 'fibromyalgia',
            'joint', 'cartilage', 'synovium', 'tendon', 'bone',
            'prednisone', 'methotrexate', 'humira', 'infusion', 'steroid',
            'antibody', 'inflammation', 'autoimmune', 'biopsy',
            'clinic', 'rounds', 'pager', 'charting', 'diagnosis',
            'coffee', 'tired', 'swollen'
        ];

        // Pre-computed word rankings for each target word
        // Rankings: 1 = exact match, lower = more related
        const wordRankings = {
            'lupus': {
                // Rank 1: Target
                'lupus': 1,
                // Rank 2-5: Specific but requires knowledge
                'nephritis': 2, 'malar': 3, 'photosensitivity': 4, 'dsdna': 5,
                // Rank 6-15: Strong clinical associations
                'discoid': 6, 'serositis': 7, 'butterfly': 8, 'ana': 9, 'complement': 10,
                'antismith': 11, 'proteinuria': 12, 'pleuritis': 13, 'pericarditis': 14, 'cytopenias': 15,
                // Rank 16-30: Key features and treatments
                'hydroxychloroquine': 16, 'plaquenil': 17, 'benlysta': 18, 'flare': 19, 'remission': 20,
                'oral': 21, 'ulcers': 22, 'alopecia': 23, 'raynaud': 24, 'arthralgia': 25,
                'leukopenia': 26, 'lymphopenia': 27, 'thrombocytopenia': 28, 'anemia': 29, 'hemolytic': 30,
                // Rank 31-50: Related clinical concepts
                'antiphospholipid': 31, 'clotting': 32, 'miscarriage': 33, 'stroke': 34, 'criteria': 35,
                'slicc': 36, 'acr': 37, 'activity': 38, 'sledai': 39, 'immunosuppressant': 40,
                'cellcept': 41, 'mycophenolate': 42, 'azathioprine': 43, 'cyclophosphamide': 44, 'rituximab': 45,
                'belimumab': 46, 'voclosporin': 47, 'lupkynis': 48, 'class': 49, 'membranous': 50,
                // Rank 51-80: Broader associations
                'connective': 51, 'tissue': 52, 'systemic': 53, 'erythematosus': 54, 'sle': 55,
                'autoimmune': 56, 'autoantibody': 57, 'immune': 58, 'complex': 59, 'deposition': 60,
                'glomerulonephritis': 61, 'renal': 62, 'kidney': 63, 'biopsy': 64, 'proliferative': 65,
                'neuropsychiatric': 66, 'seizure': 67, 'psychosis': 68, 'cognitive': 69, 'headache': 70,
                'fatigue': 71, 'fever': 72, 'weight': 73, 'loss': 74, 'malaise': 75,
                'sun': 76, 'sensitivity': 77, 'rash': 78, 'skin': 79, 'cutaneous': 80,
                // Rank 81-120: Demographics and risk factors
                'female': 81, 'woman': 82, 'young': 83, 'childbearing': 84, 'african': 85,
                'american': 86, 'hispanic': 87, 'asian': 88, 'genetic': 89, 'hereditary': 90,
                'family': 91, 'history': 92, 'hla': 93, 'twin': 94, 'pregnancy': 95,
                'neonatal': 96, 'congenital': 97, 'heartblock': 98, 'ssa': 99, 'ssb': 100,
                'antibody': 101, 'positive': 102, 'titer': 103, 'speckled': 104, 'homogeneous': 105,
                'chronic': 106, 'relapsing': 107, 'multisystem': 108, 'organ': 109, 'damage': 110,
                'prednisone': 111, 'steroid': 112, 'taper': 113, 'burst': 114, 'maintenance': 115,
                'infection': 116, 'risk': 117, 'vaccination': 118, 'screening': 119, 'monitoring': 120,
                // Rank 121-180: General rheumatology
                'rheumatology': 121, 'rheumatologist': 122, 'specialist': 123, 'referral': 124, 'diagnosis': 125,
                'differential': 126, 'workup': 127, 'laboratory': 128, 'blood': 129, 'test': 130,
                'inflammation': 131, 'crp': 132, 'esr': 133, 'sed': 134, 'rate': 135,
                'joint': 136, 'pain': 137, 'swelling': 138, 'stiffness': 139, 'morning': 140,
                'arthritis': 141, 'synovitis': 142, 'effusion': 143, 'swollen': 144, 'tender': 145,
                'methotrexate': 146, 'infusion': 147, 'injection': 148, 'medication': 149, 'therapy': 150,
                'treatment': 151, 'drug': 152, 'side': 153, 'effect': 154, 'toxicity': 155,
                'clinic': 156, 'visit': 157, 'followup': 158, 'appointment': 159, 'doctor': 160,
                'patient': 161, 'hospital': 162, 'admission': 163, 'discharge': 164, 'care': 165,
                'scleroderma': 166, 'sjogren': 167, 'myositis': 168, 'overlap': 169, 'mixed': 170,
                'vasculitis': 171, 'fibromyalgia': 172, 'gout': 180, 'osteoarthritis': 190, 'rheumatoid': 175,
                // Rank 200+: General medical and anatomy
                'medicine': 200, 'medical': 205, 'health': 210, 'disease': 215, 'condition': 220,
                'symptom': 225, 'sign': 230, 'physical': 235, 'exam': 240, 'finding': 245,
                'heart': 250, 'lung': 255, 'liver': 260, 'spleen': 265, 'lymph': 270,
                'node': 275, 'brain': 280, 'nerve': 285, 'muscle': 290, 'bone': 295,
                'cartilage': 300, 'tendon': 305, 'synovium': 310, 'ligament': 315, 'tissue': 320,
                // Rank 400+: Doctor life (more distant)
                'tired': 400, 'coffee': 420, 'pager': 450, 'rounds': 480, 'charting': 500,
                'call': 520, 'night': 540, 'shift': 560, 'resident': 580, 'attending': 600,
                // Rank 800+: Unrelated common words
                'water': 800, 'food': 850, 'sleep': 700, 'work': 650, 'time': 750,
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500, 'tree': 1600,
                'book': 1700, 'happy': 1800, 'sad': 1850, 'red': 900, 'blue': 950,
                'green': 1000, 'run': 1900, 'walk': 1950, 'eat': 2000, 'drink': 2050
            },
            'gout': {
                // Rank 1: Target
                'gout': 1,
                // Rank 2-5: Specific but requires knowledge
                'podagra': 2, 'tophi': 3, 'urate': 4, 'monosodium': 5,
                // Rank 6-15: Strong clinical associations
                'hyperuricemia': 6, 'tophus': 7, 'crystal': 8, 'birefringent': 9, 'needle': 10,
                'negatively': 11, 'polarized': 12, 'microscopy': 13, 'aspirate': 14, 'synovial': 15,
                // Rank 16-30: Key features and treatments
                'allopurinol': 16, 'febuxostat': 17, 'uloric': 18, 'colchicine': 19, 'probenecid': 20,
                'uricosuric': 21, 'xanthine': 22, 'oxidase': 23, 'inhibitor': 24, 'pegloticase': 25,
                'krystexxa': 26, 'rasburicase': 27, 'flare': 28, 'attack': 29, 'acute': 30,
                // Rank 31-50: Related clinical concepts
                'intercritical': 31, 'chronic': 32, 'tophaceous': 33, 'erosive': 34, 'destructive': 35,
                'purine': 36, 'metabolism': 37, 'overproduction': 38, 'underexcretion': 39, 'diet': 40,
                'alcohol': 41, 'beer': 42, 'wine': 43, 'spirits': 44, 'fructose': 45,
                'meat': 46, 'organ': 47, 'seafood': 48, 'shellfish': 49, 'anchovy': 50,
                // Rank 51-80: Clinical presentation
                'mtp': 51, 'metatarsophalangeal': 52, 'toe': 53, 'big': 54, 'first': 55,
                'ankle': 56, 'midfoot': 57, 'knee': 58, 'wrist': 59, 'finger': 60,
                'elbow': 61, 'olecranon': 62, 'bursa': 63, 'helix': 64, 'ear': 65,
                'red': 66, 'hot': 67, 'swollen': 68, 'exquisite': 69, 'tender': 70,
                'monoarticular': 71, 'monoarthritis': 72, 'sudden': 73, 'nocturnal': 74, 'night': 75,
                'onset': 76, 'rapid': 77, 'peak': 78, 'hours': 79, 'intense': 80,
                // Rank 81-120: Risk factors and comorbidities
                'male': 81, 'men': 82, 'postmenopausal': 83, 'women': 84, 'obesity': 85,
                'metabolic': 86, 'syndrome': 87, 'hypertension': 88, 'diabetes': 89, 'dyslipidemia': 90,
                'cardiovascular': 91, 'renal': 92, 'kidney': 93, 'stone': 94, 'nephrolithiasis': 95,
                'ckd': 96, 'diuretic': 97, 'thiazide': 98, 'loop': 99, 'furosemide': 100,
                'cyclosporine': 101, 'transplant': 102, 'aspirin': 103, 'low': 104, 'dose': 105,
                'lesch': 106, 'nyhan': 107, 'hgprt': 108, 'deficiency': 109, 'genetic': 110,
                'uric': 111, 'acid': 112, 'level': 113, 'elevated': 114, 'target': 115,
                'goal': 116, 'below': 117, 'six': 118, 'prophylaxis': 119, 'prevention': 120,
                // Rank 121-180: General rheumatology and treatment
                'nsaid': 121, 'indomethacin': 122, 'naproxen': 123, 'prednisone': 124, 'steroid': 125,
                'injection': 126, 'corticosteroid': 127, 'triamcinolone': 128, 'methylprednisolone': 129, 'burst': 130,
                'taper': 131, 'inflammation': 132, 'inflammatory': 133, 'arthritis': 134, 'joint': 135,
                'pain': 136, 'swelling': 137, 'effusion': 138, 'fluid': 139, 'aspiration': 140,
                'pseudogout': 141, 'cppd': 142, 'calcium': 143, 'pyrophosphate': 144, 'chondrocalcinosis': 145,
                'septic': 146, 'infectious': 147, 'cellulitis': 148, 'differential': 149, 'diagnosis': 150,
                'rheumatology': 151, 'rheumatologist': 152, 'specialist': 153, 'primary': 154, 'care': 155,
                'blood': 156, 'test': 157, 'lab': 158, 'workup': 159, 'xray': 160,
                'imaging': 161, 'ultrasound': 162, 'dect': 163, 'dual': 164, 'energy': 165,
                'ct': 166, 'punch': 167, 'out': 168, 'erosion': 169, 'overhanging': 170,
                'edge': 171, 'treatment': 172, 'medication': 173, 'therapy': 174, 'lifestyle': 175,
                'modification': 176, 'weight': 177, 'loss': 178, 'exercise': 179, 'hydration': 180,
                // Rank 200+: General medical
                'lupus': 200, 'autoimmune': 220, 'scleroderma': 240, 'vasculitis': 260, 'fibromyalgia': 280,
                'doctor': 300, 'patient': 310, 'hospital': 320, 'clinic': 330, 'medicine': 340,
                'bone': 350, 'cartilage': 360, 'tendon': 370, 'muscle': 380, 'synovium': 390,
                // Rank 400+: Doctor life
                'tired': 450, 'coffee': 480, 'pager': 500, 'rounds': 520, 'charting': 540,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500,
                'tree': 1600, 'book': 1700, 'happy': 1800, 'blue': 1900, 'green': 1950
            },
            'arthritis': {
                // Rank 1: Target
                'arthritis': 1,
                // Rank 2-5: Specific but requires knowledge
                'synovitis': 2, 'polyarthritis': 3, 'articular': 4, 'pannus': 5,
                // Rank 6-15: Strong clinical associations
                'rheumatoid': 6, 'erosion': 7, 'symmetric': 8, 'metacarpophalangeal': 9, 'mcp': 10,
                'pip': 11, 'proximal': 12, 'interphalangeal': 13, 'metatarsophalangeal': 14, 'mtp': 15,
                // Rank 16-30: Key features and treatments
                'morning': 16, 'stiffness': 17, 'swelling': 18, 'warmth': 19, 'tenderness': 20,
                'joint': 21, 'deformity': 22, 'swan': 23, 'neck': 24, 'boutonniere': 25,
                'ulnar': 26, 'deviation': 27, 'subluxation': 28, 'nodule': 29, 'rheumatoid': 30,
                // Rank 31-50: Related clinical concepts
                'factor': 31, 'rf': 32, 'ccp': 33, 'anti': 34, 'citrullinated': 35,
                'peptide': 36, 'acpa': 37, 'seropositive': 38, 'seronegative': 39, 'inflammatory': 40,
                'dmard': 41, 'methotrexate': 42, 'sulfasalazine': 43, 'hydroxychloroquine': 44, 'leflunomide': 45,
                'biologic': 46, 'humira': 47, 'enbrel': 48, 'remicade': 49, 'orencia': 50,
                // Rank 51-80: Clinical presentation
                'pain': 51, 'ache': 52, 'soreness': 53, 'discomfort': 54, 'limitation': 55,
                'range': 56, 'motion': 57, 'function': 58, 'disability': 59, 'quality': 60,
                'life': 61, 'work': 62, 'grip': 63, 'strength': 64, 'weakness': 65,
                'fatigue': 66, 'malaise': 67, 'fever': 68, 'weight': 69, 'loss': 70,
                'oligoarthritis': 71, 'monoarthritis': 72, 'pauciarticular': 73, 'large': 74, 'small': 75,
                'knee': 76, 'hip': 77, 'shoulder': 78, 'elbow': 79, 'wrist': 80,
                // Rank 81-120: Types and related conditions
                'osteoarthritis': 81, 'degenerative': 82, 'oa': 83, 'wear': 84, 'tear': 85,
                'psoriatic': 86, 'psa': 87, 'dactylitis': 88, 'sausage': 89, 'digit': 90,
                'ankylosing': 91, 'spondylitis': 92, 'sacroiliitis': 93, 'enthesitis': 94, 'axial': 95,
                'reactive': 96, 'reiter': 97, 'postinfectious': 98, 'septic': 99, 'infectious': 100,
                'gout': 101, 'pseudogout': 102, 'crystal': 103, 'juvenile': 104, 'jia': 105,
                'still': 106, 'disease': 107, 'adult': 108, 'onset': 109, 'systemic': 110,
                'cartilage': 111, 'bone': 112, 'subchondral': 113, 'sclerosis': 114, 'osteophyte': 115,
                'spur': 116, 'narrowing': 117, 'space': 118, 'xray': 119, 'imaging': 120,
                // Rank 121-180: Treatment and management
                'nsaid': 121, 'ibuprofen': 122, 'naproxen': 123, 'celecoxib': 124, 'prednisone': 125,
                'steroid': 126, 'injection': 127, 'corticosteroid': 128, 'infusion': 129, 'subcutaneous': 130,
                'tocilizumab': 131, 'actemra': 132, 'abatacept': 133, 'tofacitinib': 134, 'xeljanz': 135,
                'jak': 136, 'inhibitor': 137, 'baricitinib': 138, 'upadacitinib': 139, 'rinvoq': 140,
                'physical': 141, 'therapy': 142, 'occupational': 143, 'splint': 144, 'brace': 145,
                'surgery': 146, 'replacement': 147, 'arthroplasty': 148, 'synovectomy': 149, 'fusion': 150,
                'inflammation': 151, 'autoimmune': 152, 'immune': 153, 'flare': 154, 'remission': 155,
                'das28': 156, 'cdai': 157, 'sdai': 158, 'activity': 159, 'score': 160,
                'swollen': 161, 'tender': 162, 'count': 163, 'crp': 164, 'esr': 165,
                'diagnosis': 166, 'criteria': 167, 'acr': 168, 'eular': 169, 'treatment': 170,
                'target': 171, 'treat': 172, 'goal': 173, 'tight': 174, 'control': 175,
                'rheumatologist': 176, 'rheumatology': 177, 'specialist': 178, 'referral': 179, 'care': 180,
                // Rank 200+: General medical
                'lupus': 200, 'vasculitis': 220, 'scleroderma': 240, 'fibromyalgia': 260, 'myositis': 280,
                'doctor': 300, 'patient': 310, 'hospital': 320, 'clinic': 330, 'medicine': 340,
                'tendon': 350, 'muscle': 360, 'ligament': 370, 'synovium': 25, 'bursa': 380,
                // Rank 400+: Doctor life
                'tired': 450, 'coffee': 480, 'pager': 500, 'rounds': 520, 'charting': 540,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'vasculitis': {
                // Rank 1: Target
                'vasculitis': 1,
                // Rank 2-5: Specific but requires knowledge
                'anca': 2, 'granulomatosis': 3, 'polyangiitis': 4, 'mpo': 5,
                // Rank 6-15: Strong clinical associations
                'pr3': 6, 'proteinase': 7, 'myeloperoxidase': 8, 'wegener': 9, 'microscopic': 10,
                'polyarteritis': 11, 'nodosa': 12, 'temporal': 13, 'arteritis': 14, 'giant': 15,
                // Rank 16-30: Types of vasculitis
                'cell': 16, 'gca': 17, 'takayasu': 18, 'aortitis': 19, 'large': 20,
                'medium': 21, 'small': 22, 'vessel': 23, 'kawasaki': 24, 'iga': 25,
                'henoch': 26, 'schonlein': 27, 'purpura': 28, 'hsp': 29, 'leukocytoclastic': 30,
                // Rank 31-50: Clinical features
                'cryoglobulinemia': 31, 'cryoglobulin': 32, 'hepatitis': 33, 'eosinophilic': 34, 'churg': 35,
                'strauss': 36, 'egpa': 37, 'asthma': 38, 'eosinophilia': 39, 'neuropathy': 40,
                'mononeuritis': 41, 'multiplex': 42, 'foot': 43, 'drop': 44, 'wrist': 45,
                'palpable': 46, 'rash': 47, 'petechiae': 48, 'livedo': 49, 'reticularis': 50,
                // Rank 51-80: Organ involvement
                'glomerulonephritis': 51, 'crescentic': 52, 'rpgn': 53, 'rapidly': 54, 'progressive': 55,
                'kidney': 56, 'renal': 57, 'failure': 58, 'dialysis': 59, 'pulmonary': 60,
                'hemorrhage': 61, 'alveolar': 62, 'hemoptysis': 63, 'nodule': 64, 'cavitary': 65,
                'sinus': 66, 'nasal': 67, 'saddle': 68, 'nose': 69, 'deformity': 70,
                'ear': 71, 'hearing': 72, 'loss': 73, 'eye': 74, 'scleritis': 75,
                'episcleritis': 76, 'uveitis': 77, 'vision': 78, 'blindness': 79, 'ischemic': 80,
                // Rank 81-120: Symptoms and diagnosis
                'constitutional': 81, 'fever': 82, 'fatigue': 83, 'weight': 84, 'malaise': 85,
                'myalgia': 86, 'arthralgia': 87, 'headache': 88, 'jaw': 89, 'claudication': 90,
                'scalp': 91, 'tenderness': 92, 'temporal': 93, 'artery': 94, 'biopsy': 95,
                'skin': 96, 'nerve': 97, 'sural': 98, 'angiography': 99, 'cta': 100,
                'mra': 101, 'pet': 102, 'scan': 103, 'fdg': 104, 'uptake': 105,
                'inflammation': 106, 'vessel': 107, 'wall': 108, 'thickening': 109, 'stenosis': 110,
                'aneurysm': 111, 'occlusion': 112, 'thrombosis': 113, 'stroke': 114, 'infarct': 115,
                'blood': 116, 'artery': 117, 'vein': 118, 'capillary': 119, 'damage': 120,
                // Rank 121-180: Treatment
                'prednisone': 121, 'steroid': 122, 'high': 123, 'dose': 124, 'pulse': 125,
                'methylprednisolone': 126, 'cyclophosphamide': 127, 'cytoxan': 128, 'rituximab': 129, 'rituxan': 130,
                'azathioprine': 131, 'imuran': 132, 'methotrexate': 133, 'mycophenolate': 134, 'cellcept': 135,
                'tocilizumab': 136, 'actemra': 137, 'mepolizumab': 138, 'nucala': 139, 'avacopan': 140,
                'complement': 141, 'c5a': 142, 'inhibitor': 143, 'induction': 144, 'remission': 145,
                'maintenance': 146, 'relapse': 147, 'flare': 148, 'bvas': 149, 'activity': 150,
                'infusion': 151, 'injection': 152, 'treatment': 153, 'therapy': 154, 'immunosuppressant': 155,
                'plasmapheresis': 156, 'plasma': 157, 'exchange': 158, 'plex': 159, 'ivig': 160,
                'diagnosis': 161, 'criteria': 162, 'classification': 163, 'acr': 164, 'chapel': 165,
                'hill': 166, 'primary': 167, 'secondary': 168, 'autoimmune': 169, 'systemic': 170,
                'rheumatology': 171, 'rheumatologist': 172, 'nephrology': 173, 'pulmonology': 174, 'multidisciplinary': 175,
                'organ': 176, 'necrosis': 177, 'gangrene': 178, 'ulcer': 179, 'ischemia': 180,
                // Rank 200+: General medical
                'lupus': 200, 'arthritis': 220, 'scleroderma': 240, 'gout': 300, 'fibromyalgia': 280,
                'joint': 320, 'bone': 340, 'cartilage': 360, 'tendon': 380, 'muscle': 350,
                'doctor': 400, 'clinic': 420, 'hospital': 440, 'patient': 460, 'medicine': 480,
                // Rank 500+: Doctor life
                'tired': 550, 'coffee': 580, 'pager': 600, 'rounds': 620, 'charting': 640,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'scleroderma': {
                // Rank 1: Target
                'scleroderma': 1,
                // Rank 2-5: Specific but requires knowledge
                'sclerodactyly': 2, 'scl70': 3, 'anticentromere': 4, 'morphea': 5,
                // Rank 6-15: Strong clinical associations
                'crest': 6, 'calcinosis': 7, 'telangiectasia': 8, 'esophageal': 9, 'dysmotility': 10,
                'raynaud': 11, 'digital': 12, 'ulcer': 13, 'pitting': 14, 'scar': 15,
                // Rank 16-30: Key features
                'skin': 16, 'thickening': 17, 'hardening': 18, 'tightening': 19, 'induration': 20,
                'fibrosis': 21, 'collagen': 22, 'deposition': 23, 'puffy': 24, 'fingers': 25,
                'edematous': 26, 'phase': 27, 'rodnan': 28, 'score': 29, 'mrss': 30,
                // Rank 31-50: Types and subtypes
                'limited': 31, 'diffuse': 32, 'cutaneous': 33, 'systemic': 34, 'sclerosis': 35,
                'ssc': 36, 'lcssc': 37, 'dcssc': 38, 'sine': 39, 'overlap': 40,
                'mixed': 41, 'connective': 42, 'tissue': 43, 'disease': 44, 'mctd': 45,
                'undifferentiated': 46, 'uctd': 47, 'autoimmune': 48, 'antibody': 49, 'ana': 50,
                // Rank 51-80: Organ involvement
                'pulmonary': 51, 'arterial': 52, 'hypertension': 53, 'pah': 54, 'interstitial': 55,
                'lung': 56, 'ild': 57, 'nsip': 58, 'uip': 59, 'ground': 60,
                'glass': 61, 'honeycombing': 62, 'renal': 63, 'crisis': 64, 'src': 65,
                'kidney': 66, 'malignant': 67, 'hypertensive': 68, 'ace': 69, 'inhibitor': 70,
                'heart': 71, 'cardiac': 72, 'pericardial': 73, 'effusion': 74, 'myocardial': 75,
                'gastrointestinal': 76, 'gi': 77, 'reflux': 78, 'gerd': 79, 'dysphagia': 80,
                // Rank 81-120: Symptoms and diagnosis
                'swallowing': 81, 'difficulty': 82, 'watermelon': 83, 'stomach': 84, 'gave': 85,
                'constipation': 86, 'diarrhea': 87, 'malabsorption': 88, 'sibo': 89, 'bacterial': 90,
                'overgrowth': 91, 'cold': 92, 'sensitivity': 93, 'white': 94, 'blue': 95,
                'red': 96, 'triphasic': 97, 'color': 98, 'change': 99, 'vasospasm': 100,
                'nailfold': 101, 'capillaroscopy': 102, 'capillary': 103, 'dropout': 104, 'dilated': 105,
                'loops': 106, 'hemorrhage': 107, 'avascular': 108, 'area': 109, 'pattern': 110,
                'hand': 111, 'face': 112, 'mask': 113, 'facies': 114, 'microstomia': 115,
                'mouth': 116, 'small': 117, 'opening': 118, 'contracture': 119, 'flexion': 120,
                // Rank 121-180: Treatment and management
                'mycophenolate': 121, 'cellcept': 122, 'cyclophosphamide': 123, 'nintedanib': 124, 'ofev': 125,
                'tocilizumab': 126, 'actemra': 127, 'rituximab': 128, 'stem': 129, 'cell': 130,
                'transplant': 131, 'autologous': 132, 'hsct': 133, 'methotrexate': 134, 'azathioprine': 135,
                'bosentan': 136, 'tracleer': 137, 'ambrisentan': 138, 'sildenafil': 139, 'tadalafil': 140,
                'epoprostenol': 141, 'prostacyclin': 142, 'iloprost': 143, 'calcium': 144, 'channel': 145,
                'blocker': 146, 'nifedipine': 147, 'amlodipine': 148, 'physical': 149, 'therapy': 150,
                'occupational': 151, 'stretching': 152, 'exercise': 153, 'paraffin': 154, 'wax': 155,
                'prednisone': 156, 'steroid': 157, 'low': 158, 'dose': 159, 'treatment': 160,
                'diagnosis': 161, 'criteria': 162, 'acr': 163, 'eular': 164, 'classification': 165,
                'rheumatology': 166, 'rheumatologist': 167, 'pulmonologist': 168, 'cardiologist': 169, 'multidisciplinary': 170,
                'fatigue': 171, 'pain': 172, 'joint': 173, 'stiffness': 174, 'swelling': 175,
                'arthralgia': 176, 'myalgia': 177, 'weakness': 178, 'inflammation': 179, 'infusion': 180,
                // Rank 200+: Related conditions
                'lupus': 200, 'vasculitis': 220, 'arthritis': 240, 'myositis': 150, 'dermatomyositis': 160,
                'polymyositis': 170, 'sjogren': 180, 'gout': 300, 'fibromyalgia': 280,
                'bone': 320, 'cartilage': 340, 'tendon': 360, 'muscle': 250, 'synovium': 380,
                'doctor': 400, 'clinic': 420, 'hospital': 440, 'patient': 460, 'medicine': 480,
                // Rank 500+: Doctor life
                'tired': 550, 'coffee': 580, 'pager': 600, 'rounds': 620, 'charting': 640,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'fibromyalgia': {
                // Rank 1: Target
                'fibromyalgia': 1,
                // Rank 2-5: Specific but requires knowledge
                'tender': 2, 'points': 3, 'widespread': 4, 'centralized': 5,
                // Rank 6-15: Strong clinical associations
                'sensitization': 6, 'hyperalgesia': 7, 'allodynia': 8, 'wpi': 9, 'sss': 10,
                'polysymptomatic': 11, 'distress': 12, 'nociplastic': 13, 'pain': 14, 'amplification': 15,
                // Rank 16-30: Key features
                'chronic': 16, 'diffuse': 17, 'musculoskeletal': 18, 'fatigue': 19, 'unrefreshing': 20,
                'sleep': 21, 'insomnia': 22, 'nonrestorative': 23, 'fog': 24, 'brain': 25,
                'cognitive': 26, 'dysfunction': 27, 'concentration': 28, 'memory': 29, 'forgetfulness': 30,
                // Rank 31-50: Symptoms and associations
                'headache': 31, 'tension': 32, 'migraine': 33, 'ibs': 34, 'irritable': 35,
                'bowel': 36, 'syndrome': 37, 'interstitial': 38, 'cystitis': 39, 'bladder': 40,
                'tmj': 41, 'temporomandibular': 42, 'jaw': 43, 'restless': 44, 'legs': 45,
                'rls': 46, 'paresthesia': 47, 'numbness': 48, 'tingling': 49, 'sensitivity': 50,
                // Rank 51-80: Related symptoms
                'light': 51, 'sound': 52, 'smell': 53, 'temperature': 54, 'weather': 55,
                'anxiety': 56, 'depression': 57, 'mood': 58, 'disorder': 59, 'ptsd': 60,
                'trauma': 61, 'stress': 62, 'psychosocial': 63, 'catastrophizing': 64, 'coping': 65,
                'stiffness': 66, 'morning': 67, 'ache': 68, 'soreness': 69, 'muscle': 70,
                'exhaustion': 71, 'tired': 72, 'malaise': 73, 'weakness': 74, 'deconditioning': 75,
                'flare': 76, 'trigger': 77, 'exacerbation': 78, 'remission': 79, 'fluctuating': 80,
                // Rank 81-120: Diagnosis and criteria
                'diagnosis': 81, 'exclusion': 82, 'criteria': 83, 'acr': 84, '2010': 85,
                '2016': 86, 'revision': 87, 'clinical': 88, 'assessment': 89, 'questionnaire': 90,
                'fiq': 91, 'impact': 92, 'severity': 93, 'functional': 94, 'status': 95,
                'normal': 96, 'labs': 97, 'workup': 98, 'negative': 99, 'inflammation': 100,
                'esr': 101, 'crp': 102, 'ana': 103, 'thyroid': 104, 'vitamin': 105,
                'd': 106, 'b12': 107, 'iron': 108, 'deficiency': 109, 'hypothyroid': 110,
                'overlap': 111, 'comorbid': 112, 'coexist': 113, 'secondary': 114, 'primary': 115,
                'central': 116, 'nervous': 117, 'system': 118, 'neurotransmitter': 119, 'serotonin': 120,
                // Rank 121-180: Treatment
                'pregabalin': 121, 'lyrica': 122, 'duloxetine': 123, 'cymbalta': 124, 'milnacipran': 125,
                'savella': 126, 'amitriptyline': 127, 'tricyclic': 128, 'antidepressant': 129, 'snri': 130,
                'gabapentin': 131, 'neurontin': 132, 'cyclobenzaprine': 133, 'flexeril': 134, 'relaxant': 135,
                'tramadol': 136, 'low': 137, 'dose': 138, 'naltrexone': 139, 'ldn': 140,
                'exercise': 141, 'aerobic': 142, 'walking': 143, 'swimming': 144, 'aquatic': 145,
                'physical': 146, 'therapy': 147, 'stretching': 148, 'yoga': 149, 'tai': 150,
                'chi': 151, 'meditation': 152, 'mindfulness': 153, 'cbt': 154, 'behavioral': 155,
                'sleep': 156, 'hygiene': 157, 'pacing': 158, 'activity': 159, 'graded': 160,
                'multidisciplinary': 161, 'approach': 162, 'education': 163, 'patient': 164, 'self': 165,
                'management': 166, 'treatment': 167, 'nonpharmacologic': 168, 'pharmacologic': 169, 'combination': 170,
                'rheumatology': 171, 'rheumatologist': 172, 'pain': 173, 'specialist': 174, 'clinic': 175,
                'doctor': 176, 'appointment': 177, 'followup': 178, 'chronic': 179, 'condition': 180,
                // Rank 200+: Related conditions
                'lupus': 220, 'arthritis': 240, 'scleroderma': 260, 'vasculitis': 280, 'gout': 300,
                'myofascial': 55, 'chronic': 60, 'fatigue': 65, 'cfs': 70, 'me': 75,
                'joint': 320, 'bone': 340, 'cartilage': 360, 'tendon': 380, 'synovium': 400,
                // Rank 450+: Doctor life
                'coffee': 480, 'pager': 500, 'rounds': 520, 'charting': 540, 'hospital': 450,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'joint': {
                // Rank 1: Target
                'joint': 1,
                // Rank 2-5: Specific but requires knowledge
                'articular': 2, 'articulation': 3, 'diarthrodial': 4, 'synovial': 5,
                // Rank 6-15: Strong clinical associations
                'capsule': 6, 'cavity': 7, 'space': 8, 'cartilage': 9, 'synovium': 10,
                'ligament': 11, 'tendon': 12, 'meniscus': 13, 'labrum': 14, 'bursa': 15,
                // Rank 16-30: Types and locations
                'knee': 16, 'hip': 17, 'shoulder': 18, 'elbow': 19, 'wrist': 20,
                'ankle': 21, 'finger': 22, 'toe': 23, 'spine': 24, 'facet': 25,
                'sacroiliac': 26, 'si': 27, 'temporomandibular': 28, 'tmj': 29, 'sternoclavicular': 30,
                // Rank 31-50: Function and movement
                'movement': 31, 'motion': 32, 'range': 33, 'rom': 34, 'flexibility': 35,
                'flexion': 36, 'extension': 37, 'rotation': 38, 'abduction': 39, 'adduction': 40,
                'pronation': 41, 'supination': 42, 'pivot': 43, 'hinge': 44, 'ball': 45,
                'socket': 46, 'gliding': 47, 'saddle': 48, 'condyloid': 49, 'ellipsoid': 50,
                // Rank 51-80: Pathology
                'pain': 51, 'ache': 52, 'soreness': 53, 'swelling': 54, 'effusion': 55,
                'stiffness': 56, 'morning': 57, 'inflammation': 58, 'synovitis': 59, 'arthritis': 60,
                'osteoarthritis': 61, 'oa': 62, 'rheumatoid': 63, 'ra': 64, 'gout': 65,
                'pseudogout': 66, 'septic': 67, 'infectious': 68, 'crystal': 69, 'deposition': 70,
                'injury': 71, 'sprain': 72, 'strain': 73, 'tear': 74, 'rupture': 75,
                'dislocation': 76, 'subluxation': 77, 'instability': 78, 'laxity': 79, 'hypermobility': 80,
                // Rank 81-120: Treatment and procedures
                'injection': 81, 'aspiration': 82, 'arthrocentesis': 83, 'steroid': 84, 'corticosteroid': 85,
                'hyaluronic': 86, 'viscosupplementation': 87, 'prp': 88, 'platelet': 89, 'rich': 90,
                'replacement': 91, 'arthroplasty': 92, 'total': 93, 'tka': 94, 'tha': 95,
                'arthroscopy': 96, 'scope': 97, 'surgery': 98, 'prosthetic': 99, 'implant': 100,
                'fusion': 101, 'arthrodesis': 102, 'osteotomy': 103, 'debridement': 104, 'lavage': 105,
                'physical': 106, 'therapy': 107, 'pt': 108, 'exercise': 109, 'stretch': 110,
                'strengthen': 111, 'mobilization': 112, 'manipulation': 113, 'brace': 114, 'splint': 115,
                'support': 116, 'orthotic': 117, 'assistive': 118, 'device': 119, 'cane': 120,
                // Rank 121-180: Diagnosis and imaging
                'xray': 121, 'radiograph': 122, 'mri': 123, 'ultrasound': 124, 'ct': 125,
                'imaging': 126, 'narrowing': 127, 'osteophyte': 128, 'spur': 129, 'erosion': 130,
                'bone': 131, 'subchondral': 132, 'sclerosis': 133, 'cyst': 134, 'loose': 135,
                'body': 136, 'mouse': 137, 'fluid': 138, 'analysis': 139, 'culture': 140,
                'count': 141, 'cell': 142, 'wbc': 143, 'diagnosis': 144, 'examination': 145,
                'palpation': 146, 'crepitus': 147, 'grinding': 148, 'clicking': 149, 'popping': 150,
                'swollen': 151, 'red': 152, 'warm': 153, 'hot': 154, 'tender': 155,
                'limited': 156, 'restricted': 157, 'mobility': 158, 'function': 159, 'disability': 160,
                'chronic': 161, 'acute': 162, 'subacute': 163, 'recurrent': 164, 'progressive': 165,
                'degenerative': 166, 'inflammatory': 167, 'autoimmune': 168, 'treatment': 169, 'management': 170,
                'prednisone': 171, 'nsaid': 172, 'dmard': 173, 'biologic': 174, 'methotrexate': 175,
                'infusion': 176, 'humira': 177, 'enbrel': 178, 'remicade': 179, 'medication': 180,
                // Rank 200+: Related conditions
                'lupus': 220, 'vasculitis': 260, 'scleroderma': 280, 'fibromyalgia': 240, 'myositis': 300,
                'muscle': 200, 'nerve': 320, 'connective': 340, 'tissue': 360, 'collagen': 380,
                'doctor': 400, 'clinic': 420, 'hospital': 440, 'rheumatologist': 390, 'orthopedic': 395,
                // Rank 500+: Doctor life
                'tired': 550, 'coffee': 580, 'pager': 600, 'rounds': 620, 'charting': 640,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'cartilage': {
                // Rank 1: Target
                'cartilage': 1,
                // Rank 2-5: Specific but requires knowledge
                'chondrocyte': 2, 'articular': 3, 'hyaline': 4, 'fibrocartilage': 5,
                // Rank 6-15: Strong clinical associations
                'meniscus': 6, 'labrum': 7, 'disc': 8, 'intervertebral': 9, 'elastic': 10,
                'proteoglycan': 11, 'aggrecan': 12, 'collagen': 13, 'type': 14, 'ii': 15,
                // Rank 16-30: Structure and function
                'matrix': 16, 'extracellular': 17, 'ecm': 18, 'ground': 19, 'substance': 20,
                'water': 21, 'content': 22, 'avascular': 23, 'aneural': 24, 'alymphatic': 25,
                'cushion': 26, 'shock': 27, 'absorber': 28, 'smooth': 29, 'surface': 30,
                // Rank 31-50: Locations and types
                'knee': 31, 'hip': 32, 'shoulder': 33, 'ankle': 34, 'elbow': 35,
                'wrist': 36, 'finger': 37, 'toe': 38, 'spine': 39, 'rib': 40,
                'nose': 41, 'ear': 42, 'trachea': 43, 'larynx': 44, 'epiglottis': 45,
                'costal': 46, 'thyroid': 47, 'cricoid': 48, 'arytenoid': 49, 'growth': 50,
                // Rank 51-80: Pathology
                'damage': 51, 'injury': 52, 'tear': 53, 'defect': 54, 'lesion': 55,
                'degeneration': 56, 'wear': 57, 'erosion': 58, 'loss': 59, 'thinning': 60,
                'fibrillation': 61, 'fissure': 62, 'crack': 63, 'fragment': 64, 'loose': 65,
                'body': 66, 'flap': 67, 'osteochondral': 68, 'ocd': 69, 'osteochondritis': 70,
                'dissecans': 71, 'chondromalacia': 72, 'patella': 73, 'softening': 74, 'breakdown': 75,
                'osteoarthritis': 76, 'oa': 77, 'degenerative': 78, 'arthritis': 79, 'joint': 80,
                // Rank 81-120: Diagnosis and imaging
                'mri': 81, 'imaging': 82, 'xray': 83, 'narrowing': 84, 'space': 85,
                'bone': 86, 'subchondral': 87, 'edema': 88, 'cyst': 89, 'osteophyte': 90,
                'spur': 91, 'arthroscopy': 92, 'scope': 93, 'visualization': 94, 'grading': 95,
                'outerbridge': 96, 'classification': 97, 'grade': 98, 'severity': 99, 'full': 100,
                'thickness': 101, 'partial': 102, 'superficial': 103, 'deep': 104, 'subchondral': 105,
                'diagnosis': 106, 'examination': 107, 'crepitus': 108, 'grinding': 109, 'clicking': 110,
                'popping': 111, 'catching': 112, 'locking': 113, 'mechanical': 114, 'symptom': 115,
                'pain': 116, 'swelling': 117, 'effusion': 118, 'stiffness': 119, 'limited': 120,
                // Rank 121-180: Treatment
                'repair': 121, 'restoration': 122, 'regeneration': 123, 'healing': 124, 'microfracture': 125,
                'drilling': 126, 'abrasion': 127, 'chondroplasty': 128, 'debridement': 129, 'transplant': 130,
                'oats': 131, 'mosaicplasty': 132, 'autograft': 133, 'allograft': 134, 'aci': 135,
                'autologous': 136, 'chondrocyte': 137, 'implantation': 138, 'maci': 139, 'scaffold': 140,
                'stem': 141, 'cell': 142, 'prp': 143, 'platelet': 144, 'rich': 145,
                'plasma': 146, 'hyaluronic': 147, 'acid': 148, 'viscosupplementation': 149, 'injection': 150,
                'surgery': 151, 'arthroscopic': 152, 'open': 153, 'replacement': 154, 'arthroplasty': 155,
                'physical': 156, 'therapy': 157, 'exercise': 158, 'strengthening': 159, 'flexibility': 160,
                'weight': 161, 'loss': 162, 'offloading': 163, 'brace': 164, 'orthotic': 165,
                'nsaid': 166, 'glucosamine': 167, 'chondroitin': 168, 'supplement': 169, 'treatment': 170,
                'synovium': 171, 'tendon': 172, 'ligament': 173, 'muscle': 174, 'inflammation': 175,
                'rheumatoid': 176, 'autoimmune': 177, 'gout': 178, 'crystal': 179, 'steroid': 180,
                // Rank 200+: General medical
                'lupus': 240, 'vasculitis': 260, 'scleroderma': 280, 'fibromyalgia': 300, 'prednisone': 220,
                'methotrexate': 320, 'infusion': 340, 'doctor': 400, 'clinic': 420, 'hospital': 440,
                // Rank 500+: Doctor life
                'tired': 550, 'coffee': 580, 'pager': 600, 'rounds': 620, 'charting': 640,
                // Rank 800+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'synovium': {
                // Rank 1: Target
                'synovium': 1,
                // Rank 2-5: Specific but requires knowledge
                'synoviocyte': 2, 'intima': 3, 'subintima': 4, 'villous': 5,
                // Rank 6-15: Strong clinical associations
                'synovial': 6, 'membrane': 7, 'lining': 8, 'layer': 9, 'capsule': 10,
                'fluid': 11, 'joint': 12, 'hyaluronic': 13, 'lubricin': 14, 'lubrication': 15,
                // Rank 16-30: Pathology
                'synovitis': 16, 'inflammation': 17, 'pannus': 18, 'proliferation': 19, 'hyperplasia': 20,
                'hypertrophy': 21, 'thickening': 22, 'boggy': 23, 'doughy': 24, 'swelling': 25,
                'effusion': 26, 'warmth': 27, 'erythema': 28, 'tenderness': 29, 'pain': 30,
                // Rank 31-50: Disease associations
                'rheumatoid': 31, 'arthritis': 32, 'ra': 33, 'erosion': 34, 'bone': 35,
                'destruction': 36, 'cartilage': 37, 'damage': 38, 'autoimmune': 39, 'attack': 40,
                'immune': 41, 'infiltrate': 42, 'lymphocyte': 43, 't': 44, 'cell': 45,
                'macrophage': 46, 'fibroblast': 47, 'cytokine': 48, 'tnf': 49, 'alpha': 50,
                // Rank 51-80: Mediators and mechanisms
                'interleukin': 51, 'il1': 52, 'il6': 53, 'il17': 54, 'interferon': 55,
                'prostaglandin': 56, 'metalloproteinase': 57, 'mmp': 58, 'collagenase': 59, 'stromelysin': 60,
                'rankl': 61, 'osteoclast': 62, 'angiogenesis': 63, 'neovascularization': 64, 'vegf': 65,
                'hypoxia': 66, 'oxidative': 67, 'stress': 68, 'apoptosis': 69, 'survival': 70,
                'nfkb': 71, 'jak': 72, 'stat': 73, 'signaling': 74, 'pathway': 75,
                'target': 76, 'therapeutic': 77, 'biologic': 78, 'small': 79, 'molecule': 80,
                // Rank 81-120: Diagnosis and procedures
                'aspiration': 81, 'arthrocentesis': 82, 'analysis': 83, 'cell': 84, 'count': 85,
                'wbc': 86, 'differential': 87, 'neutrophil': 88, 'crystal': 89, 'microscopy': 90,
                'polarized': 91, 'culture': 92, 'gram': 93, 'stain': 94, 'infection': 95,
                'biopsy': 96, 'needle': 97, 'arthroscopic': 98, 'histology': 99, 'pathology': 100,
                'ultrasound': 101, 'doppler': 102, 'power': 103, 'mri': 104, 'contrast': 105,
                'enhancement': 106, 'imaging': 107, 'diagnosis': 108, 'inflammation': 109, 'active': 110,
                'disease': 111, 'activity': 112, 'flare': 113, 'remission': 114, 'monitoring': 115,
                'knee': 116, 'hip': 117, 'shoulder': 118, 'wrist': 119, 'ankle': 120,
                // Rank 121-180: Treatment
                'injection': 121, 'steroid': 122, 'corticosteroid': 123, 'triamcinolone': 124, 'methylprednisolone': 125,
                'dmard': 126, 'methotrexate': 127, 'sulfasalazine': 128, 'hydroxychloroquine': 129, 'leflunomide': 130,
                'humira': 131, 'adalimumab': 132, 'enbrel': 133, 'etanercept': 134, 'remicade': 135,
                'infliximab': 136, 'rituximab': 137, 'abatacept': 138, 'tocilizumab': 139, 'tofacitinib': 140,
                'baricitinib': 141, 'upadacitinib': 142, 'infusion': 143, 'subcutaneous': 144, 'oral': 145,
                'prednisone': 146, 'nsaid': 147, 'synovectomy': 148, 'surgical': 149, 'radiation': 150,
                'treatment': 151, 'therapy': 152, 'management': 153, 'control': 154, 'suppression': 155,
                'tendon': 156, 'ligament': 157, 'muscle': 158, 'bursa': 159, 'sheath': 160,
                'tenosynovitis': 161, 'tenosynovium': 162, 'trigger': 163, 'finger': 164, 'dequervain': 165,
                'gout': 166, 'pseudogout': 167, 'cppd': 168, 'septic': 169, 'infectious': 170,
                'lupus': 171, 'psoriatic': 172, 'ankylosing': 173, 'spondyloarthritis': 174, 'reactive': 175,
                'osteoarthritis': 176, 'oa': 177, 'secondary': 178, 'inflammatory': 179, 'noninflammatory': 180,
                // Rank 200+: General
                'vasculitis': 220, 'scleroderma': 240, 'fibromyalgia': 280, 'myositis': 260, 'doctor': 300,
                'clinic': 320, 'hospital': 340, 'rheumatologist': 290, 'specialist': 295,
                // Rank 400+: Doctor life
                'tired': 450, 'coffee': 480, 'pager': 500, 'rounds': 520, 'charting': 540,
                // Rank 800+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'tendon': {
                // Rank 1: Target
                'tendon': 1,
                // Rank 2-5: Specific but requires knowledge
                'tenocyte': 2, 'enthesis': 3, 'paratenon': 4, 'epitenon': 5,
                // Rank 6-15: Strong clinical associations
                'tendinopathy': 6, 'tendinitis': 7, 'tendinosis': 8, 'enthesopathy': 9, 'enthesitis': 10,
                'collagen': 11, 'fiber': 12, 'bundle': 13, 'fascicle': 14, 'crimp': 15,
                // Rank 16-30: Specific tendons
                'achilles': 16, 'rotator': 17, 'cuff': 18, 'supraspinatus': 19, 'infraspinatus': 20,
                'subscapularis': 21, 'biceps': 22, 'triceps': 23, 'patellar': 24, 'quadriceps': 25,
                'hamstring': 26, 'adductor': 27, 'iliopsoas': 28, 'gluteal': 29, 'tibialis': 30,
                // Rank 31-50: Conditions
                'tear': 31, 'rupture': 32, 'partial': 33, 'complete': 34, 'full': 35,
                'thickness': 36, 'strain': 37, 'sprain': 38, 'overuse': 39, 'repetitive': 40,
                'degeneration': 41, 'microtear': 42, 'calcific': 43, 'calcification': 44, 'deposit': 45,
                'tennis': 46, 'elbow': 47, 'lateral': 48, 'epicondylitis': 49, 'epicondylopathy': 50,
                // Rank 51-80: More conditions and anatomy
                'golfer': 51, 'medial': 52, 'jumper': 53, 'knee': 54, 'runner': 55,
                'plantar': 56, 'fasciitis': 57, 'fascia': 58, 'dequervain': 59, 'stenosing': 60,
                'tenosynovitis': 61, 'trigger': 62, 'finger': 63, 'thumb': 64, 'sheath': 65,
                'synovium': 66, 'fluid': 67, 'effusion': 68, 'ganglion': 69, 'cyst': 70,
                'muscle': 71, 'attachment': 72, 'insertion': 73, 'origin': 74, 'bone': 75,
                'periosteum': 76, 'junction': 77, 'myotendinous': 78, 'musculotendinous': 79, 'aponeurosis': 80,
                // Rank 81-120: Symptoms and diagnosis
                'pain': 81, 'ache': 82, 'soreness': 83, 'tenderness': 84, 'palpation': 85,
                'swelling': 86, 'thickening': 87, 'nodule': 88, 'crepitus': 89, 'snapping': 90,
                'weakness': 91, 'strength': 92, 'loss': 93, 'function': 94, 'disability': 95,
                'stiffness': 96, 'morning': 97, 'warmup': 98, 'phenomenon': 99, 'movement': 100,
                'ultrasound': 101, 'mri': 102, 'imaging': 103, 'hypoechoic': 104, 'heterogeneous': 105,
                'thickened': 106, 'irregular': 107, 'neovascularization': 108, 'doppler': 109, 'flow': 110,
                'xray': 111, 'calcification': 112, 'spur': 113, 'diagnosis': 114, 'clinical': 115,
                'examination': 116, 'test': 117, 'special': 118, 'provocative': 119, 'maneuver': 120,
                // Rank 121-180: Treatment
                'rest': 121, 'ice': 122, 'compression': 123, 'elevation': 124, 'rice': 125,
                'nsaid': 126, 'ibuprofen': 127, 'naproxen': 128, 'topical': 129, 'gel': 130,
                'injection': 131, 'steroid': 132, 'corticosteroid': 133, 'cortisone': 134, 'prp': 135,
                'platelet': 136, 'rich': 137, 'plasma': 138, 'prolotherapy': 139, 'dextrose': 140,
                'physical': 141, 'therapy': 142, 'exercise': 143, 'eccentric': 144, 'loading': 145,
                'stretch': 146, 'strengthening': 147, 'progressive': 148, 'resistance': 149, 'isometric': 150,
                'brace': 151, 'splint': 152, 'strap': 153, 'counterforce': 154, 'support': 155,
                'surgery': 156, 'repair': 157, 'reconstruction': 158, 'debridement': 159, 'release': 160,
                'shockwave': 161, 'eswt': 162, 'extracorporeal': 163, 'dry': 164, 'needling': 165,
                'treatment': 166, 'management': 167, 'conservative': 168, 'operative': 169, 'rehabilitation': 170,
                'joint': 171, 'cartilage': 172, 'ligament': 173, 'inflammation': 174, 'arthritis': 175,
                'rheumatoid': 176, 'psoriatic': 177, 'spondyloarthritis': 178, 'gout': 179, 'fluoroquinolone': 180,
                // Rank 200+: General
                'lupus': 250, 'vasculitis': 280, 'scleroderma': 300, 'fibromyalgia': 260, 'autoimmune': 220,
                'doctor': 350, 'clinic': 380, 'hospital': 400, 'orthopedic': 320, 'sports': 330,
                // Rank 450+: Doctor life
                'tired': 500, 'coffee': 530, 'pager': 550, 'rounds': 570, 'charting': 590,
                'swollen': 140,
                // Rank 800+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'bone': {
                // Rank 1: Target
                'bone': 1,
                // Rank 2-5: Specific but requires knowledge
                'osteocyte': 2, 'osteoblast': 3, 'osteoclast': 4, 'osseous': 5,
                // Rank 6-15: Strong clinical associations
                'cortical': 6, 'trabecular': 7, 'cancellous': 8, 'compact': 9, 'spongy': 10,
                'periosteum': 11, 'endosteum': 12, 'marrow': 13, 'medullary': 14, 'cavity': 15,
                // Rank 16-30: Structure and components
                'matrix': 16, 'collagen': 17, 'hydroxyapatite': 18, 'calcium': 19, 'phosphate': 20,
                'mineral': 21, 'density': 22, 'bmd': 23, 'mass': 24, 'strength': 25,
                'remodeling': 26, 'turnover': 27, 'formation': 28, 'resorption': 29, 'coupling': 30,
                // Rank 31-50: Specific bones
                'skeleton': 31, 'axial': 32, 'appendicular': 33, 'skull': 34, 'cranium': 35,
                'spine': 36, 'vertebra': 37, 'cervical': 38, 'thoracic': 39, 'lumbar': 40,
                'sacrum': 41, 'coccyx': 42, 'rib': 43, 'sternum': 44, 'clavicle': 45,
                'scapula': 46, 'humerus': 47, 'radius': 48, 'ulna': 49, 'carpals': 50,
                // Rank 51-80: More bones and pathology
                'metacarpal': 51, 'phalanx': 52, 'pelvis': 53, 'ilium': 54, 'ischium': 55,
                'pubis': 56, 'femur': 57, 'patella': 58, 'tibia': 59, 'fibula': 60,
                'tarsals': 61, 'metatarsal': 62, 'calcaneus': 63, 'talus': 64, 'long': 65,
                'short': 66, 'flat': 67, 'irregular': 68, 'sesamoid': 69, 'epiphysis': 70,
                'diaphysis': 71, 'metaphysis': 72, 'growth': 73, 'plate': 74, 'physis': 75,
                'fracture': 76, 'break': 77, 'crack': 78, 'stress': 79, 'pathologic': 80,
                // Rank 81-120: Conditions and diseases
                'osteoporosis': 81, 'osteopenia': 82, 'fragility': 83, 'compression': 84, 'vertebral': 85,
                'hip': 86, 'wrist': 87, 'colles': 88, 'distal': 89, 'proximal': 90,
                'healing': 91, 'callus': 92, 'union': 93, 'nonunion': 94, 'malunion': 95,
                'osteomyelitis': 96, 'infection': 97, 'septic': 98, 'osteonecrosis': 99, 'avascular': 100,
                'necrosis': 101, 'avn': 102, 'infarct': 103, 'paget': 104, 'disease': 105,
                'metastasis': 106, 'cancer': 107, 'myeloma': 108, 'lesion': 109, 'lytic': 110,
                'blastic': 111, 'tumor': 112, 'primary': 113, 'secondary': 114, 'benign': 115,
                'malignant': 116, 'erosion': 117, 'destruction': 118, 'damage': 119, 'loss': 120,
                // Rank 121-180: Diagnosis and treatment
                'xray': 121, 'radiograph': 122, 'dexa': 123, 'dxa': 124, 'scan': 125,
                'tscore': 126, 'zscore': 127, 'mri': 128, 'ct': 129, 'scintigraphy': 130,
                'imaging': 131, 'diagnosis': 132, 'screening': 133, 'frax': 134, 'risk': 135,
                'bisphosphonate': 136, 'alendronate': 137, 'fosamax': 138, 'risedronate': 139, 'actonel': 140,
                'zoledronic': 141, 'reclast': 142, 'denosumab': 143, 'prolia': 144, 'xgeva': 145,
                'teriparatide': 146, 'forteo': 147, 'abaloparatide': 148, 'tymlos': 149, 'romosozumab': 150,
                'evenity': 151, 'raloxifene': 152, 'evista': 153, 'hormone': 154, 'therapy': 155,
                'calcium': 156, 'vitamin': 157, 'd': 158, 'supplement': 159, 'diet': 160,
                'exercise': 161, 'weight': 162, 'bearing': 163, 'resistance': 164, 'fall': 165,
                'prevention': 166, 'treatment': 167, 'management': 168, 'orthopedic': 169, 'surgery': 170,
                'joint': 171, 'cartilage': 172, 'tendon': 173, 'ligament': 174, 'muscle': 175,
                'synovium': 176, 'inflammation': 177, 'arthritis': 178, 'rheumatoid': 179, 'osteoarthritis': 180,
                // Rank 200+: Related conditions
                'lupus': 220, 'gout': 260, 'vasculitis': 280, 'scleroderma': 300, 'prednisone': 190,
                'steroid': 195, 'glucocorticoid': 200, 'induced': 205, 'giop': 210, 'fibromyalgia': 320,
                'pain': 240, 'ache': 245, 'doctor': 350, 'clinic': 380, 'hospital': 400,
                // Rank 450+: Doctor life
                'tired': 500, 'coffee': 530, 'pager': 550, 'rounds': 570, 'charting': 590,
                // Rank 800+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'prednisone': {
                'prednisone': 1,
                // Rank 2-5: Specific steroid terms
                'prednisolone': 2, 'methylprednisolone': 3, 'medrol': 4, 'deltasone': 5,
                // Rank 6-15: Other corticosteroids and dosing
                'solumedrol': 6, 'dexamethasone': 7, 'hydrocortisone': 8, 'cortisone': 9, 'decadron': 10,
                'taper': 11, 'burst': 12, 'pulse': 13, 'dosepak': 14, 'rayos': 15,
                // Rank 16-30: Pharmacology and administration
                'glucocorticoid': 16, 'corticosteroid': 17, 'steroid': 18, 'immunosuppressive': 19, 'antiinflammatory': 20,
                'milligram': 21, 'mg': 22, 'tablet': 23, 'oral': 24, 'intravenous': 25,
                'iv': 26, 'daily': 27, 'twice': 28, 'divided': 29, 'dose': 30,
                // Rank 31-50: Side effects (specific)
                'cushingoid': 31, 'moonface': 32, 'buffalo': 33, 'hump': 34, 'striae': 35,
                'hyperglycemia': 36, 'osteopenia': 37, 'avascular': 38, 'necrosis': 39, 'myopathy': 40,
                'adrenal': 41, 'suppression': 42, 'insufficiency': 43, 'withdrawal': 44, 'dependence': 45,
                'cataracts': 46, 'glaucoma': 47, 'psychosis': 48, 'mania': 49, 'insomnia': 50,
                // Rank 51-70: Side effects (general)
                'weight': 51, 'gain': 52, 'appetite': 53, 'increased': 54, 'moon': 55,
                'face': 56, 'thin': 57, 'skin': 58, 'bruising': 59, 'acne': 60,
                'hirsutism': 61, 'edema': 62, 'hypertension': 63, 'diabetes': 64, 'glucose': 65,
                'osteoporosis': 66, 'fracture': 67, 'bone': 68, 'loss': 69, 'density': 70,
                // Rank 71-90: Clinical uses and monitoring
                'flare': 71, 'exacerbation': 72, 'rescue': 73, 'bridge': 74, 'maintenance': 75,
                'sparing': 76, 'agent': 77, 'minimize': 78, 'wean': 79, 'titrate': 80,
                'infection': 81, 'risk': 82, 'prophylaxis': 83, 'calcium': 84, 'vitamin': 85,
                'd': 86, 'bisphosphonate': 87, 'monitor': 88, 'glucose': 89, 'pressure': 90,
                // Rank 91-110: Conditions treated
                'lupus': 91, 'nephritis': 92, 'vasculitis': 93, 'myositis': 94, 'polymyalgia': 95,
                'rheumatica': 96, 'giant': 97, 'cell': 98, 'arteritis': 99, 'temporal': 100,
                'asthma': 101, 'copd': 102, 'allergic': 103, 'reaction': 104, 'anaphylaxis': 105,
                'ibd': 106, 'crohn': 107, 'colitis': 108, 'transplant': 109, 'rejection': 110,
                // Rank 111-130: Related treatments and concepts
                'dmard': 111, 'methotrexate': 112, 'azathioprine': 113, 'mycophenolate': 114, 'cyclophosphamide': 115,
                'biologic': 116, 'humira': 117, 'rituximab': 118, 'infusion': 119, 'injection': 120,
                'inflammation': 121, 'immune': 122, 'system': 123, 'autoimmune': 124, 'disease': 125,
                'chronic': 126, 'acute': 127, 'severe': 128, 'moderate': 129, 'mild': 130,
                // Rank 131-150: Medical context
                'rheumatologist': 131, 'doctor': 132, 'physician': 133, 'prescription': 134, 'pharmacy': 135,
                'medication': 136, 'drug': 137, 'treatment': 138, 'therapy': 139, 'regimen': 140,
                'arthritis': 141, 'rheumatoid': 142, 'joint': 143, 'pain': 144, 'swelling': 145,
                'stiffness': 146, 'fatigue': 147, 'fever': 148, 'malaise': 149, 'weakness': 150,
                // Rank 151-180: Healthcare settings and broader terms
                'clinic': 151, 'hospital': 152, 'appointment': 153, 'visit': 154, 'followup': 155,
                'lab': 156, 'test': 157, 'blood': 158, 'cbc': 159, 'chemistry': 160,
                'diagnosis': 161, 'prognosis': 162, 'outcome': 163, 'remission': 164, 'control': 165,
                'rounds': 166, 'charting': 167, 'note': 168, 'documentation': 169, 'emr': 170,
                'tired': 171, 'exhausted': 172, 'sleep': 173, 'rest': 174, 'energy': 175,
                'pager': 176, 'call': 177, 'consult': 178, 'coffee': 179, 'break': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'methotrexate': {
                'methotrexate': 1,
                // Rank 2-5: Specific abbreviations and formulations
                'mtx': 2, 'trexall': 3, 'rheumatrex': 4, 'otrexup': 5,
                // Rank 6-15: Pharmacology
                'rasuvo': 6, 'antifolate': 7, 'antimetabolite': 8, 'dihydrofolate': 9, 'reductase': 10,
                'inhibitor': 11, 'folate': 12, 'folic': 13, 'acid': 14, 'leucovorin': 15,
                // Rank 16-30: Dosing and administration
                'weekly': 16, 'once': 17, 'dose': 18, 'milligram': 19, 'mg': 20,
                'tablet': 21, 'oral': 22, 'injectable': 23, 'subcutaneous': 24, 'intramuscular': 25,
                'autoinjector': 26, 'prefilled': 27, 'syringe': 28, 'pen': 29, 'self': 30,
                // Rank 31-50: DMARD classification
                'dmard': 31, 'disease': 32, 'modifying': 33, 'antirheumatic': 34, 'drug': 35,
                'conventional': 36, 'synthetic': 37, 'csdmard': 38, 'anchor': 39, 'first': 40,
                'line': 41, 'standard': 42, 'care': 43, 'gold': 44, 'combination': 45,
                'therapy': 46, 'monotherapy': 47, 'triple': 48, 'sulfasalazine': 49, 'hydroxychloroquine': 50,
                // Rank 51-70: Side effects and toxicity
                'nausea': 51, 'vomiting': 52, 'mouth': 53, 'sores': 54, 'stomatitis': 55,
                'hepatotoxicity': 56, 'liver': 57, 'enzyme': 58, 'transaminitis': 59, 'alt': 60,
                'ast': 61, 'fibrosis': 62, 'cirrhosis': 63, 'myelosuppression': 64, 'pancytopenia': 65,
                'leukopenia': 66, 'thrombocytopenia': 67, 'anemia': 68, 'pneumonitis': 69, 'lung': 70,
                // Rank 71-90: Monitoring and precautions
                'monitoring': 71, 'lab': 72, 'test': 73, 'cbc': 74, 'complete': 75,
                'blood': 76, 'count': 77, 'lft': 78, 'creatinine': 79, 'kidney': 80,
                'pregnancy': 81, 'contraindicated': 82, 'teratogenic': 83, 'contraception': 84, 'conception': 85,
                'alcohol': 86, 'avoid': 87, 'interaction': 88, 'nsaid': 89, 'trimethoprim': 90,
                // Rank 91-110: Conditions treated
                'rheumatoid': 91, 'arthritis': 92, 'psoriatic': 93, 'juvenile': 94, 'idiopathic': 95,
                'lupus': 96, 'vasculitis': 97, 'myositis': 98, 'dermatomyositis': 99, 'sarcoidosis': 100,
                'psoriasis': 101, 'ectopic': 102, 'cancer': 103, 'lymphoma': 104, 'leukemia': 105,
                'inflammatory': 106, 'autoimmune': 107, 'chronic': 108, 'disease': 109, 'disorder': 110,
                // Rank 111-130: Related treatments
                'biologic': 111, 'humira': 112, 'adalimumab': 113, 'enbrel': 114, 'etanercept': 115,
                'remicade': 116, 'infliximab': 117, 'tnf': 118, 'jak': 119, 'inhibitor': 120,
                'prednisone': 121, 'steroid': 122, 'corticosteroid': 123, 'taper': 124, 'sparing': 125,
                'infusion': 126, 'rituximab': 127, 'tocilizumab': 128, 'abatacept': 129, 'orencia': 130,
                // Rank 131-150: Clinical concepts
                'efficacy': 131, 'response': 132, 'remission': 133, 'low': 134, 'activity': 135,
                'das28': 136, 'cdai': 137, 'sdai': 138, 'acr': 139, 'criteria': 140,
                'inflammation': 141, 'joint': 142, 'swelling': 143, 'pain': 144, 'stiffness': 145,
                'erosion': 146, 'damage': 147, 'progression': 148, 'radiographic': 149, 'xray': 150,
                // Rank 151-180: Healthcare context
                'rheumatologist': 151, 'doctor': 152, 'specialist': 153, 'prescription': 154, 'pharmacy': 155,
                'medication': 156, 'treatment': 157, 'plan': 158, 'regimen': 159, 'adherence': 160,
                'compliance': 161, 'side': 162, 'effect': 163, 'tolerability': 164, 'intolerance': 165,
                'clinic': 166, 'hospital': 167, 'appointment': 168, 'visit': 169, 'followup': 170,
                'diagnosis': 171, 'prognosis': 172, 'outcome': 173, 'quality': 174, 'life': 175,
                'rounds': 176, 'charting': 177, 'tired': 178, 'coffee': 179, 'pager': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'humira': {
                'humira': 1,
                // Rank 2-5: Specific names and biosimilars
                'adalimumab': 2, 'hadlima': 3, 'hyrimoz': 4, 'cyltezo': 5,
                // Rank 6-15: Biosimilars and TNF class
                'amjevita': 6, 'yusimry': 7, 'idacio': 8, 'biosimilar': 9, 'interchangeable': 10,
                'tnf': 11, 'tumor': 12, 'necrosis': 13, 'factor': 14, 'inhibitor': 15,
                // Rank 16-30: Pharmacology
                'anti': 16, 'monoclonal': 17, 'antibody': 18, 'igg1': 19, 'human': 20,
                'fully': 21, 'recombinant': 22, 'cytokine': 23, 'blocker': 24, 'targeted': 25,
                'therapy': 26, 'biologic': 27, 'bdmard': 28, 'originator': 29, 'reference': 30,
                // Rank 31-50: Administration
                'injection': 31, 'subcutaneous': 32, 'subq': 33, 'pen': 34, 'autoinjector': 35,
                'citrate': 36, 'free': 37, 'prefilled': 38, 'syringe': 39, 'self': 40,
                'administer': 41, 'biweekly': 42, 'every': 43, 'two': 44, 'weeks': 45,
                'refrigerate': 46, 'storage': 47, 'cold': 48, 'chain': 49, 'specialty': 50,
                // Rank 51-70: Conditions treated
                'rheumatoid': 51, 'arthritis': 52, 'psoriatic': 53, 'ankylosing': 54, 'spondylitis': 55,
                'axial': 56, 'spondyloarthritis': 57, 'juvenile': 58, 'idiopathic': 59, 'jia': 60,
                'crohn': 61, 'colitis': 62, 'ulcerative': 63, 'ibd': 64, 'psoriasis': 65,
                'plaque': 66, 'uveitis': 67, 'hidradenitis': 68, 'suppurativa': 69, 'hs': 70,
                // Rank 71-90: Other TNF inhibitors
                'enbrel': 71, 'etanercept': 72, 'remicade': 73, 'infliximab': 74, 'simponi': 75,
                'golimumab': 76, 'cimzia': 77, 'certolizumab': 78, 'pegol': 79, 'class': 80,
                'switching': 81, 'cycling': 82, 'failure': 83, 'inadequate': 84, 'response': 85,
                'primary': 86, 'secondary': 87, 'nonresponder': 88, 'loss': 89, 'efficacy': 90,
                // Rank 91-110: Safety and monitoring
                'infection': 91, 'serious': 92, 'risk': 93, 'tuberculosis': 94, 'tb': 95,
                'latent': 96, 'screening': 97, 'quantiferon': 98, 'ppd': 99, 'chest': 100,
                'xray': 101, 'hepatitis': 102, 'hbv': 103, 'reactivation': 104, 'lymphoma': 105,
                'malignancy': 106, 'demyelinating': 107, 'heart': 108, 'failure': 109, 'lupuslike': 110,
                // Rank 111-130: Side effects and reactions
                'site': 111, 'reaction': 112, 'redness': 113, 'swelling': 114, 'itching': 115,
                'bruising': 116, 'pain': 117, 'injection': 118, 'upper': 119, 'respiratory': 120,
                'uri': 121, 'sinusitis': 122, 'headache': 123, 'rash': 124, 'nausea': 125,
                'immunogenicity': 126, 'antidrug': 127, 'antibodies': 128, 'ada': 129, 'titer': 130,
                // Rank 131-150: Clinical context
                'methotrexate': 131, 'combination': 132, 'concomitant': 133, 'dmard': 134, 'synergy': 135,
                'remission': 136, 'low': 137, 'disease': 138, 'activity': 139, 'das28': 140,
                'acr': 141, 'response': 142, 'pasi': 143, 'bsa': 144, 'outcome': 145,
                'inflammation': 146, 'joint': 147, 'damage': 148, 'erosion': 149, 'progression': 150,
                // Rank 151-180: Healthcare context
                'prednisone': 151, 'steroid': 152, 'taper': 153, 'sparing': 154, 'infusion': 155,
                'autoimmune': 156, 'immune': 157, 'system': 158, 'modulation': 159, 'suppression': 160,
                'rheumatologist': 161, 'doctor': 162, 'specialist': 163, 'prescription': 164, 'pharmacy': 165,
                'prior': 166, 'authorization': 167, 'insurance': 168, 'coverage': 169, 'cost': 170,
                'clinic': 171, 'hospital': 172, 'appointment': 173, 'lupus': 174, 'diagnosis': 175,
                'rounds': 176, 'charting': 177, 'tired': 178, 'coffee': 179, 'pager': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'infusion': {
                'infusion': 1,
                // Rank 2-5: Specific infusion terms
                'iv': 2, 'intravenous': 3, 'drip': 4, 'piggyback': 5,
                // Rank 6-15: Equipment and setup
                'bag': 6, 'saline': 7, 'pump': 8, 'line': 9, 'tubing': 10,
                'catheter': 11, 'port': 12, 'picc': 13, 'access': 14, 'flush': 15,
                // Rank 16-30: Infusion center
                'center': 16, 'suite': 17, 'chair': 18, 'recliner': 19, 'bay': 20,
                'outpatient': 21, 'ambulatory': 22, 'facility': 23, 'schedule': 24, 'appointment': 25,
                'checkin': 26, 'vitals': 27, 'weight': 28, 'blood': 29, 'pressure': 30,
                // Rank 31-50: Administration
                'rate': 31, 'slow': 32, 'titrate': 33, 'escalate': 34, 'bolus': 35,
                'maintenance': 36, 'hour': 37, 'duration': 38, 'minutes': 39, 'time': 40,
                'premeds': 41, 'premedication': 42, 'benadryl': 43, 'diphenhydramine': 44, 'tylenol': 45,
                'acetaminophen': 46, 'solumedrol': 47, 'hydration': 48, 'fluids': 49, 'volume': 50,
                // Rank 51-70: Infused medications
                'remicade': 51, 'infliximab': 52, 'rituxan': 53, 'rituximab': 54, 'orencia': 55,
                'abatacept': 56, 'actemra': 57, 'tocilizumab': 58, 'benlysta': 59, 'belimumab': 60,
                'simponi': 61, 'aria': 62, 'golimumab': 63, 'entyvio': 64, 'vedolizumab': 65,
                'stelara': 66, 'ustekinumab': 67, 'tysabri': 68, 'natalizumab': 69, 'ocrevus': 70,
                // Rank 71-90: Reactions and monitoring
                'reaction': 71, 'infusionrelated': 72, 'allergic': 73, 'anaphylaxis': 74, 'hypersensitivity': 75,
                'flushing': 76, 'rash': 77, 'urticaria': 78, 'hives': 79, 'pruritus': 80,
                'dyspnea': 81, 'shortness': 82, 'breath': 83, 'wheezing': 84, 'chest': 85,
                'tightness': 86, 'hypotension': 87, 'fever': 88, 'chills': 89, 'rigors': 90,
                // Rank 91-110: Staff and care
                'nurse': 91, 'rn': 92, 'pharmacist': 93, 'infusion': 94, 'specialist': 95,
                'monitor': 96, 'observe': 97, 'watch': 98, 'assessment': 99, 'documentation': 100,
                'charting': 101, 'flow': 102, 'sheet': 103, 'vital': 104, 'signs': 105,
                'emergency': 106, 'epinephrine': 107, 'crash': 108, 'cart': 109, 'protocol': 110,
                // Rank 111-130: Clinical context
                'biologic': 111, 'medication': 112, 'treatment': 113, 'therapy': 114, 'maintenance': 115,
                'induction': 116, 'loading': 117, 'dose': 118, 'interval': 119, 'frequency': 120,
                'rheumatoid': 121, 'arthritis': 122, 'lupus': 123, 'vasculitis': 124, 'autoimmune': 125,
                'disease': 126, 'inflammatory': 127, 'bowel': 128, 'crohn': 129, 'colitis': 130,
                // Rank 131-150: Related terms
                'injection': 131, 'subcutaneous': 132, 'humira': 133, 'enbrel': 134, 'methotrexate': 135,
                'dmard': 136, 'prednisone': 137, 'steroid': 138, 'immunosuppression': 139, 'immune': 140,
                'joint': 141, 'inflammation': 142, 'pain': 143, 'swelling': 144, 'flare': 145,
                'remission': 146, 'response': 147, 'efficacy': 148, 'antibody': 149, 'antidrug': 150,
                // Rank 151-180: Healthcare setting
                'doctor': 151, 'rheumatologist': 152, 'gastroenterologist': 153, 'neurologist': 154, 'oncologist': 155,
                'clinic': 156, 'hospital': 157, 'healthcare': 158, 'insurance': 159, 'authorization': 160,
                'prior': 161, 'approval': 162, 'coverage': 163, 'cost': 164, 'copay': 165,
                'patient': 166, 'assistance': 167, 'program': 168, 'foundation': 169, 'support': 170,
                'rounds': 171, 'pager': 172, 'tired': 173, 'coffee': 174, 'break': 175,
                'bone': 176, 'cartilage': 177, 'tendon': 178, 'diagnosis': 179, 'biopsy': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'steroid': {
                'steroid': 1,
                // Rank 2-5: Direct synonyms
                'corticosteroid': 2, 'glucocorticoid': 3, 'cortisone': 4, 'cortico': 5,
                // Rank 6-15: Specific steroids
                'prednisone': 6, 'prednisolone': 7, 'methylprednisolone': 8, 'dexamethasone': 9, 'hydrocortisone': 10,
                'betamethasone': 11, 'triamcinolone': 12, 'budesonide': 13, 'fluticasone': 14, 'beclomethasone': 15,
                // Rank 16-30: Brand names and formulations
                'medrol': 16, 'solumedrol': 17, 'decadron': 18, 'deltasone': 19, 'kenalog': 20,
                'depomedrol': 21, 'celestone': 22, 'aristocort': 23, 'orapred': 24, 'pediapred': 25,
                'entocort': 26, 'uceris': 27, 'rayos': 28, 'dosepak': 29, 'taperpak': 30,
                // Rank 31-50: Pharmacology and mechanism
                'antiinflammatory': 31, 'immunosuppressive': 32, 'immunomodulator': 33, 'hormone': 34, 'synthetic': 35,
                'adrenal': 36, 'cortex': 37, 'cortisol': 38, 'hpa': 39, 'axis': 40,
                'receptor': 41, 'genomic': 42, 'nongenomic': 43, 'transcription': 44, 'cytokine': 45,
                'inhibition': 46, 'prostaglandin': 47, 'leukotriene': 48, 'phospholipase': 49, 'nfkb': 50,
                // Rank 51-70: Dosing and routes
                'dose': 51, 'taper': 52, 'wean': 53, 'burst': 54, 'pulse': 55,
                'high': 56, 'low': 57, 'maintenance': 58, 'milligram': 59, 'mg': 60,
                'oral': 61, 'intravenous': 62, 'iv': 63, 'intramuscular': 64, 'im': 65,
                'intraarticular': 66, 'injection': 67, 'topical': 68, 'inhaled': 69, 'nasal': 70,
                // Rank 71-90: Side effects (specific)
                'cushingoid': 71, 'cushing': 72, 'moon': 73, 'face': 74, 'buffalo': 75,
                'hump': 76, 'striae': 77, 'stretch': 78, 'marks': 79, 'central': 80,
                'obesity': 81, 'redistribution': 82, 'fat': 83, 'hyperglycemia': 84, 'diabetes': 85,
                'osteoporosis': 86, 'osteopenia': 87, 'avascular': 88, 'necrosis': 89, 'osteonecrosis': 90,
                // Rank 91-110: Side effects (general)
                'weight': 91, 'gain': 92, 'appetite': 93, 'increased': 94, 'edema': 95,
                'hypertension': 96, 'cataracts': 97, 'glaucoma': 98, 'thin': 99, 'skin': 100,
                'bruising': 101, 'acne': 102, 'hirsutism': 103, 'insomnia': 104, 'mood': 105,
                'swing': 106, 'anxiety': 107, 'depression': 108, 'psychosis': 109, 'mania': 110,
                // Rank 111-130: Clinical management
                'adrenal': 111, 'suppression': 112, 'insufficiency': 113, 'crisis': 114, 'withdrawal': 115,
                'stress': 116, 'dosing': 117, 'perioperative': 118, 'coverage': 119, 'sparing': 120,
                'agent': 121, 'infection': 122, 'risk': 123, 'prophylaxis': 124, 'pcp': 125,
                'bactrim': 126, 'calcium': 127, 'vitamin': 128, 'd': 129, 'bisphosphonate': 130,
                // Rank 131-150: Conditions treated
                'inflammation': 131, 'flare': 132, 'exacerbation': 133, 'acute': 134, 'chronic': 135,
                'lupus': 136, 'arthritis': 137, 'vasculitis': 138, 'myositis': 139, 'polymyalgia': 140,
                'asthma': 141, 'copd': 142, 'allergic': 143, 'dermatitis': 144, 'eczema': 145,
                'autoimmune': 146, 'transplant': 147, 'rejection': 148, 'gvhd': 149, 'itp': 150,
                // Rank 151-180: Healthcare context
                'treatment': 151, 'medication': 152, 'drug': 153, 'prescription': 154, 'pharmacy': 155,
                'methotrexate': 156, 'humira': 157, 'biologic': 158, 'dmard': 159, 'infusion': 160,
                'joint': 161, 'pain': 162, 'swelling': 163, 'stiffness': 164, 'fatigue': 165,
                'doctor': 166, 'rheumatologist': 167, 'clinic': 168, 'hospital': 169, 'rounds': 170,
                'bone': 171, 'cartilage': 172, 'tendon': 173, 'synovium': 174, 'diagnosis': 175,
                'charting': 176, 'tired': 177, 'coffee': 178, 'pager': 179, 'biopsy': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'antibody': {
                'antibody': 1,
                // Rank 2-5: Direct immunology terms
                'immunoglobulin': 2, 'ig': 3, 'igg': 4, 'igm': 5,
                // Rank 6-15: Antibody types and structure
                'iga': 6, 'ige': 7, 'igd': 8, 'subclass': 9, 'igg1': 10,
                'igg2': 11, 'igg3': 12, 'igg4': 13, 'heavy': 14, 'chain': 15,
                // Rank 16-30: Antibody biology
                'light': 16, 'kappa': 17, 'lambda': 18, 'fab': 19, 'fc': 20,
                'variable': 21, 'constant': 22, 'region': 23, 'epitope': 24, 'paratope': 25,
                'antigen': 26, 'binding': 27, 'affinity': 28, 'avidity': 29, 'specificity': 30,
                // Rank 31-50: Immune system cells
                'b': 31, 'cell': 32, 'plasma': 33, 'lymphocyte': 34, 'memory': 35,
                'naive': 36, 'activated': 37, 'differentiation': 38, 'maturation': 39, 'selection': 40,
                'clonal': 41, 'expansion': 42, 'somatic': 43, 'hypermutation': 44, 'class': 45,
                'switching': 46, 'isotype': 47, 'immune': 48, 'response': 49, 'humoral': 50,
                // Rank 51-70: Autoantibodies
                'autoantibody': 51, 'ana': 52, 'antinuclear': 53, 'dsdna': 54, 'double': 55,
                'stranded': 56, 'smith': 57, 'rnp': 58, 'ssa': 59, 'ro': 60,
                'ssb': 61, 'la': 62, 'scl70': 63, 'topoisomerase': 64, 'centromere': 65,
                'jo1': 66, 'mi2': 67, 'mda5': 68, 'srp': 69, 'pm': 70,
                // Rank 71-90: More autoantibodies
                'anca': 71, 'pr3': 72, 'mpo': 73, 'canca': 74, 'panca': 75,
                'rf': 76, 'rheumatoid': 77, 'factor': 78, 'ccp': 79, 'acpa': 80,
                'anti': 81, 'citrullinated': 82, 'peptide': 83, 'protein': 84, 'titer': 85,
                'positive': 86, 'negative': 87, 'equivocal': 88, 'borderline': 89, 'high': 90,
                // Rank 91-110: Associated diseases
                'lupus': 91, 'sle': 92, 'arthritis': 93, 'ra': 94, 'vasculitis': 95,
                'sjogren': 96, 'scleroderma': 97, 'myositis': 98, 'dermatomyositis': 99, 'polymyositis': 100,
                'mctd': 101, 'overlap': 102, 'syndrome': 103, 'autoimmune': 104, 'disease': 105,
                'disorder': 106, 'connective': 107, 'tissue': 108, 'inflammatory': 109, 'systemic': 110,
                // Rank 111-130: Lab testing
                'test': 111, 'blood': 112, 'serum': 113, 'lab': 114, 'laboratory': 115,
                'elisa': 116, 'immunofluorescence': 117, 'if': 118, 'pattern': 119, 'homogeneous': 120,
                'speckled': 121, 'nucleolar': 122, 'centromere': 123, 'cytoplasmic': 124, 'western': 125,
                'blot': 126, 'immunoblot': 127, 'multiplex': 128, 'panel': 129, 'reflex': 130,
                // Rank 131-150: Clinical context
                'diagnosis': 131, 'marker': 132, 'activity': 133, 'monitoring': 134, 'trend': 135,
                'rise': 136, 'fall': 137, 'correlation': 138, 'clinical': 139, 'significance': 140,
                'sensitivity': 141, 'specificity': 142, 'ppv': 143, 'npv': 144, 'criteria': 145,
                'classification': 146, 'diagnostic': 147, 'prognostic': 148, 'predictive': 149, 'value': 150,
                // Rank 151-180: Treatments and broader context
                'monoclonal': 151, 'biologic': 152, 'humira': 153, 'rituximab': 154, 'infusion': 155,
                'treatment': 156, 'therapy': 157, 'target': 158, 'targeted': 159, 'precision': 160,
                'inflammation': 161, 'joint': 162, 'prednisone': 163, 'methotrexate': 164, 'steroid': 165,
                'biopsy': 166, 'pathology': 167, 'histology': 168, 'specimen': 169, 'sample': 170,
                'doctor': 171, 'rheumatologist': 172, 'clinic': 173, 'hospital': 174, 'rounds': 175,
                'bone': 176, 'cartilage': 177, 'charting': 178, 'tired': 179, 'coffee': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'inflammation': {
                'inflammation': 1,
                // Rank 2-5: Direct related terms
                'inflammatory': 2, 'inflamed': 3, 'inflame': 4, 'phlogistic': 5,
                // Rank 6-15: Cardinal signs
                'rubor': 6, 'redness': 7, 'calor': 8, 'heat': 9, 'tumor': 10,
                'swelling': 11, 'dolor': 12, 'pain': 13, 'functio': 14, 'laesa': 15,
                // Rank 16-30: Types of inflammation
                'acute': 16, 'chronic': 17, 'subacute': 18, 'granulomatous': 19, 'fibrinous': 20,
                'purulent': 21, 'serous': 22, 'hemorrhagic': 23, 'necrotizing': 24, 'catarrhal': 25,
                'suppurative': 26, 'sterile': 27, 'infectious': 28, 'noninfectious': 29, 'systemic': 30,
                // Rank 31-50: Mediators and pathways
                'cytokine': 31, 'tnf': 32, 'alpha': 33, 'interleukin': 34, 'il1': 35,
                'il6': 36, 'il17': 37, 'il23': 38, 'interferon': 39, 'chemokine': 40,
                'prostaglandin': 41, 'leukotriene': 42, 'histamine': 43, 'bradykinin': 44, 'serotonin': 45,
                'complement': 46, 'c3': 47, 'c5a': 48, 'mediator': 49, 'cascade': 50,
                // Rank 51-70: Cellular response
                'immune': 51, 'response': 52, 'innate': 53, 'adaptive': 54, 'cell': 55,
                'neutrophil': 56, 'macrophage': 57, 'monocyte': 58, 'lymphocyte': 59, 'eosinophil': 60,
                'mast': 61, 'dendritic': 62, 'phagocytosis': 63, 'chemotaxis': 64, 'diapedesis': 65,
                'extravasation': 66, 'infiltrate': 67, 'exudate': 68, 'transudate': 69, 'edema': 70,
                // Rank 71-90: Clinical manifestations
                'swollen': 71, 'red': 72, 'warm': 73, 'hot': 74, 'tender': 75,
                'painful': 76, 'stiff': 77, 'limited': 78, 'motion': 79, 'function': 80,
                'loss': 81, 'fever': 82, 'malaise': 83, 'fatigue': 84, 'anorexia': 85,
                'weight': 86, 'loss': 87, 'night': 88, 'sweats': 89, 'constitutional': 90,
                // Rank 91-110: Lab markers
                'crp': 91, 'reactive': 92, 'protein': 93, 'esr': 94, 'sed': 95,
                'rate': 96, 'sedimentation': 97, 'erythrocyte': 98, 'marker': 99, 'elevated': 100,
                'ferritin': 101, 'fibrinogen': 102, 'albumin': 103, 'low': 104, 'anemia': 105,
                'thrombocytosis': 106, 'leukocytosis': 107, 'blood': 108, 'test': 109, 'lab': 110,
                // Rank 111-130: Diseases
                'autoimmune': 111, 'arthritis': 112, 'rheumatoid': 113, 'lupus': 114, 'vasculitis': 115,
                'ibd': 116, 'crohn': 117, 'colitis': 118, 'psoriasis': 119, 'gout': 120,
                'synovitis': 121, 'tendinitis': 122, 'bursitis': 123, 'myositis': 124, 'fasciitis': 125,
                'cellulitis': 126, 'arthralgia': 127, 'myalgia': 128, 'enthesitis': 129, 'dactylitis': 130,
                // Rank 131-150: Treatments
                'treatment': 131, 'anti': 132, 'antiinflammatory': 133, 'nsaid': 134, 'ibuprofen': 135,
                'naproxen': 136, 'celecoxib': 137, 'steroid': 138, 'prednisone': 139, 'corticosteroid': 140,
                'biologic': 141, 'dmard': 142, 'methotrexate': 143, 'humira': 144, 'tnfi': 145,
                'jak': 146, 'inhibitor': 147, 'infusion': 148, 'injection': 149, 'therapy': 150,
                // Rank 151-180: Anatomy and healthcare
                'joint': 151, 'synovium': 152, 'cartilage': 153, 'bone': 154, 'tendon': 155,
                'ligament': 156, 'muscle': 157, 'tissue': 158, 'organ': 159, 'vessel': 160,
                'diagnosis': 161, 'prognosis': 162, 'flare': 163, 'remission': 164, 'control': 165,
                'doctor': 166, 'rheumatologist': 167, 'clinic': 168, 'hospital': 169, 'rounds': 170,
                'antibody': 171, 'biopsy': 172, 'pathology': 173, 'histology': 174, 'specimen': 175,
                'charting': 176, 'tired': 177, 'coffee': 178, 'pager': 179, 'swollen': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'autoimmune': {
                'autoimmune': 1,
                // Rank 2-5: Core concepts
                'autoimmunity': 2, 'self': 3, 'reactive': 4, 'autoreactive': 5,
                // Rank 6-15: Immune system basics
                'immune': 6, 'system': 7, 'attack': 8, 'defense': 9, 'tolerance': 10,
                'breakdown': 11, 'loss': 12, 'dysregulation': 13, 'dysfunction': 14, 'aberrant': 15,
                // Rank 16-30: Cellular immunity
                'lymphocyte': 16, 't': 17, 'cell': 18, 'b': 19, 'helper': 20,
                'th1': 21, 'th2': 22, 'th17': 23, 'treg': 24, 'regulatory': 25,
                'cytotoxic': 26, 'cd4': 27, 'cd8': 28, 'natural': 29, 'killer': 30,
                // Rank 31-50: Antibodies and proteins
                'antibody': 31, 'autoantibody': 32, 'ana': 33, 'antinuclear': 34, 'dsdna': 35,
                'rf': 36, 'rheumatoid': 37, 'factor': 38, 'ccp': 39, 'anca': 40,
                'complement': 41, 'c3': 42, 'c4': 43, 'cytokine': 44, 'interleukin': 45,
                'tnf': 46, 'interferon': 47, 'immunoglobulin': 48, 'igg': 49, 'igm': 50,
                // Rank 51-70: Rheumatic diseases
                'lupus': 51, 'sle': 52, 'rheumatoid': 53, 'arthritis': 54, 'ra': 55,
                'sjogren': 56, 'sicca': 57, 'scleroderma': 58, 'systemic': 59, 'sclerosis': 60,
                'vasculitis': 61, 'anca': 62, 'associated': 63, 'myositis': 64, 'dermatomyositis': 65,
                'polymyositis': 66, 'mctd': 67, 'mixed': 68, 'connective': 69, 'tissue': 70,
                // Rank 71-90: Other autoimmune diseases
                'thyroid': 71, 'hashimoto': 72, 'graves': 73, 'thyroiditis': 74, 'ms': 75,
                'multiple': 76, 'type1': 77, 'diabetes': 78, 't1dm': 79, 'celiac': 80,
                'crohn': 81, 'colitis': 82, 'ulcerative': 83, 'ibd': 84, 'psoriasis': 85,
                'psoriatic': 86, 'vitiligo': 87, 'alopecia': 88, 'areata': 89, 'pemphigus': 90,
                // Rank 91-110: More conditions
                'pemphigoid': 91, 'myasthenia': 92, 'gravis': 93, 'guillain': 94, 'barre': 95,
                'addison': 96, 'pernicious': 97, 'anemia': 98, 'itp': 99, 'aiha': 100,
                'antiphospholipid': 101, 'aps': 102, 'syndrome': 103, 'sarcoidosis': 104, 'behcet': 105,
                'adult': 106, 'still': 107, 'aosd': 108, 'disease': 109, 'disorder': 110,
                // Rank 111-130: Clinical features
                'chronic': 111, 'relapsing': 112, 'remitting': 113, 'flare': 114, 'exacerbation': 115,
                'remission': 116, 'activity': 117, 'damage': 118, 'organ': 119, 'involvement': 120,
                'inflammation': 121, 'pain': 122, 'swelling': 123, 'fatigue': 124, 'fever': 125,
                'rash': 126, 'photosensitivity': 127, 'arthralgia': 128, 'myalgia': 129, 'serositis': 130,
                // Rank 131-150: Treatments
                'treatment': 131, 'immunosuppressant': 132, 'immunomodulator': 133, 'prednisone': 134, 'steroid': 135,
                'corticosteroid': 136, 'methotrexate': 137, 'azathioprine': 138, 'mycophenolate': 139, 'cyclophosphamide': 140,
                'biologic': 141, 'humira': 142, 'rituximab': 143, 'belimumab': 144, 'tocilizumab': 145,
                'jak': 146, 'inhibitor': 147, 'tofacitinib': 148, 'infusion': 149, 'injection': 150,
                // Rank 151-180: Healthcare context
                'diagnosis': 151, 'criteria': 152, 'classification': 153, 'blood': 154, 'test': 155,
                'lab': 156, 'marker': 157, 'biopsy': 158, 'pathology': 159, 'histology': 160,
                'joint': 161, 'bone': 162, 'cartilage': 163, 'tendon': 164, 'synovium': 165,
                'doctor': 166, 'rheumatologist': 167, 'specialist': 168, 'clinic': 169, 'hospital': 170,
                'rounds': 171, 'charting': 172, 'tired': 173, 'coffee': 174, 'pager': 175,
                'genetic': 176, 'hla': 177, 'environmental': 178, 'trigger': 179, 'predisposition': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'biopsy': {
                'biopsy': 1,
                // Rank 2-5: Core pathology terms
                'tissue': 2, 'sample': 3, 'specimen': 4, 'histology': 5,
                // Rank 6-15: Pathology basics
                'pathology': 6, 'histopathology': 7, 'microscope': 8, 'microscopy': 9, 'examination': 10,
                'slide': 11, 'section': 12, 'frozen': 13, 'permanent': 14, 'formalin': 15,
                // Rank 16-30: Biopsy types
                'needle': 16, 'core': 17, 'fine': 18, 'aspiration': 19, 'fna': 20,
                'punch': 21, 'shave': 22, 'excisional': 23, 'incisional': 24, 'open': 25,
                'surgical': 26, 'endoscopic': 27, 'laparoscopic': 28, 'stereotactic': 29, 'guided': 30,
                // Rank 31-50: Target organs/tissues
                'skin': 31, 'dermal': 32, 'kidney': 33, 'renal': 34, 'liver': 35,
                'hepatic': 36, 'lung': 37, 'pulmonary': 38, 'muscle': 39, 'nerve': 40,
                'temporal': 41, 'artery': 42, 'arterial': 43, 'salivary': 44, 'gland': 45,
                'lip': 46, 'minor': 47, 'bone': 48, 'marrow': 49, 'trephine': 50,
                // Rank 51-70: More tissues
                'lymph': 51, 'node': 52, 'sentinel': 53, 'synovial': 54, 'synovium': 55,
                'joint': 56, 'pleural': 57, 'pericardial': 58, 'peritoneal': 59, 'meningeal': 60,
                'brain': 61, 'spinal': 62, 'cord': 63, 'prostate': 64, 'breast': 65,
                'thyroid': 66, 'pancreas': 67, 'intestinal': 68, 'colonic': 69, 'gastric': 70,
                // Rank 71-90: Conditions requiring biopsy
                'vasculitis': 71, 'gca': 72, 'giant': 73, 'cell': 74, 'arteritis': 75,
                'lupus': 76, 'nephritis': 77, 'sjogren': 78, 'sarcoidosis': 79, 'amyloidosis': 80,
                'cancer': 81, 'malignancy': 82, 'tumor': 83, 'lymphoma': 84, 'leukemia': 85,
                'myositis': 86, 'dermatomyositis': 87, 'polymyositis': 88, 'neuropathy': 89, 'cirrhosis': 90,
                // Rank 91-110: Findings
                'inflammation': 91, 'inflammatory': 92, 'infiltrate': 93, 'lymphocytic': 94, 'neutrophilic': 95,
                'granuloma': 96, 'granulomatous': 97, 'necrosis': 98, 'fibrinoid': 99, 'caseous': 100,
                'fibrosis': 101, 'scarring': 102, 'atrophy': 103, 'hypertrophy': 104, 'hyperplasia': 105,
                'dysplasia': 106, 'metaplasia': 107, 'atypia': 108, 'malignant': 109, 'benign': 110,
                // Rank 111-130: Staining and techniques
                'stain': 111, 'hematoxylin': 112, 'eosin': 113, 'he': 114, 'special': 115,
                'immunohistochemistry': 116, 'ihc': 117, 'immunofluorescence': 118, 'if': 119, 'direct': 120,
                'indirect': 121, 'electron': 122, 'em': 123, 'congo': 124, 'red': 125,
                'trichrome': 126, 'pas': 127, 'silver': 128, 'oil': 129, 'fat': 130,
                // Rank 131-150: Clinical process
                'procedure': 131, 'diagnosis': 132, 'diagnostic': 133, 'definitive': 134, 'confirm': 135,
                'pathologist': 136, 'report': 137, 'results': 138, 'findings': 139, 'interpretation': 140,
                'abnormal': 141, 'normal': 142, 'consistent': 143, 'compatible': 144, 'suggestive': 145,
                'staging': 146, 'grading': 147, 'classification': 148, 'prognosis': 149, 'treatment': 150,
                // Rank 151-180: Healthcare context
                'doctor': 151, 'specialist': 152, 'rheumatologist': 153, 'nephrologist': 154, 'dermatologist': 155,
                'surgeon': 156, 'interventional': 157, 'radiologist': 158, 'consent': 159, 'informed': 160,
                'complication': 161, 'bleeding': 162, 'infection': 163, 'pain': 164, 'local': 165,
                'anesthesia': 166, 'sedation': 167, 'ultrasound': 168, 'ct': 169, 'mri': 170,
                'arthritis': 171, 'autoimmune': 172, 'antibody': 173, 'prednisone': 174, 'methotrexate': 175,
                'clinic': 176, 'hospital': 177, 'rounds': 178, 'charting': 179, 'tired': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'clinic': {
                'clinic': 1,
                // Rank 2-5: Direct synonyms
                'office': 2, 'practice': 3, 'outpatient': 4, 'ambulatory': 5,
                // Rank 6-15: Appointments
                'appointment': 6, 'visit': 7, 'scheduled': 8, 'booking': 9, 'slot': 10,
                'followup': 11, 'follow': 12, 'up': 13, 'new': 14, 'established': 15,
                // Rank 16-30: Staff
                'patient': 16, 'doctor': 17, 'physician': 18, 'provider': 19, 'np': 20,
                'nurse': 21, 'practitioner': 22, 'pa': 23, 'assistant': 24, 'ma': 25,
                'medical': 26, 'staff': 27, 'receptionist': 28, 'scheduler': 29, 'coordinator': 30,
                // Rank 31-50: Clinic operations
                'waiting': 31, 'room': 32, 'lobby': 33, 'checkin': 34, 'checkout': 35,
                'rooming': 36, 'vitals': 37, 'weight': 38, 'blood': 39, 'pressure': 40,
                'exam': 41, 'examination': 42, 'consultation': 43, 'encounter': 44, 'session': 45,
                'morning': 46, 'afternoon': 47, 'schedule': 48, 'calendar': 49, 'template': 50,
                // Rank 51-70: Specialty context
                'rheumatology': 51, 'rheumatologist': 52, 'specialty': 53, 'subspecialty': 54, 'internal': 55,
                'medicine': 56, 'referral': 57, 'primary': 58, 'care': 59, 'pcp': 60,
                'consult': 61, 'consultation': 62, 'second': 63, 'opinion': 64, 'multidisciplinary': 65,
                'comprehensive': 66, 'academic': 67, 'private': 68, 'community': 69, 'health': 70,
                // Rank 71-90: Clinical activities
                'treatment': 71, 'diagnosis': 72, 'evaluation': 73, 'assessment': 74, 'management': 75,
                'history': 76, 'physical': 77, 'review': 78, 'systems': 79, 'ros': 80,
                'lab': 81, 'test': 82, 'imaging': 83, 'xray': 84, 'ultrasound': 85,
                'injection': 86, 'aspiration': 87, 'infusion': 88, 'procedure': 89, 'minor': 90,
                // Rank 91-110: Documentation and admin
                'prescription': 91, 'rx': 92, 'medication': 93, 'refill': 94, 'prior': 95,
                'authorization': 96, 'insurance': 97, 'copay': 98, 'billing': 99, 'coding': 100,
                'charting': 101, 'note': 102, 'documentation': 103, 'emr': 104, 'ehr': 105,
                'epic': 106, 'cerner': 107, 'template': 108, 'smartphrase': 109, 'dictation': 110,
                // Rank 111-130: Patient education
                'education': 111, 'counseling': 112, 'instructions': 113, 'handout': 114, 'pamphlet': 115,
                'discharge': 116, 'aftervisit': 117, 'summary': 118, 'avs': 119, 'portal': 120,
                'message': 121, 'mychart': 122, 'communication': 123, 'telephone': 124, 'phone': 125,
                'call': 126, 'triage': 127, 'urgent': 128, 'same': 129, 'day': 130,
                // Rank 131-150: Related healthcare
                'hospital': 131, 'inpatient': 132, 'er': 133, 'emergency': 134, 'urgent': 135,
                'care': 136, 'telemedicine': 137, 'telehealth': 138, 'virtual': 139, 'video': 140,
                'rounds': 141, 'pager': 142, 'oncall': 143, 'coverage': 144, 'backup': 145,
                'partner': 146, 'colleague': 147, 'group': 148, 'solo': 149, 'employed': 150,
                // Rank 151-180: Disease and lifestyle context
                'lupus': 151, 'arthritis': 152, 'joint': 153, 'inflammation': 154, 'autoimmune': 155,
                'prednisone': 156, 'methotrexate': 157, 'humira': 158, 'steroid': 159, 'dmard': 160,
                'biologic': 161, 'infusion': 162, 'injection': 163, 'therapy': 164, 'treatment': 165,
                'tired': 166, 'exhausted': 167, 'busy': 168, 'hectic': 169, 'coffee': 170,
                'break': 171, 'lunch': 172, 'bone': 173, 'cartilage': 174, 'tendon': 175,
                'diagnosis': 176, 'biopsy': 177, 'antibody': 178, 'test': 179, 'workup': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'computer': 500, 'house': 1500
            },
            'rounds': {
                'rounds': 1,
                // Rank 2-5: Hospital context
                'rounding': 2, 'ward': 3, 'hospital': 4, 'inpatient': 5,
                // Rank 6-15: Team members
                'team': 6, 'attending': 7, 'fellow': 8, 'resident': 9, 'intern': 10,
                'student': 11, 'medical': 12, 'nursing': 13, 'pharmacist': 14, 'multidisciplinary': 15,
                // Rank 16-30: Types of rounds
                'morning': 16, 'daily': 17, 'bedside': 18, 'walking': 19, 'sit': 20,
                'down': 21, 'teaching': 22, 'grand': 23, 'morbidity': 24, 'mortality': 25,
                'case': 26, 'conference': 27, 'table': 28, 'card': 29, 'flipping': 30,
                // Rank 31-50: Rounds activities
                'presentation': 31, 'present': 32, 'discussion': 33, 'assessment': 34, 'plan': 35,
                'sbar': 36, 'signout': 37, 'handoff': 38, 'handover': 39, 'ipass': 40,
                'overnight': 41, 'events': 42, 'updates': 43, 'changes': 44, 'status': 45,
                'stable': 46, 'improving': 47, 'worsening': 48, 'critical': 49, 'guarded': 50,
                // Rank 51-70: Patient care
                'patient': 51, 'room': 52, 'bed': 53, 'visit': 54, 'examine': 55,
                'examination': 56, 'history': 57, 'physical': 58, 'hpe': 59, 'review': 60,
                'labs': 61, 'laboratory': 62, 'imaging': 63, 'vitals': 64, 'intake': 65,
                'output': 66, 'ios': 67, 'weight': 68, 'temperature': 69, 'fever': 70,
                // Rank 71-90: Consult service
                'consult': 71, 'consultation': 72, 'rheumatology': 73, 'service': 74, 'primary': 75,
                'team': 76, 'comanagement': 77, 'recommendation': 78, 'recs': 79, 'note': 80,
                'documentation': 81, 'charting': 82, 'orders': 83, 'medication': 84, 'dose': 85,
                'frequency': 86, 'route': 87, 'iv': 88, 'po': 89, 'prn': 90,
                // Rank 91-110: Hospital workflow
                'admission': 91, 'admit': 92, 'discharge': 93, 'dc': 94, 'transfer': 95,
                'icu': 96, 'stepdown': 97, 'floor': 98, 'unit': 99, 'telemetry': 100,
                'treatment': 101, 'diagnosis': 102, 'differential': 103, 'workup': 104, 'prognosis': 105,
                'goals': 106, 'care': 107, 'code': 108, 'status': 109, 'dnr': 110,
                // Rank 111-130: Schedule and call
                'clinic': 111, 'outpatient': 112, 'pager': 113, 'beeper': 114, 'call': 115,
                'oncall': 116, 'night': 117, 'shift': 118, 'schedule': 119, 'coverage': 120,
                'backup': 121, 'cross': 122, 'cover': 123, 'jeopardy': 124, 'swap': 125,
                'post': 126, 'precall': 127, 'postcall': 128, 'golden': 129, 'weekend': 130,
                // Rank 131-150: Work-life aspects
                'early': 131, 'late': 132, 'long': 133, 'hours': 134, 'duty': 135,
                'hour': 136, 'restrictions': 137, 'acgme': 138, 'wellness': 139, 'burnout': 140,
                'tired': 141, 'exhausted': 142, 'sleep': 143, 'deprived': 144, 'coffee': 145,
                'caffeine': 146, 'break': 147, 'lunch': 148, 'bathroom': 149, 'water': 150,
                // Rank 151-180: Disease and treatment context
                'lupus': 151, 'arthritis': 152, 'vasculitis': 153, 'inflammation': 154, 'autoimmune': 155,
                'flare': 156, 'exacerbation': 157, 'acute': 158, 'chronic': 159, 'severe': 160,
                'prednisone': 161, 'steroid': 162, 'pulse': 163, 'solumedrol': 164, 'methotrexate': 165,
                'infusion': 166, 'rituximab': 167, 'cyclophosphamide': 168, 'plasmapheresis': 169, 'ivig': 170,
                'joint': 171, 'bone': 172, 'cartilage': 173, 'tendon': 174, 'synovium': 175,
                'diagnosis': 176, 'biopsy': 177, 'antibody': 178, 'crp': 179, 'esr': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 800, 'computer': 500, 'house': 1500
            },
            'pager': {
                'pager': 1,
                // Rank 2-5: Pager actions
                'beep': 2, 'page': 3, 'beeper': 4, 'buzz': 5,
                // Rank 6-15: Communication terms
                'call': 6, 'callback': 7, 'number': 8, 'extension': 9, 'dial': 10,
                'return': 11, 'response': 12, 'urgent': 13, 'stat': 14, 'asap': 15,
                // Rank 16-30: Emergency context
                'emergency': 16, 'code': 17, 'blue': 18, 'rapid': 19, 'response': 20,
                'notification': 21, 'alert': 22, 'message': 23, 'text': 24, 'alphanumeric': 25,
                'numeric': 26, 'display': 27, 'screen': 28, 'vibrate': 29, 'silent': 30,
                // Rank 31-50: Hospital staff
                'hospital': 31, 'doctor': 32, 'physician': 33, 'resident': 34, 'intern': 35,
                'fellow': 36, 'attending': 37, 'nurse': 38, 'rn': 39, 'charge': 40,
                'operator': 41, 'switchboard': 42, 'exchange': 43, 'floor': 44, 'ward': 45,
                'unit': 46, 'icu': 47, 'er': 48, 'emergency': 49, 'department': 50,
                // Rank 51-70: Clinical reasons for pages
                'consult': 51, 'consultation': 52, 'new': 53, 'admission': 54, 'admit': 55,
                'patient': 56, 'question': 57, 'clarification': 58, 'order': 59, 'verbal': 60,
                'medication': 61, 'dose': 62, 'change': 63, 'discontinue': 64, 'hold': 65,
                'lab': 66, 'result': 67, 'critical': 68, 'value': 69, 'abnormal': 70,
                // Rank 71-90: Physical device
                'device': 71, 'electronic': 72, 'communication': 73, 'wireless': 74, 'battery': 75,
                'low': 76, 'dead': 77, 'charge': 78, 'charger': 79, 'clip': 80,
                'belt': 81, 'holster': 82, 'pocket': 83, 'scrubs': 84, 'coat': 85,
                'white': 86, 'badge': 87, 'id': 88, 'lanyard': 89, 'carry': 90,
                // Rank 91-110: Call schedule
                'oncall': 91, 'on': 92, 'call': 93, 'night': 94, 'overnight': 95,
                'shift': 96, 'coverage': 97, 'backup': 98, 'cross': 99, 'cover': 100,
                'schedule': 101, 'rotation': 102, 'service': 103, 'duty': 104, 'jeopardy': 105,
                'swap': 106, 'trade': 107, 'weekend': 108, 'holiday': 109, 'home': 110,
                // Rank 111-130: Work-life impact
                'rounds': 111, 'clinic': 112, 'interrupt': 113, 'interruption': 114, 'constant': 115,
                'nonstop': 116, 'busy': 117, 'volume': 118, 'high': 119, 'low': 120,
                'charting': 121, 'note': 122, 'documentation': 123, 'pause': 124, 'stop': 125,
                'tired': 126, 'exhausted': 127, 'sleep': 128, 'rest': 129, 'break': 130,
                // Rank 131-150: Lifestyle context
                'coffee': 131, 'caffeine': 132, 'awake': 133, 'alert': 134, 'fatigue': 135,
                'burnout': 136, 'stress': 137, 'anxiety': 138, 'dread': 139, 'anticipation': 140,
                'dinner': 141, 'lunch': 142, 'meal': 143, 'bathroom': 144, 'shower': 145,
                'family': 146, 'personal': 147, 'time': 148, 'life': 149, 'balance': 150,
                // Rank 151-180: Medical context
                'diagnosis': 151, 'treatment': 152, 'plan': 153, 'recommendation': 154, 'decision': 155,
                'lupus': 156, 'arthritis': 157, 'vasculitis': 158, 'flare': 159, 'acute': 160,
                'joint': 161, 'inflammation': 162, 'pain': 163, 'swelling': 164, 'fever': 165,
                'prednisone': 166, 'steroid': 167, 'pulse': 168, 'dose': 169, 'infusion': 170,
                'methotrexate': 171, 'biologic': 172, 'medication': 173, 'prescription': 174, 'order': 175,
                'bone': 176, 'cartilage': 177, 'tendon': 178, 'biopsy': 179, 'antibody': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 120, 'computer': 400, 'house': 1500
            },
            'charting': {
                'charting': 1,
                // Rank 2-5: Direct synonyms
                'documentation': 2, 'documenting': 3, 'note': 4, 'notes': 5,
                // Rank 6-15: EMR systems
                'emr': 6, 'ehr': 7, 'electronic': 8, 'medical': 9, 'record': 10,
                'epic': 11, 'cerner': 12, 'meditech': 13, 'allscripts': 14, 'athena': 15,
                // Rank 16-30: Note types
                'progress': 16, 'admission': 17, 'discharge': 18, 'transfer': 19, 'consult': 20,
                'hp': 21, 'procedure': 22, 'operative': 23, 'clinic': 24, 'office': 25,
                'telephone': 26, 'message': 27, 'addendum': 28, 'amendment': 29, 'late': 30,
                // Rank 31-50: SOAP format
                'soap': 31, 'subjective': 32, 'objective': 33, 'assessment': 34, 'plan': 35,
                'hpi': 36, 'history': 37, 'present': 38, 'illness': 39, 'chief': 40,
                'complaint': 41, 'ros': 42, 'review': 43, 'systems': 44, 'pmh': 45,
                'past': 46, 'surgical': 47, 'psh': 48, 'family': 49, 'social': 50,
                // Rank 51-70: Physical exam documentation
                'physical': 51, 'exam': 52, 'examination': 53, 'pe': 54, 'vitals': 55,
                'general': 56, 'appearance': 57, 'heent': 58, 'cardiac': 59, 'pulmonary': 60,
                'abdominal': 61, 'musculoskeletal': 62, 'msk': 63, 'neurological': 64, 'skin': 65,
                'extremities': 66, 'lymphatic': 67, 'psychiatric': 68, 'mental': 69, 'status': 70,
                // Rank 71-90: Clinical content
                'labs': 71, 'laboratory': 72, 'imaging': 73, 'radiology': 74, 'results': 75,
                'diagnosis': 76, 'differential': 77, 'ddx': 78, 'icd': 79, 'code': 80,
                'treatment': 81, 'medication': 82, 'prescription': 83, 'rx': 84, 'order': 85,
                'referral': 86, 'followup': 87, 'follow': 88, 'up': 89, 'return': 90,
                // Rank 91-110: Documentation tools
                'template': 91, 'smartphrase': 92, 'dotphrase': 93, 'macro': 94, 'autopopulate': 95,
                'dictation': 96, 'dragon': 97, 'voice': 98, 'recognition': 99, 'transcription': 100,
                'scribe': 101, 'typing': 102, 'keyboard': 103, 'computer': 104, 'screen': 105,
                'click': 106, 'dropdown': 107, 'checkbox': 108, 'freetext': 109, 'narrative': 110,
                // Rank 111-130: Workflow and compliance
                'patient': 111, 'encounter': 112, 'visit': 113, 'billing': 114, 'coding': 115,
                'cpt': 116, 'icd10': 117, 'mdm': 118, 'decision': 119, 'making': 120,
                'complexity': 121, 'level': 122, 'compliance': 123, 'audit': 124, 'quality': 125,
                'attestation': 126, 'cosign': 127, 'signature': 128, 'authenticate': 129, 'finalize': 130,
                // Rank 131-150: Work burden
                'hospital': 131, 'inpatient': 132, 'outpatient': 133, 'summary': 134, 'letter': 135,
                'rounds': 136, 'pager': 137, 'interrupt': 138, 'behind': 139, 'backlog': 140,
                'inbox': 141, 'results': 142, 'review': 143, 'pajama': 144, 'time': 145,
                'hours': 146, 'overtime': 147, 'late': 148, 'night': 149, 'home': 150,
                // Rank 151-180: Broader context
                'tired': 151, 'exhausted': 152, 'burnout': 153, 'fatigue': 154, 'coffee': 155,
                'caffeine': 156, 'break': 157, 'lunch': 158, 'work': 159, 'life': 160,
                'balance': 161, 'efficiency': 162, 'productivity': 163, 'throughput': 164, 'rvu': 165,
                'doctor': 166, 'physician': 167, 'nurse': 168, 'provider': 169, 'staff': 170,
                'lupus': 171, 'arthritis': 172, 'joint': 173, 'inflammation': 174, 'autoimmune': 175,
                'prednisone': 176, 'methotrexate': 177, 'infusion': 178, 'steroid': 179, 'bone': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 500, 'house': 1500
            },
            'diagnosis': {
                'diagnosis': 1,
                // Rank 2-5: Direct related terms
                'diagnose': 2, 'diagnostic': 3, 'dx': 4, 'diagnostics': 5,
                // Rank 6-15: Clinical reasoning
                'workup': 6, 'evaluation': 7, 'assessment': 8, 'clinical': 9, 'impression': 10,
                'differential': 11, 'ddx': 12, 'consideration': 13, 'possibilities': 14, 'likely': 15,
                // Rank 16-30: Diagnostic process
                'rule': 16, 'out': 17, 'confirm': 18, 'exclude': 19, 'establish': 20,
                'definitive': 21, 'presumptive': 22, 'provisional': 23, 'working': 24, 'final': 25,
                'early': 26, 'delayed': 27, 'missed': 28, 'uncertain': 29, 'unclear': 30,
                // Rank 31-50: Medical terminology
                'disease': 31, 'condition': 32, 'disorder': 33, 'syndrome': 34, 'illness': 35,
                'pathology': 36, 'etiology': 37, 'cause': 38, 'underlying': 39, 'primary': 40,
                'secondary': 41, 'acute': 42, 'chronic': 43, 'progressive': 44, 'relapsing': 45,
                'remitting': 46, 'benign': 47, 'malignant': 48, 'systemic': 49, 'localized': 50,
                // Rank 51-70: Clinical findings
                'symptoms': 51, 'signs': 52, 'presentation': 53, 'manifestation': 54, 'complaint': 55,
                'chief': 56, 'history': 57, 'hpi': 58, 'present': 59, 'illness': 60,
                'physical': 61, 'exam': 62, 'examination': 63, 'finding': 64, 'abnormality': 65,
                'objective': 66, 'subjective': 67, 'onset': 68, 'duration': 69, 'severity': 70,
                // Rank 71-90: Diagnostic criteria
                'criteria': 71, 'classification': 72, 'acr': 73, 'eular': 74, 'slicc': 75,
                'caspar': 76, 'asas': 77, 'sensitivity': 78, 'specificity': 79, 'accuracy': 80,
                'positive': 81, 'negative': 82, 'predictive': 83, 'value': 84, 'likelihood': 85,
                'ratio': 86, 'pretest': 87, 'posttest': 88, 'probability': 89, 'bayesian': 90,
                // Rank 91-110: Diagnostic tests
                'lab': 91, 'laboratory': 92, 'test': 93, 'blood': 94, 'serum': 95,
                'urine': 96, 'csf': 97, 'imaging': 98, 'xray': 99, 'radiograph': 100,
                'mri': 101, 'ct': 102, 'ultrasound': 103, 'pet': 104, 'scan': 105,
                'biopsy': 106, 'pathology': 107, 'histology': 108, 'culture': 109, 'genetic': 110,
                // Rank 111-130: Specific markers
                'ana': 111, 'rf': 112, 'ccp': 113, 'anca': 114, 'dsdna': 115,
                'crp': 116, 'esr': 117, 'cbc': 118, 'cmp': 119, 'lft': 120,
                'antibody': 121, 'autoantibody': 122, 'titer': 123, 'level': 124, 'marker': 125,
                'biomarker': 126, 'inflammatory': 127, 'panel': 128, 'profile': 129, 'results': 130,
                // Rank 131-150: Clinical management
                'findings': 131, 'interpretation': 132, 'correlation': 133, 'treatment': 134, 'plan': 135,
                'prognosis': 136, 'outcome': 137, 'management': 138, 'therapy': 139, 'intervention': 140,
                'referral': 141, 'consultation': 142, 'second': 143, 'opinion': 144, 'specialist': 145,
                'rheumatologist': 146, 'patient': 147, 'doctor': 148, 'physician': 149, 'clinician': 150,
                // Rank 151-180: Disease and healthcare context
                'lupus': 151, 'arthritis': 152, 'gout': 153, 'vasculitis': 154, 'scleroderma': 155,
                'autoimmune': 156, 'inflammation': 157, 'joint': 158, 'pain': 159, 'swelling': 160,
                'stiffness': 161, 'fatigue': 162, 'fever': 163, 'rash': 164, 'weakness': 165,
                'prednisone': 166, 'methotrexate': 167, 'humira': 168, 'steroid': 169, 'infusion': 170,
                'clinic': 171, 'hospital': 172, 'rounds': 173, 'charting': 174, 'documentation': 175,
                'bone': 176, 'cartilage': 177, 'tendon': 178, 'tired': 179, 'coffee': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 800, 'computer': 600, 'house': 1500
            },
            'coffee': {
                'coffee': 1,
                // Rank 2-5: Coffee chemistry
                'caffeine': 2, 'caffeinated': 3, 'decaf': 4, 'decaffeinated': 5,
                // Rank 6-15: Espresso drinks
                'espresso': 6, 'latte': 7, 'cappuccino': 8, 'americano': 9, 'macchiato': 10,
                'mocha': 11, 'cortado': 12, 'ristretto': 13, 'lungo': 14, 'flat': 15,
                // Rank 16-30: Brewing methods
                'brew': 16, 'drip': 17, 'pour': 18, 'over': 19, 'french': 20,
                'press': 21, 'aeropress': 22, 'chemex': 23, 'cold': 24, 'brew': 25,
                'instant': 26, 'keurig': 27, 'pod': 28, 'nespresso': 29, 'percolator': 30,
                // Rank 31-50: Coffee materials
                'bean': 31, 'beans': 32, 'roast': 33, 'roasted': 34, 'ground': 35,
                'arabica': 36, 'robusta': 37, 'blend': 38, 'single': 39, 'origin': 40,
                'dark': 41, 'medium': 42, 'light': 43, 'freshly': 44, 'grinder': 45,
                'filter': 46, 'water': 47, 'temperature': 48, 'extraction': 49, 'crema': 50,
                // Rank 51-70: Serving and consumption
                'cup': 51, 'mug': 52, 'thermos': 53, 'tumbler': 54, 'lid': 55,
                'sleeve': 56, 'straw': 57, 'hot': 58, 'iced': 59, 'warm': 60,
                'drink': 61, 'sip': 62, 'beverage': 63, 'morning': 64, 'afternoon': 65,
                'refill': 66, 'top': 67, 'off': 68, 'cream': 69, 'sugar': 70,
                // Rank 71-90: Effects and energy
                'milk': 71, 'oat': 72, 'almond': 73, 'soy': 74, 'foam': 75,
                'wake': 76, 'up': 77, 'energy': 78, 'boost': 79, 'alert': 80,
                'awake': 81, 'stimulant': 82, 'jolt': 83, 'buzz': 84, 'kick': 85,
                'crash': 86, 'withdrawal': 87, 'headache': 88, 'dependence': 89, 'addiction': 90,
                // Rank 91-110: Fatigue context
                'tired': 91, 'fatigue': 92, 'exhausted': 93, 'sleepy': 94, 'drowsy': 95,
                'groggy': 96, 'sluggish': 97, 'lethargic': 98, 'drained': 99, 'weary': 100,
                'yawn': 101, 'eyes': 102, 'heavy': 103, 'eyelids': 104, 'focus': 105,
                'concentrate': 106, 'attention': 107, 'productivity': 108, 'performance': 109, 'function': 110,
                // Rank 111-130: Healthcare setting
                'break': 111, 'room': 112, 'lounge': 113, 'cafeteria': 114, 'vending': 115,
                'machine': 116, 'starbucks': 117, 'shop': 118, 'cart': 119, 'kiosk': 120,
                'hospital': 121, 'clinic': 122, 'doctor': 123, 'nurse': 124, 'resident': 125,
                'intern': 126, 'fellow': 127, 'attending': 128, 'staff': 129, 'provider': 130,
                // Rank 131-150: Work context
                'rounds': 131, 'shift': 132, 'night': 133, 'overnight': 134, 'oncall': 135,
                'pager': 136, 'call': 137, 'work': 138, 'long': 139, 'hours': 140,
                'charting': 141, 'documentation': 142, 'notes': 143, 'computer': 144, 'screen': 145,
                'desk': 146, 'office': 147, 'workstation': 148, 'meeting': 149, 'conference': 150,
                // Rank 151-180: Food and lifestyle
                'tea': 151, 'green': 152, 'black': 153, 'herbal': 154, 'soda': 155,
                'energy': 156, 'drink': 157, 'redbull': 158, 'monster': 159, 'snack': 160,
                'food': 161, 'lunch': 162, 'breakfast': 163, 'dinner': 164, 'meal': 165,
                'eat': 166, 'hungry': 167, 'appetite': 168, 'stomach': 169, 'empty': 170,
                'lupus': 171, 'arthritis': 172, 'joint': 173, 'inflammation': 174, 'autoimmune': 175,
                'prednisone': 176, 'steroid': 177, 'insomnia': 178, 'side': 179, 'effect': 180,
                // Rank 500+: Unrelated
                'car': 800, 'phone': 700, 'house': 900
            },
            'tired': {
                'tired': 1,
                // Rank 2-5: Direct synonyms
                'fatigued': 2, 'exhausted': 3, 'weary': 4, 'drained': 5,
                // Rank 6-15: States of tiredness
                'sleepy': 6, 'drowsy': 7, 'groggy': 8, 'sluggish': 9, 'lethargic': 10,
                'worn': 11, 'out': 12, 'spent': 13, 'depleted': 14, 'enervated': 15,
                // Rank 16-30: Work exhaustion
                'burnt': 16, 'burnout': 17, 'burned': 18, 'overworked': 19, 'overwhelmed': 20,
                'stressed': 21, 'stress': 22, 'pressure': 23, 'demanding': 24, 'taxing': 25,
                'grueling': 26, 'exhausting': 27, 'draining': 28, 'tiring': 29, 'wearing': 30,
                // Rank 31-50: Sleep context
                'sleep': 31, 'deprived': 32, 'deprivation': 33, 'insomnia': 34, 'insomniac': 35,
                'restless': 36, 'wakeful': 37, 'sleepless': 38, 'night': 39, 'nights': 40,
                'rest': 41, 'rested': 42, 'nap': 43, 'doze': 44, 'snooze': 45,
                'bed': 46, 'pillow': 47, 'mattress': 48, 'alarm': 49, 'wake': 50,
                // Rank 51-70: Energy and stimulants
                'energy': 51, 'low': 52, 'lacking': 53, 'no': 54, 'zero': 55,
                'coffee': 56, 'caffeine': 57, 'stimulant': 58, 'boost': 59, 'perk': 60,
                'up': 61, 'recharge': 62, 'recover': 63, 'recuperate': 64, 'revive': 65,
                'refresh': 66, 'rejuvenate': 67, 'restore': 68, 'renew': 69, 'reinvigorate': 70,
                // Rank 71-90: Work schedule
                'morning': 71, 'afternoon': 72, 'evening': 73, 'late': 74, 'early': 75,
                'shift': 76, 'overnight': 77, 'oncall': 78, 'call': 79, 'duty': 80,
                'pager': 81, 'beep': 82, 'interrupt': 83, 'disturb': 84, 'hours': 85,
                'long': 86, 'extended': 87, 'overtime': 88, 'extra': 89, 'schedule': 90,
                // Rank 91-110: Medical workplace
                'hospital': 91, 'rounds': 92, 'ward': 93, 'floor': 94, 'unit': 95,
                'clinic': 96, 'office': 97, 'practice': 98, 'charting': 99, 'documentation': 100,
                'doctor': 101, 'physician': 102, 'resident': 103, 'intern': 104, 'fellow': 105,
                'attending': 106, 'nurse': 107, 'provider': 108, 'healthcare': 109, 'worker': 110,
                // Rank 111-130: Patient care burden
                'work': 111, 'workload': 112, 'patient': 113, 'patients': 114, 'care': 115,
                'caring': 116, 'demanding': 117, 'difficult': 118, 'challenging': 119, 'complex': 120,
                'busy': 121, 'hectic': 122, 'chaotic': 123, 'crazy': 124, 'nonstop': 125,
                'relentless': 126, 'constant': 127, 'endless': 128, 'overwhelming': 129, 'impossible': 130,
                // Rank 131-150: Medical fatigue context
                'fatigue': 131, 'chronic': 132, 'syndrome': 133, 'cfs': 134, 'mecfs': 135,
                'fibromyalgia': 136, 'symptom': 137, 'cardinal': 138, 'flare': 139, 'exacerbation': 140,
                'lupus': 141, 'autoimmune': 142, 'inflammation': 143, 'disease': 144, 'illness': 145,
                'malaise': 146, 'weakness': 147, 'debility': 148, 'asthenia': 149, 'prostration': 150,
                // Rank 151-180: Broader context
                'arthritis': 151, 'rheumatoid': 152, 'joint': 153, 'pain': 154, 'muscle': 155,
                'ache': 156, 'body': 157, 'soreness': 158, 'stiffness': 159, 'morning': 160,
                'prednisone': 161, 'steroid': 162, 'side': 163, 'effect': 164, 'treatment': 165,
                'medication': 166, 'drug': 167, 'therapy': 168, 'infusion': 169, 'methotrexate': 170,
                'diagnosis': 171, 'workup': 172, 'evaluation': 173, 'assessment': 174, 'history': 175,
                'bone': 176, 'cartilage': 177, 'tendon': 178, 'biopsy': 179, 'antibody': 180,
                // Rank 500+: Unrelated
                'car': 800, 'phone': 500, 'computer': 450, 'house': 900
            },
            'swollen': {
                'swollen': 1,
                // Rank 2-5: Direct synonyms
                'swelling': 2, 'edema': 3, 'oedema': 4, 'tumefaction': 5,
                // Rank 6-15: Descriptions
                'puffy': 6, 'puffiness': 7, 'bloated': 8, 'distended': 9, 'enlarged': 10,
                'inflamed': 11, 'boggy': 12, 'doughy': 13, 'turgid': 14, 'tumid': 15,
                // Rank 16-30: Fluid and mechanism
                'fluid': 16, 'retention': 17, 'accumulation': 18, 'collection': 19, 'extravasation': 20,
                'interstitial': 21, 'pitting': 22, 'nonpitting': 23, 'dependent': 24, 'peripheral': 25,
                'localized': 26, 'generalized': 27, 'bilateral': 28, 'unilateral': 29, 'asymmetric': 30,
                // Rank 31-50: Affected joints
                'joint': 31, 'joints': 32, 'knee': 33, 'ankle': 34, 'wrist': 35,
                'finger': 36, 'fingers': 37, 'toe': 38, 'toes': 39, 'hand': 40,
                'hands': 41, 'foot': 42, 'feet': 43, 'elbow': 44, 'shoulder': 45,
                'hip': 46, 'mcp': 47, 'pip': 48, 'dip': 49, 'mtps': 50,
                // Rank 51-70: Other body parts
                'leg': 51, 'legs': 52, 'arm': 53, 'arms': 54, 'face': 55,
                'eyelid': 56, 'periorbital': 57, 'lips': 58, 'tongue': 59, 'throat': 60,
                'abdomen': 61, 'ascites': 62, 'scrotum': 63, 'sacral': 64, 'presacral': 65,
                'lymph': 66, 'node': 67, 'lymphedema': 68, 'lymphadenopathy': 69, 'gland': 70,
                // Rank 71-90: Associated symptoms
                'red': 71, 'redness': 72, 'erythema': 73, 'warm': 74, 'warmth': 75,
                'hot': 76, 'painful': 77, 'pain': 78, 'tender': 79, 'tenderness': 80,
                'stiff': 81, 'stiffness': 82, 'limited': 83, 'decreased': 84, 'range': 85,
                'motion': 86, 'rom': 87, 'movement': 88, 'mobility': 89, 'function': 90,
                // Rank 91-110: Conditions
                'arthritis': 91, 'synovitis': 92, 'effusion': 93, 'bursitis': 94, 'tendinitis': 95,
                'tenosynovitis': 96, 'dactylitis': 97, 'sausage': 98, 'digit': 99, 'enthesitis': 100,
                'gout': 101, 'pseudogout': 102, 'septic': 103, 'infection': 104, 'cellulitis': 105,
                'injury': 106, 'trauma': 107, 'sprain': 108, 'strain': 109, 'fracture': 110,
                // Rank 111-130: Procedures and examination
                'aspiration': 111, 'arthrocentesis': 112, 'tap': 113, 'drain': 114, 'fluid': 115,
                'analysis': 116, 'crystals': 117, 'culture': 118, 'cell': 119, 'count': 120,
                'injection': 121, 'steroid': 122, 'corticosteroid': 123, 'kenalog': 124, 'depomedrol': 125,
                'examination': 126, 'palpation': 127, 'squeeze': 128, 'test': 129, 'ballottement': 130,
                // Rank 131-150: Treatments
                'treatment': 131, 'nsaid': 132, 'ibuprofen': 133, 'naproxen': 134, 'colchicine': 135,
                'ice': 136, 'cold': 137, 'compress': 138, 'elevation': 139, 'elevate': 140,
                'compression': 141, 'wrap': 142, 'bandage': 143, 'rice': 144, 'rest': 145,
                'prednisone': 146, 'burst': 147, 'taper': 148, 'diuretic': 149, 'lasix': 150,
                // Rank 151-180: Broader medical context
                'inflammation': 151, 'inflammatory': 152, 'autoimmune': 153, 'rheumatoid': 154, 'ra': 155,
                'lupus': 156, 'vasculitis': 157, 'scleroderma': 158, 'psoriatic': 159, 'ankylosing': 160,
                'methotrexate': 161, 'humira': 162, 'biologic': 163, 'dmard': 164, 'infusion': 165,
                'diagnosis': 166, 'workup': 167, 'xray': 168, 'mri': 169, 'ultrasound': 170,
                'doctor': 171, 'rheumatologist': 172, 'clinic': 173, 'hospital': 174, 'rounds': 175,
                'bone': 176, 'cartilage': 177, 'tendon': 178, 'charting': 179, 'tired': 180,
                // Rank 500+: Unrelated
                'car': 1200, 'phone': 800, 'computer': 900, 'house': 1100
            }
        };

        // Common words fallback for unrecognized words
        const commonWords = [
            'the', 'be', 'to', 'of', 'and', 'a', 'in', 'that', 'have', 'i',
            'it', 'for', 'not', 'on', 'with', 'he', 'as', 'you', 'do', 'at',
            'this', 'but', 'his', 'by', 'from', 'they', 'we', 'say', 'her', 'she',
            'or', 'an', 'will', 'my', 'one', 'all', 'would', 'there', 'their', 'what',
            'so', 'up', 'out', 'if', 'about', 'who', 'get', 'which', 'go', 'me',
            'when', 'make', 'can', 'like', 'time', 'no', 'just', 'him', 'know', 'take',
            'people', 'into', 'year', 'your', 'good', 'some', 'could', 'them', 'see', 'other',
            'than', 'then', 'now', 'look', 'only', 'come', 'its', 'over', 'think', 'also',
            'back', 'after', 'use', 'two', 'how', 'our', 'work', 'first', 'well', 'way',
            'even', 'new', 'want', 'because', 'any', 'these', 'give', 'day', 'most', 'us',
            'water', 'car', 'phone', 'computer', 'house', 'tree', 'book', 'happy', 'sad', 'big',
            'small', 'red', 'blue', 'green', 'yellow', 'food', 'eat', 'drink', 'run', 'walk',
            'sleep', 'talk', 'read', 'write', 'play', 'work', 'home', 'school', 'family', 'friend',
            'love', 'hate', 'help', 'need', 'try', 'call', 'feel', 'become', 'leave', 'put',
            'mean', 'keep', 'let', 'begin', 'seem', 'help', 'show', 'hear', 'play', 'run',
            'move', 'live', 'believe', 'hold', 'bring', 'happen', 'write', 'provide', 'sit', 'stand',
            'lose', 'pay', 'meet', 'include', 'continue', 'set', 'learn', 'change', 'lead', 'understand',
            'watch', 'follow', 'stop', 'create', 'speak', 'read', 'allow', 'add', 'spend', 'grow',
            'open', 'walk', 'win', 'offer', 'remember', 'consider', 'appear', 'buy', 'wait', 'serve',
            'die', 'send', 'expect', 'build', 'stay', 'fall', 'cut', 'reach', 'kill', 'remain'
        ];

        // ==================== GAME STATE ====================
        let gameState = {
            targetWord: '',
            targetIndex: 0,
            guesses: [],
            bestRank: Infinity,
            gameOver: false,
            gameWon: false,
            hardMode: false,
            hintsUsed: 0,
            maxHints: 3
        };

        // ==================== AUTOCORRECT ====================
        // Normalize words to handle plurals and common variations
        function normalizeWord(word) {
            const originalWord = word.toLowerCase().trim();

            // Check if the exact word exists first
            const rankings = wordRankings[gameState.targetWord];
            if (rankings && rankings[originalWord] !== undefined) {
                return { normalized: originalWord, wasAutocorrected: false };
            }

            // Check all target word rankings for the exact word
            for (const target of targetWords) {
                if (wordRankings[target][originalWord] !== undefined) {
                    return { normalized: originalWord, wasAutocorrected: false };
                }
            }

            // Try to find the base form
            let candidates = [];

            // Remove common plural endings
            if (originalWord.endsWith('ies') && originalWord.length > 3) {
                candidates.push(originalWord.slice(0, -3) + 'y'); // candies -> candy
            }
            if (originalWord.endsWith('es') && originalWord.length > 2) {
                candidates.push(originalWord.slice(0, -2)); // boxes -> box
                candidates.push(originalWord.slice(0, -1)); // cases -> case
            }
            if (originalWord.endsWith('s') && originalWord.length > 1) {
                candidates.push(originalWord.slice(0, -1)); // joints -> joint
            }

            // Remove common verb endings
            if (originalWord.endsWith('ing') && originalWord.length > 4) {
                candidates.push(originalWord.slice(0, -3)); // charting -> chart (but we have charting)
                candidates.push(originalWord.slice(0, -3) + 'e'); // typing -> type
            }
            if (originalWord.endsWith('ed') && originalWord.length > 3) {
                candidates.push(originalWord.slice(0, -2)); // inflamed -> inflam (not useful)
                candidates.push(originalWord.slice(0, -1)); // tired is base form
                candidates.push(originalWord.slice(0, -2) + 'e'); // diagnosed -> diagnose
            }

            // Handle -tion -> -te variations
            if (originalWord.endsWith('tion') && originalWord.length > 4) {
                candidates.push(originalWord.slice(0, -4) + 'te'); // inflammation stays, but inflame
            }

            // Common misspellings/variations
            const commonVariations = {
                'joints': 'joint',
                'bones': 'bone',
                'tendons': 'tendon',
                'steroids': 'steroid',
                'antibodies': 'antibody',
                'biopsies': 'biopsy',
                'diagnoses': 'diagnosis',
                'infusions': 'infusion',
                'clinics': 'clinic',
                'pagers': 'pager',
                'coffees': 'coffee',
                'flares': 'flare',
                'rashes': 'rash',
                'ulcers': 'ulcer',
                'symptoms': 'symptom',
                'treatments': 'treatment',
                'medications': 'medication',
                'injections': 'injection',
                'patients': 'patient',
                'doctors': 'doctor',
                'hospitals': 'hospital',
                'diseases': 'disease',
                'conditions': 'condition',
                'autoimmunity': 'autoimmune',
                'inflammatory': 'inflammation',
                'arthritic': 'arthritis',
                'inflamed': 'inflammation',
                'swells': 'swollen',
                'swell': 'swollen',
                'swelling': 'swollen',
                'fatigued': 'fatigue',
                'tiredness': 'tired',
                'exhausted': 'tired',
                'sleepy': 'tired',
                'diagnosed': 'diagnosis',
                'diagnosing': 'diagnosis',
                'treating': 'treatment',
                'treated': 'treatment'
            };

            if (commonVariations[originalWord]) {
                candidates.unshift(commonVariations[originalWord]); // Prioritize known variations
            }

            // Check each candidate
            for (const candidate of candidates) {
                // Check current target word rankings
                if (rankings && rankings[candidate] !== undefined) {
                    return { normalized: candidate, wasAutocorrected: true, original: originalWord };
                }

                // Check all target word rankings
                for (const target of targetWords) {
                    if (wordRankings[target][candidate] !== undefined) {
                        return { normalized: candidate, wasAutocorrected: true, original: originalWord };
                    }
                }
            }

            // Check if it's in common words
            if (commonWords.includes(originalWord)) {
                return { normalized: originalWord, wasAutocorrected: false };
            }

            // Check candidates against common words
            for (const candidate of candidates) {
                if (commonWords.includes(candidate)) {
                    return { normalized: candidate, wasAutocorrected: true, original: originalWord };
                }
            }

            // No match found
            return { normalized: originalWord, wasAutocorrected: false };
        }

        let stats = {
            played: 0,
            won: 0,
            totalGuesses: 0,
            bestWin: Infinity,
            currentStreak: 0,
            maxStreak: 0
        };

        // ==================== INITIALIZATION ====================
        function init() {
            loadStats();
            loadSettings();
            startNewGame();
            setupEventListeners();
        }

        function startNewGame() {
            // Pick random target word
            gameState.targetIndex = Math.floor(Math.random() * targetWords.length);
            gameState.targetWord = targetWords[gameState.targetIndex];
            gameState.guesses = [];
            gameState.bestRank = Infinity;
            gameState.gameOver = false;
            gameState.gameWon = false;
            gameState.hintsUsed = 0;

            // Reset UI
            document.getElementById('historyList').innerHTML = '';
            document.getElementById('guessCount').textContent = 'Guesses: 0';
            document.getElementById('bestRank').textContent = 'Best: -';
            document.getElementById('meterValue').textContent = '-';
            document.getElementById('meterHint').textContent = 'Enter a word to begin';
            document.getElementById('meterIndicator').classList.remove('active');
            document.getElementById('guessInput').value = '';
            document.getElementById('guessInput').disabled = false;
            document.getElementById('submitBtn').disabled = false;
            document.getElementById('giveUpBtn').style.display = 'inline-block';
            document.getElementById('errorMsg').textContent = '';
            document.getElementById('autocorrectMsg').textContent = '';

            // Reset hint UI
            document.getElementById('hintBtn').disabled = false;
            document.getElementById('hintBtn').style.display = 'inline-block';
            updateHintCount();

            // Reset joint diagram
            updateJointDiagram(Infinity);

            // Close any open modals
            closeAllModals();
        }

        function loadStats() {
            const saved = localStorage.getItem('rheumatexto_stats');
            if (saved) {
                stats = JSON.parse(saved);
            }
            updateStatsDisplay();
        }

        function saveStats() {
            localStorage.setItem('rheumatexto_stats', JSON.stringify(stats));
            updateStatsDisplay();
        }

        function loadSettings() {
            const lightMode = localStorage.getItem('rheumatexto_lightMode') === 'true';
            const hardMode = localStorage.getItem('rheumatexto_hardMode') === 'true';

            document.getElementById('lightModeToggle').checked = lightMode;
            document.getElementById('hardModeToggle').checked = hardMode;

            if (lightMode) {
                document.body.classList.add('light-mode');
            }
            gameState.hardMode = hardMode;
        }

        function saveSettings() {
            localStorage.setItem('rheumatexto_lightMode', document.getElementById('lightModeToggle').checked);
            localStorage.setItem('rheumatexto_hardMode', document.getElementById('hardModeToggle').checked);
        }

        // ==================== EVENT LISTENERS ====================
        function setupEventListeners() {
            // Submit guess
            document.getElementById('submitBtn').addEventListener('click', submitGuess);
            document.getElementById('guessInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') submitGuess();
            });

            // Modal buttons
            document.getElementById('helpBtn').addEventListener('click', () => openModal('helpModal'));
            document.getElementById('statsBtn').addEventListener('click', () => openModal('statsModal'));
            document.getElementById('settingsBtn').addEventListener('click', () => openModal('settingsModal'));

            // Settings toggles
            document.getElementById('lightModeToggle').addEventListener('change', (e) => {
                document.body.classList.toggle('light-mode', e.target.checked);
                saveSettings();
            });
            document.getElementById('hardModeToggle').addEventListener('change', (e) => {
                gameState.hardMode = e.target.checked;
                saveSettings();
            });

            // Give up
            document.getElementById('giveUpBtn').addEventListener('click', giveUp);

            // Hint button
            document.getElementById('hintBtn').addEventListener('click', useHint);

            // New game buttons
            document.getElementById('newGameBtn').addEventListener('click', () => {
                closeModal('winModal');
                startNewGame();
            });
            document.getElementById('newGameAfterGiveUp').addEventListener('click', () => {
                closeModal('giveUpModal');
                startNewGame();
            });

            // Share button
            document.getElementById('shareBtn').addEventListener('click', shareResult);

            // Close modals on overlay click
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.classList.remove('active');
                    }
                });
            });
        }

        // ==================== GAME LOGIC ====================
        function submitGuess() {
            if (gameState.gameOver) return;

            const input = document.getElementById('guessInput');
            const rawGuess = input.value.trim().toLowerCase();

            if (!rawGuess) return;

            // Apply autocorrect
            const { normalized: guess, wasAutocorrected, original } = normalizeWord(rawGuess);

            // Check if already guessed (check both original and normalized)
            if (gameState.guesses.find(g => g.word === guess || g.word === rawGuess)) {
                showError('Already guessed!');
                showAutocorrect('');
                input.value = '';
                return;
            }

            // Get rank for this guess
            const rank = getWordRank(guess);

            if (rank === -1) {
                showError('Word not recognized');
                showAutocorrect('');
                return;
            }

            // Clear error and input
            showError('');
            input.value = '';

            // Show autocorrect message if applicable
            if (wasAutocorrected) {
                showAutocorrect(`"${original}" ‚Üí "${guess}"`);
            } else {
                showAutocorrect('');
            }

            // Add guess
            const guessData = { word: guess, rank: rank };
            gameState.guesses.push(guessData);

            // Check if new best
            const isNewBest = rank < gameState.bestRank;
            if (isNewBest) {
                gameState.bestRank = rank;
            }

            // Update UI
            updateGuessDisplay(guessData, isNewBest);
            updateMeter(rank);
            updateJointDiagram(rank);
            updateGuessCount();

            // Check for win
            if (rank === 1) {
                handleWin();
            }
        }

        function getWordRank(word) {
            const rankings = wordRankings[gameState.targetWord];

            if (rankings[word] !== undefined) {
                return rankings[word];
            }

            // Check if it's a common word (give it a high rank)
            if (commonWords.includes(word)) {
                return 1500 + Math.floor(Math.random() * 500);
            }

            // Check if it's in any other target word's rankings
            for (const target of targetWords) {
                if (wordRankings[target][word] !== undefined) {
                    // Give it a modified rank based on semantic distance
                    return Math.min(2000, wordRankings[target][word] + 500);
                }
            }

            return -1; // Word not recognized
        }

        function updateGuessDisplay(guessData, isNewBest) {
            const historyList = document.getElementById('historyList');

            // Create new item
            const item = document.createElement('li');
            item.className = `history-item ${getRankClass(guessData.rank)}`;
            if (isNewBest && gameState.guesses.length > 1) {
                item.classList.add('new-best');
            }
            const hintClass = guessData.isHint ? 'hint-word' : '';
            item.innerHTML = `
                <span class="history-word ${hintClass}">${guessData.word}</span>
                <span class="history-rank">${guessData.rank}</span>
            `;

            // Sort guesses by rank
            const sortedGuesses = [...gameState.guesses].sort((a, b) => a.rank - b.rank);

            // Find position
            const position = sortedGuesses.findIndex(g => g.word === guessData.word);

            // Insert at correct position
            const existingItems = historyList.querySelectorAll('.history-item');
            if (position >= existingItems.length) {
                historyList.appendChild(item);
            } else {
                historyList.insertBefore(item, existingItems[position]);
            }

            // Update best rank display
            document.getElementById('bestRank').textContent = `Best: ${gameState.bestRank}`;
        }

        function getRankClass(rank) {
            if (rank <= 10) return 'rank-hot';
            if (rank <= 100) return 'rank-warm';
            if (rank <= 500) return 'rank-mild';
            if (rank <= 1000) return 'rank-cool';
            return 'rank-cold';
        }

        function updateMeter(rank) {
            const indicator = document.getElementById('meterIndicator');
            const valueEl = document.getElementById('meterValue');
            const hintEl = document.getElementById('meterHint');

            // Calculate position (inverse - lower rank = higher position)
            const maxRank = 2000;
            const position = Math.max(0, Math.min(100, (1 - rank / maxRank) * 100));

            indicator.style.left = `${position}%`;
            indicator.classList.add('active');

            // Update value with color
            valueEl.textContent = rank;
            valueEl.style.color = getRankColor(rank);

            // Update hint (unless hard mode)
            if (!gameState.hardMode) {
                hintEl.textContent = getHint(rank);
            } else {
                hintEl.textContent = '';
            }
        }

        function getRankColor(rank) {
            if (rank <= 10) return 'var(--accent-red)';
            if (rank <= 100) return 'var(--accent-orange)';
            if (rank <= 500) return 'var(--accent-yellow)';
            if (rank <= 1000) return 'var(--accent-blue)';
            return 'var(--accent-cold)';
        }

        function getHint(rank) {
            if (rank === 1) return 'üéâ DIAGNOSIS COMPLETE!';
            if (rank <= 5) return 'üî• ON FIRE! Almost there!';
            if (rank <= 10) return 'üî• Flaring! So close!';
            if (rank <= 20) return 'üò∞ You\'re close! Keep going!';
            if (rank <= 50) return 'üå°Ô∏è Getting warmer!';
            if (rank <= 100) return 'üëÄ Interesting... think related!';
            if (rank <= 300) return 'ü§î Lukewarm... try another angle';
            if (rank <= 500) return 'üòê Meh... keep thinking';
            if (rank <= 1000) return '‚ùÑÔ∏è Getting cold...';
            return 'ü•∂ Ice cold! Try something medical';
        }

        function updateJointDiagram(rank) {
            const joint = document.getElementById('jointDiagram');
            joint.classList.remove('inflamed-1', 'inflamed-2', 'inflamed-3', 'inflamed-4');

            if (rank <= 10) {
                joint.classList.add('inflamed-1');
            } else if (rank <= 100) {
                joint.classList.add('inflamed-2');
            } else if (rank <= 500) {
                joint.classList.add('inflamed-3');
            } else if (rank <= 1000) {
                joint.classList.add('inflamed-4');
            }
        }

        function updateGuessCount() {
            document.getElementById('guessCount').textContent = `Guesses: ${gameState.guesses.length}`;
        }

        function showError(msg) {
            document.getElementById('errorMsg').textContent = msg;
        }

        function showAutocorrect(msg) {
            document.getElementById('autocorrectMsg').textContent = msg;
        }

        // ==================== HINT SYSTEM ====================
        function getHintWord() {
            if (gameState.hintsUsed >= gameState.maxHints) return null;
            if (gameState.gameOver) return null;

            const rankings = wordRankings[gameState.targetWord];
            const guessedWords = new Set(gameState.guesses.map(g => g.word));

            // Get all words sorted by rank
            const sortedWords = Object.entries(rankings)
                .filter(([word, rank]) => !guessedWords.has(word) && word !== gameState.targetWord)
                .sort((a, b) => a[1] - b[1]);

            if (sortedWords.length === 0) return null;

            // Strategy: Give a word that's roughly halfway between current best and the answer
            // Or if no guesses yet, give something around rank 50-100
            let targetRank;

            if (gameState.bestRank === Infinity) {
                // No guesses yet - give a word around rank 50-100
                targetRank = 50 + Math.floor(Math.random() * 50);
            } else if (gameState.bestRank <= 10) {
                // Very close - give something just a bit closer (rank 2-5)
                targetRank = 2 + Math.floor(Math.random() * 4);
            } else if (gameState.bestRank <= 50) {
                // Close - give something halfway
                targetRank = Math.floor(gameState.bestRank / 2);
            } else {
                // Far away - give something roughly halfway to the answer
                targetRank = Math.floor(gameState.bestRank / 2);
            }

            // Find the word closest to our target rank
            let bestWord = null;
            let bestDiff = Infinity;

            for (const [word, rank] of sortedWords) {
                const diff = Math.abs(rank - targetRank);
                if (diff < bestDiff) {
                    bestDiff = diff;
                    bestWord = { word, rank };
                }
            }

            return bestWord;
        }

        function useHint() {
            if (gameState.gameOver) return;
            if (gameState.hintsUsed >= gameState.maxHints) {
                showError('No hints remaining!');
                return;
            }

            const hintWord = getHintWord();
            if (!hintWord) {
                showError('No hint available');
                return;
            }

            gameState.hintsUsed++;
            updateHintCount();

            // Add the hint word as a guess (marked as hint)
            const guessData = { word: hintWord.word, rank: hintWord.rank, isHint: true };
            gameState.guesses.push(guessData);

            // Check if new best
            const isNewBest = hintWord.rank < gameState.bestRank;
            if (isNewBest) {
                gameState.bestRank = hintWord.rank;
            }

            // Update UI
            showError('');
            showAutocorrect(`üí° Hint: "${hintWord.word.toUpperCase()}"`);
            updateGuessDisplay(guessData, isNewBest);
            updateMeter(hintWord.rank);
            updateJointDiagram(hintWord.rank);
            updateGuessCount();

            // Check for win (unlikely but possible)
            if (hintWord.rank === 1) {
                handleWin();
            }

            // Disable hint button if no hints left
            if (gameState.hintsUsed >= gameState.maxHints) {
                document.getElementById('hintBtn').disabled = true;
            }
        }

        function updateHintCount() {
            const remaining = gameState.maxHints - gameState.hintsUsed;
            document.getElementById('hintCount').textContent = `Hints used: ${gameState.hintsUsed}/${gameState.maxHints}`;
        }

        // ==================== WIN/LOSE ====================
        function handleWin() {
            gameState.gameOver = true;
            gameState.gameWon = true;

            // Update stats
            stats.played++;
            stats.won++;
            stats.totalGuesses += gameState.guesses.length;
            if (gameState.guesses.length < stats.bestWin) {
                stats.bestWin = gameState.guesses.length;
            }
            stats.currentStreak++;
            if (stats.currentStreak > stats.maxStreak) {
                stats.maxStreak = stats.currentStreak;
            }
            saveStats();

            // Disable input
            document.getElementById('guessInput').disabled = true;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('giveUpBtn').style.display = 'none';
            document.getElementById('hintBtn').style.display = 'none';

            // Show confetti
            createConfetti();

            // Show win modal after delay
            setTimeout(() => {
                document.getElementById('winWord').textContent = gameState.targetWord.toUpperCase();
                document.getElementById('winGuesses').textContent = gameState.guesses.length;
                createGuessVisualization();
                openModal('winModal');
            }, 1000);
        }

        function giveUp() {
            gameState.gameOver = true;
            gameState.gameWon = false;

            // Update stats
            stats.played++;
            stats.currentStreak = 0;
            saveStats();

            // Disable input
            document.getElementById('guessInput').disabled = true;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('giveUpBtn').style.display = 'none';
            document.getElementById('hintBtn').style.display = 'none';

            // Show reveal modal
            document.getElementById('revealWord').textContent = gameState.targetWord.toUpperCase();
            openModal('giveUpModal');
        }

        function createConfetti() {
            const colors = ['#e94560', '#ff6b35', '#f0c808', '#4da8da', '#7ec8e3', '#4caf50'];

            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = `${Math.random() * 100}vw`;
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDuration = `${2 + Math.random() * 2}s`;
                    document.body.appendChild(confetti);

                    setTimeout(() => confetti.remove(), 4000);
                }, i * 50);
            }
        }

        function createGuessVisualization() {
            const container = document.getElementById('guessVisualization');
            container.innerHTML = '';

            // Show last 20 guesses or all if fewer
            const recentGuesses = gameState.guesses.slice(-20);

            recentGuesses.forEach(guess => {
                const block = document.createElement('div');
                block.className = 'guess-block';

                if (guess.rank <= 10) {
                    block.style.backgroundColor = 'var(--accent-red)';
                } else if (guess.rank <= 100) {
                    block.style.backgroundColor = 'var(--accent-orange)';
                } else if (guess.rank <= 500) {
                    block.style.backgroundColor = 'var(--accent-yellow)';
                } else if (guess.rank <= 1000) {
                    block.style.backgroundColor = 'var(--accent-blue)';
                } else {
                    block.style.backgroundColor = 'var(--accent-cold)';
                }

                container.appendChild(block);
            });
        }

        function shareResult() {
            const guessBlocks = gameState.guesses.slice(-10).map(g => {
                if (g.rank <= 10) return 'üü•';
                if (g.rank <= 100) return 'üüß';
                if (g.rank <= 500) return 'üü®';
                if (g.rank <= 1000) return 'üü¶';
                return '‚¨ú';
            }).join('');

            const text = `Rheumatexto üî¨
Found: ${gameState.targetWord.toUpperCase()}
Guesses: ${gameState.guesses.length}
${guessBlocks}

Play at: [your-url-here]`;

            if (navigator.share) {
                navigator.share({ text });
            } else {
                navigator.clipboard.writeText(text).then(() => {
                    alert('Result copied to clipboard!');
                });
            }
        }

        // ==================== STATS ====================
        function updateStatsDisplay() {
            document.getElementById('statPlayed').textContent = stats.played;
            document.getElementById('statWon').textContent = stats.won;
            document.getElementById('statAvg').textContent = stats.won > 0
                ? Math.round(stats.totalGuesses / stats.won)
                : '-';
            document.getElementById('statBest').textContent = stats.bestWin === Infinity
                ? '-'
                : stats.bestWin;
            document.getElementById('statStreak').textContent = stats.currentStreak;
            document.getElementById('statMaxStreak').textContent = stats.maxStreak;
        }

        // ==================== MODALS ====================
        function openModal(id) {
            document.getElementById(id).classList.add('active');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        function closeAllModals() {
            document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active'));
        }

        // Global close function for onclick handlers
        window.closeModal = closeModal;

        // ==================== START ====================
        init();
    </script>
</body>
</html>
