<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rheumatexto - The Rheumatology Word Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #1a1a2e;
            --bg-secondary: #16213e;
            --bg-tertiary: #0f3460;
            --text-primary: #eaeaea;
            --text-secondary: #a0a0a0;
            --accent-red: #e94560;
            --accent-orange: #ff6b35;
            --accent-yellow: #f0c808;
            --accent-blue: #4da8da;
            --accent-cold: #7ec8e3;
            --clinical-white: #f5f5f5;
            --success: #4caf50;
        }

        .light-mode {
            --bg-primary: #f5f5f5;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e8f4f8;
            --text-primary: #1a1a2e;
            --text-secondary: #555555;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            transition: background 0.3s, color 0.3s;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0 20px;
            border-bottom: 1px solid var(--bg-tertiary);
            margin-bottom: 20px;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--accent-red), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo span {
            font-size: 0.7rem;
            display: block;
            color: var(--text-secondary);
            -webkit-text-fill-color: var(--text-secondary);
        }

        .header-buttons {
            display: flex;
            gap: 10px;
        }

        .icon-btn {
            background: var(--bg-secondary);
            border: none;
            color: var(--text-primary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: background 0.2s, transform 0.2s;
        }

        .icon-btn:hover {
            background: var(--bg-tertiary);
            transform: scale(1.1);
        }

        /* Joint Visualization */
        .joint-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }

        .joint-svg {
            width: 150px;
            height: 200px;
        }

        .joint-bone {
            fill: var(--clinical-white);
            transition: all 0.5s;
        }

        .joint-cartilage {
            fill: var(--accent-blue);
            transition: all 0.5s;
        }

        .joint-synovium {
            fill: var(--accent-cold);
            opacity: 0.3;
            transition: all 0.5s;
        }

        .inflamed-1 .joint-synovium { fill: var(--accent-red); opacity: 0.8; }
        .inflamed-1 .joint-cartilage { fill: var(--accent-orange); }
        .inflamed-2 .joint-synovium { fill: var(--accent-orange); opacity: 0.6; }
        .inflamed-2 .joint-cartilage { fill: #e8a445; }
        .inflamed-3 .joint-synovium { fill: var(--accent-yellow); opacity: 0.5; }
        .inflamed-4 .joint-synovium { fill: var(--accent-blue); opacity: 0.4; }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.05); opacity: 1; }
        }

        .inflamed-1 .joint-synovium {
            animation: pulse 1s ease-in-out infinite;
        }

        /* Inflammation Meter */
        .meter-container {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
        }

        .meter-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .meter-bar {
            height: 30px;
            background: linear-gradient(to right,
                var(--accent-cold) 0%,
                var(--accent-blue) 25%,
                var(--accent-yellow) 50%,
                var(--accent-orange) 75%,
                var(--accent-red) 100%);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .meter-indicator {
            position: absolute;
            width: 8px;
            height: 40px;
            background: white;
            border-radius: 4px;
            top: -5px;
            transform: translateX(-50%);
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
            transition: left 0.5s ease-out;
            display: none;
        }

        .meter-indicator.active {
            display: block;
        }

        .meter-value {
            text-align: center;
            font-size: 2rem;
            font-weight: bold;
            margin-top: 10px;
            min-height: 50px;
        }

        .meter-hint {
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-style: italic;
            min-height: 24px;
        }

        /* Input Area */
        .input-container {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }

        .guess-input {
            flex: 1;
            padding: 15px 20px;
            font-size: 1.1rem;
            border: 2px solid var(--bg-tertiary);
            border-radius: 10px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            outline: none;
            transition: border-color 0.2s;
        }

        .guess-input:focus {
            border-color: var(--accent-blue);
        }

        .guess-input::placeholder {
            color: var(--text-secondary);
        }

        .submit-btn {
            padding: 15px 25px;
            font-size: 1.1rem;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-red));
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .submit-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(233, 69, 96, 0.3);
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Guess Count */
        .guess-count {
            text-align: center;
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        /* Guess History */
        .history-container {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .history-title {
            font-size: 1rem;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-list {
            list-style: none;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 8px;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .history-item.rank-hot {
            background: linear-gradient(135deg, rgba(233, 69, 96, 0.3), rgba(255, 107, 53, 0.2));
            border-left: 4px solid var(--accent-red);
        }

        .history-item.rank-warm {
            background: rgba(255, 107, 53, 0.2);
            border-left: 4px solid var(--accent-orange);
        }

        .history-item.rank-mild {
            background: rgba(240, 200, 8, 0.2);
            border-left: 4px solid var(--accent-yellow);
        }

        .history-item.rank-cool {
            background: rgba(77, 168, 218, 0.2);
            border-left: 4px solid var(--accent-blue);
        }

        .history-item.rank-cold {
            background: rgba(126, 200, 227, 0.1);
            border-left: 4px solid var(--accent-cold);
        }

        .history-item.new-best {
            animation: newBest 0.5s ease-out;
        }

        @keyframes newBest {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .history-word {
            font-weight: bold;
            text-transform: uppercase;
        }

        .history-word.hint-word::before {
            content: 'üí° ';
        }

        .history-rank {
            font-weight: bold;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .rank-hot .history-rank { background: var(--accent-red); color: white; }
        .rank-warm .history-rank { background: var(--accent-orange); color: white; }
        .rank-mild .history-rank { background: var(--accent-yellow); color: #333; }
        .rank-cool .history-rank { background: var(--accent-blue); color: white; }
        .rank-cold .history-rank { background: var(--accent-cold); color: #333; }

        /* Give Up Button */
        .give-up-btn {
            padding: 10px 20px;
            background: transparent;
            border: 1px solid var(--text-secondary);
            border-radius: 8px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .give-up-btn:hover {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        /* Action Buttons Container */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px auto;
        }

        .hint-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--accent-yellow), var(--accent-orange));
            border: none;
            border-radius: 8px;
            color: #333;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        .hint-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 15px rgba(240, 200, 8, 0.4);
        }

        .hint-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .hint-count {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-align: center;
            margin-top: 5px;
        }

        /* Autocorrect notification */
        .autocorrect-msg {
            text-align: center;
            color: var(--accent-blue);
            font-size: 0.85rem;
            font-style: italic;
            min-height: 20px;
            margin-top: 5px;
        }

        /* Modals */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 25px;
            max-width: 90%;
            width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s;
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
        }

        .modal-content p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .modal-content h3 {
            margin: 20px 0 10px;
            color: var(--accent-blue);
        }

        /* Stats Modal */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .stat-box {
            background: var(--bg-tertiary);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-blue);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Win Modal */
        .win-modal .modal {
            text-align: center;
        }

        .win-title {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .win-word {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-red);
            margin: 20px 0;
        }

        .win-stats {
            font-size: 1.2rem;
            margin: 15px 0;
        }

        .share-btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            background: var(--success);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            margin: 10px 5px;
            transition: transform 0.2s;
        }

        .share-btn:hover {
            transform: scale(1.05);
        }

        .new-game-btn {
            padding: 15px 30px;
            font-size: 1.1rem;
            background: var(--accent-blue);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            margin: 10px 5px;
            transition: transform 0.2s;
        }

        .new-game-btn:hover {
            transform: scale(1.05);
        }

        .guess-visualization {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .guess-block {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }

        /* Settings */
        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--bg-tertiary);
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-tertiary);
            border-radius: 26px;
            transition: 0.3s;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background: white;
            border-radius: 50%;
            transition: 0.3s;
        }

        input:checked + .toggle-slider {
            background: var(--accent-blue);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Confetti */
        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(720deg); }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            top: 0;
            z-index: 999;
            animation: confetti-fall 3s linear forwards;
        }

        /* Error Message */
        .error-msg {
            text-align: center;
            color: var(--accent-red);
            font-size: 0.9rem;
            min-height: 24px;
            margin-top: 10px;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }

            .logo {
                font-size: 1.4rem;
            }

            .joint-svg {
                width: 120px;
                height: 160px;
            }

            .meter-value {
                font-size: 1.5rem;
            }

            .input-container {
                flex-direction: column;
            }

            .submit-btn {
                width: 100%;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .stat-value {
                font-size: 1.5rem;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--bg-tertiary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-blue);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                RHEUMATEXTO
                <span>The Rheumatology Word Game</span>
            </div>
            <div class="header-buttons">
                <button class="icon-btn" id="helpBtn" title="How to Play">?</button>
                <button class="icon-btn" id="statsBtn" title="Statistics">üìä</button>
                <button class="icon-btn" id="settingsBtn" title="Settings">‚öôÔ∏è</button>
            </div>
        </header>

        <div class="joint-container">
            <svg class="joint-svg" id="jointDiagram" viewBox="0 0 100 140">
                <!-- Upper bone -->
                <ellipse class="joint-bone" cx="50" cy="20" rx="25" ry="18"/>
                <rect class="joint-bone" x="35" y="18" width="30" height="35"/>
                <ellipse class="joint-bone" cx="50" cy="52" rx="20" ry="12"/>

                <!-- Cartilage -->
                <ellipse class="joint-cartilage" cx="50" cy="58" rx="18" ry="6"/>

                <!-- Synovium/Joint space -->
                <ellipse class="joint-synovium" cx="50" cy="70" rx="22" ry="14"/>

                <!-- Lower cartilage -->
                <ellipse class="joint-cartilage" cx="50" cy="82" rx="18" ry="6"/>

                <!-- Lower bone -->
                <ellipse class="joint-bone" cx="50" cy="88" rx="20" ry="12"/>
                <rect class="joint-bone" x="35" y="87" width="30" height="35"/>
                <ellipse class="joint-bone" cx="50" cy="120" rx="25" ry="18"/>
            </svg>
        </div>

        <div class="meter-container">
            <div class="meter-label">
                <span>‚ùÑÔ∏è Cold</span>
                <span>üî• Flaring</span>
            </div>
            <div class="meter-bar">
                <div class="meter-indicator" id="meterIndicator"></div>
            </div>
            <div class="meter-value" id="meterValue">-</div>
            <div class="meter-hint" id="meterHint">Enter a word to begin</div>
        </div>

        <div class="input-container">
            <input type="text" class="guess-input" id="guessInput" placeholder="Type your guess..." autocomplete="off" autofocus>
            <button class="submit-btn" id="submitBtn">Guess</button>
        </div>
        <div class="error-msg" id="errorMsg"></div>
        <div class="autocorrect-msg" id="autocorrectMsg"></div>

        <div class="guess-count" id="guessCount">Guesses: 0</div>

        <div class="history-container">
            <div class="history-title">
                <span>Guess History</span>
                <span id="bestRank">Best: -</span>
            </div>
            <ul class="history-list" id="historyList"></ul>
        </div>

        <div class="action-buttons">
            <button class="hint-btn" id="hintBtn">üí° Get Hint</button>
            <button class="give-up-btn" id="giveUpBtn">Give Up</button>
        </div>
        <div class="hint-count" id="hintCount">Hints used: 0/3</div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">How to Play</h2>
                <button class="modal-close" onclick="closeModal('helpModal')">√ó</button>
            </div>
            <div class="modal-content">
                <p>Welcome to <strong>Rheumatexto</strong> ‚Äì the word guessing game for rheumatology enthusiasts!</p>

                <h3>üéØ Goal</h3>
                <p>Find the secret word! It's related to rheumatology, medicine, or the life of a doctor.</p>

                <h3>üéÆ How It Works</h3>
                <p>1. Type any word and submit your guess</p>
                <p>2. You'll see a <strong>rank</strong> showing how close your guess is:</p>
                <ul style="margin-left: 20px; margin-bottom: 15px;">
                    <li><span style="color: var(--accent-red)">1-10</span>: You're ON FIRE! üî•</li>
                    <li><span style="color: var(--accent-orange)">11-100</span>: Getting warm!</li>
                    <li><span style="color: var(--accent-yellow)">101-500</span>: Lukewarm</li>
                    <li><span style="color: var(--accent-blue)">501-1000</span>: Cool</li>
                    <li><span style="color: var(--accent-cold)">1000+</span>: Ice cold ‚ùÑÔ∏è</li>
                </ul>
                <p>3. Use the hints to guide your next guess</p>
                <p>4. Win by finding the exact word (Rank 1)!</p>

                <h3>üí° Hints</h3>
                <p>Stuck? Use up to 3 hints per game! Each hint reveals a word that's closer to the answer than your current best guess.</p>

                <h3>‚ú® Autocorrect</h3>
                <p>The game recognizes common variations like plurals (joints ‚Üí joint) and will autocorrect your guess automatically.</p>

                <h3>ü©∫ Tips</h3>
                <p>Think about rheumatology conditions, treatments, anatomy, lab tests, and doctor life!</p>
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div class="modal-overlay" id="statsModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Statistics</h2>
                <button class="modal-close" onclick="closeModal('statsModal')">√ó</button>
            </div>
            <div class="modal-content">
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="statPlayed">0</div>
                        <div class="stat-label">Played</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statWon">0</div>
                        <div class="stat-label">Won</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statAvg">-</div>
                        <div class="stat-label">Avg Guesses</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statBest">-</div>
                        <div class="stat-label">Best Win</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statStreak">0</div>
                        <div class="stat-label">Current Streak</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statMaxStreak">0</div>
                        <div class="stat-label">Max Streak</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Settings</h2>
                <button class="modal-close" onclick="closeModal('settingsModal')">√ó</button>
            </div>
            <div class="modal-content">
                <div class="setting-row">
                    <span>Light Mode</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="lightModeToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-row">
                    <span>Hard Mode (no hints)</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="hardModeToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Win Modal -->
    <div class="modal-overlay win-modal" id="winModal">
        <div class="modal">
            <h2 class="win-title">üéâ Diagnosis Complete!</h2>
            <div class="win-word" id="winWord">LUPUS</div>
            <div class="win-stats">
                Solved in <strong id="winGuesses">0</strong> guesses!
            </div>
            <div class="guess-visualization" id="guessVisualization"></div>
            <button class="share-btn" id="shareBtn">üìã Share Result</button>
            <button class="new-game-btn" id="newGameBtn">New Game</button>
        </div>
    </div>

    <!-- Give Up Modal -->
    <div class="modal-overlay" id="giveUpModal">
        <div class="modal" style="text-align: center;">
            <h2 class="modal-title">The word was...</h2>
            <div class="win-word" id="revealWord">LUPUS</div>
            <p style="margin: 20px 0; color: var(--text-secondary);">Better luck next time! Every attending started as an intern. üí™</p>
            <button class="new-game-btn" id="newGameAfterGiveUp">New Game</button>
        </div>
    </div>

    <script>
        // ==================== WORD DATA ====================
        const targetWords = [
            'lupus', 'gout', 'arthritis', 'vasculitis', 'scleroderma', 'fibromyalgia',
            'joint', 'cartilage', 'synovium', 'tendon', 'bone',
            'prednisone', 'methotrexate', 'humira', 'infusion', 'steroid',
            'antibody', 'inflammation', 'autoimmune', 'biopsy',
            'clinic', 'rounds', 'pager', 'charting', 'diagnosis',
            'coffee', 'tired', 'swollen'
        ];

        // Pre-computed word rankings for each target word
        // Rankings: 1 = exact match, lower = more related
        const wordRankings = {
            'lupus': {
                // Rank 1: Target
                'lupus': 1,
                // Rank 2-5: Specific but requires knowledge
                'nephritis': 2, 'malar': 3, 'photosensitivity': 4, 'dsdna': 5,
                // Rank 6-15: Strong clinical associations
                'discoid': 6, 'serositis': 7, 'butterfly': 8, 'ana': 9, 'complement': 10,
                'antismith': 11, 'proteinuria': 12, 'pleuritis': 13, 'pericarditis': 14, 'cytopenias': 15,
                // Rank 16-30: Key features and treatments
                'hydroxychloroquine': 16, 'plaquenil': 17, 'benlysta': 18, 'flare': 19, 'remission': 20,
                'oral': 21, 'ulcers': 22, 'alopecia': 23, 'raynaud': 24, 'arthralgia': 25,
                'leukopenia': 26, 'lymphopenia': 27, 'thrombocytopenia': 28, 'anemia': 29, 'hemolytic': 30,
                // Rank 31-50: Related clinical concepts
                'antiphospholipid': 31, 'clotting': 32, 'miscarriage': 33, 'stroke': 34, 'criteria': 35,
                'slicc': 36, 'acr': 37, 'activity': 38, 'sledai': 39, 'immunosuppressant': 40,
                'cellcept': 41, 'mycophenolate': 42, 'azathioprine': 43, 'cyclophosphamide': 44, 'rituximab': 45,
                'belimumab': 46, 'voclosporin': 47, 'lupkynis': 48, 'class': 49, 'membranous': 50,
                // Rank 51-80: Broader associations
                'connective': 51, 'tissue': 52, 'systemic': 53, 'erythematosus': 54, 'sle': 55,
                'autoimmune': 56, 'autoantibody': 57, 'immune': 58, 'complex': 59, 'deposition': 60,
                'glomerulonephritis': 61, 'renal': 62, 'kidney': 63, 'biopsy': 64, 'proliferative': 65,
                'neuropsychiatric': 66, 'seizure': 67, 'psychosis': 68, 'cognitive': 69, 'headache': 70,
                'fatigue': 71, 'fever': 72, 'weight': 73, 'loss': 74, 'malaise': 75,
                'sun': 76, 'sensitivity': 77, 'rash': 78, 'skin': 79, 'cutaneous': 80,
                // Rank 81-120: Demographics and risk factors
                'female': 81, 'woman': 82, 'young': 83, 'childbearing': 84, 'african': 85,
                'american': 86, 'hispanic': 87, 'asian': 88, 'genetic': 89, 'hereditary': 90,
                'family': 91, 'history': 92, 'hla': 93, 'twin': 94, 'pregnancy': 95,
                'neonatal': 96, 'congenital': 97, 'heartblock': 98, 'ssa': 99, 'ssb': 100,
                'antibody': 101, 'positive': 102, 'titer': 103, 'speckled': 104, 'homogeneous': 105,
                'chronic': 106, 'relapsing': 107, 'multisystem': 108, 'organ': 109, 'damage': 110,
                'prednisone': 111, 'steroid': 112, 'taper': 113, 'burst': 114, 'maintenance': 115,
                'infection': 116, 'risk': 117, 'vaccination': 118, 'screening': 119, 'monitoring': 120,
                // Rank 121-180: General rheumatology
                'rheumatology': 121, 'rheumatologist': 122, 'specialist': 123, 'referral': 124, 'diagnosis': 125,
                'differential': 126, 'workup': 127, 'laboratory': 128, 'blood': 129, 'test': 130,
                'inflammation': 131, 'crp': 132, 'esr': 133, 'sed': 134, 'rate': 135,
                'joint': 136, 'pain': 137, 'swelling': 138, 'stiffness': 139, 'morning': 140,
                'arthritis': 141, 'synovitis': 142, 'effusion': 143, 'swollen': 144, 'tender': 145,
                'methotrexate': 146, 'infusion': 147, 'injection': 148, 'medication': 149, 'therapy': 150,
                'treatment': 151, 'drug': 152, 'side': 153, 'effect': 154, 'toxicity': 155,
                'clinic': 156, 'visit': 157, 'followup': 158, 'appointment': 159, 'doctor': 160,
                'patient': 161, 'hospital': 162, 'admission': 163, 'discharge': 164, 'care': 165,
                'scleroderma': 166, 'sjogren': 167, 'myositis': 168, 'overlap': 169, 'mixed': 170,
                'vasculitis': 171, 'fibromyalgia': 172, 'gout': 180, 'osteoarthritis': 190, 'rheumatoid': 175,
                // Rank 200+: General medical and anatomy
                'medicine': 200, 'medical': 205, 'health': 210, 'disease': 215, 'condition': 220,
                'symptom': 225, 'sign': 230, 'physical': 235, 'exam': 240, 'finding': 245,
                'heart': 250, 'lung': 255, 'liver': 260, 'spleen': 265, 'lymph': 270,
                'node': 275, 'brain': 280, 'nerve': 285, 'muscle': 290, 'bone': 295,
                'cartilage': 300, 'tendon': 305, 'synovium': 310, 'ligament': 315, 'tissue': 320,
                // Rank 400+: Doctor life (more distant)
                'tired': 400, 'coffee': 420, 'pager': 450, 'rounds': 480, 'charting': 500,
                'call': 520, 'night': 540, 'shift': 560, 'resident': 580, 'attending': 600,
                // Rank 800+: Unrelated common words
                'water': 800, 'food': 850, 'sleep': 700, 'work': 650, 'time': 750,
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500, 'tree': 1600,
                'book': 1700, 'happy': 1800, 'sad': 1850, 'red': 900, 'blue': 950,
                'green': 1000, 'run': 1900, 'walk': 1950, 'eat': 2000, 'drink': 2050
            },
            'gout': {
                // Rank 1: Target
                'gout': 1,
                // Rank 2-5: Specific but requires knowledge
                'podagra': 2, 'tophi': 3, 'urate': 4, 'monosodium': 5,
                // Rank 6-15: Strong clinical associations
                'hyperuricemia': 6, 'tophus': 7, 'crystal': 8, 'birefringent': 9, 'needle': 10,
                'negatively': 11, 'polarized': 12, 'microscopy': 13, 'aspirate': 14, 'synovial': 15,
                // Rank 16-30: Key features and treatments
                'allopurinol': 16, 'febuxostat': 17, 'uloric': 18, 'colchicine': 19, 'probenecid': 20,
                'uricosuric': 21, 'xanthine': 22, 'oxidase': 23, 'inhibitor': 24, 'pegloticase': 25,
                'krystexxa': 26, 'rasburicase': 27, 'flare': 28, 'attack': 29, 'acute': 30,
                // Rank 31-50: Related clinical concepts
                'intercritical': 31, 'chronic': 32, 'tophaceous': 33, 'erosive': 34, 'destructive': 35,
                'purine': 36, 'metabolism': 37, 'overproduction': 38, 'underexcretion': 39, 'diet': 40,
                'alcohol': 41, 'beer': 42, 'wine': 43, 'spirits': 44, 'fructose': 45,
                'meat': 46, 'organ': 47, 'seafood': 48, 'shellfish': 49, 'anchovy': 50,
                // Rank 51-80: Clinical presentation
                'mtp': 51, 'metatarsophalangeal': 52, 'toe': 53, 'big': 54, 'first': 55,
                'ankle': 56, 'midfoot': 57, 'knee': 58, 'wrist': 59, 'finger': 60,
                'elbow': 61, 'olecranon': 62, 'bursa': 63, 'helix': 64, 'ear': 65,
                'red': 66, 'hot': 67, 'swollen': 68, 'exquisite': 69, 'tender': 70,
                'monoarticular': 71, 'monoarthritis': 72, 'sudden': 73, 'nocturnal': 74, 'night': 75,
                'onset': 76, 'rapid': 77, 'peak': 78, 'hours': 79, 'intense': 80,
                // Rank 81-120: Risk factors and comorbidities
                'male': 81, 'men': 82, 'postmenopausal': 83, 'women': 84, 'obesity': 85,
                'metabolic': 86, 'syndrome': 87, 'hypertension': 88, 'diabetes': 89, 'dyslipidemia': 90,
                'cardiovascular': 91, 'renal': 92, 'kidney': 93, 'stone': 94, 'nephrolithiasis': 95,
                'ckd': 96, 'diuretic': 97, 'thiazide': 98, 'loop': 99, 'furosemide': 100,
                'cyclosporine': 101, 'transplant': 102, 'aspirin': 103, 'low': 104, 'dose': 105,
                'lesch': 106, 'nyhan': 107, 'hgprt': 108, 'deficiency': 109, 'genetic': 110,
                'uric': 111, 'acid': 112, 'level': 113, 'elevated': 114, 'target': 115,
                'goal': 116, 'below': 117, 'six': 118, 'prophylaxis': 119, 'prevention': 120,
                // Rank 121-180: General rheumatology and treatment
                'nsaid': 121, 'indomethacin': 122, 'naproxen': 123, 'prednisone': 124, 'steroid': 125,
                'injection': 126, 'corticosteroid': 127, 'triamcinolone': 128, 'methylprednisolone': 129, 'burst': 130,
                'taper': 131, 'inflammation': 132, 'inflammatory': 133, 'arthritis': 134, 'joint': 135,
                'pain': 136, 'swelling': 137, 'effusion': 138, 'fluid': 139, 'aspiration': 140,
                'pseudogout': 141, 'cppd': 142, 'calcium': 143, 'pyrophosphate': 144, 'chondrocalcinosis': 145,
                'septic': 146, 'infectious': 147, 'cellulitis': 148, 'differential': 149, 'diagnosis': 150,
                'rheumatology': 151, 'rheumatologist': 152, 'specialist': 153, 'primary': 154, 'care': 155,
                'blood': 156, 'test': 157, 'lab': 158, 'workup': 159, 'xray': 160,
                'imaging': 161, 'ultrasound': 162, 'dect': 163, 'dual': 164, 'energy': 165,
                'ct': 166, 'punch': 167, 'out': 168, 'erosion': 169, 'overhanging': 170,
                'edge': 171, 'treatment': 172, 'medication': 173, 'therapy': 174, 'lifestyle': 175,
                'modification': 176, 'weight': 177, 'loss': 178, 'exercise': 179, 'hydration': 180,
                // Rank 200+: General medical
                'lupus': 200, 'autoimmune': 220, 'scleroderma': 240, 'vasculitis': 260, 'fibromyalgia': 280,
                'doctor': 300, 'patient': 310, 'hospital': 320, 'clinic': 330, 'medicine': 340,
                'bone': 350, 'cartilage': 360, 'tendon': 370, 'muscle': 380, 'synovium': 390,
                // Rank 400+: Doctor life
                'tired': 450, 'coffee': 480, 'pager': 500, 'rounds': 520, 'charting': 540,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500,
                'tree': 1600, 'book': 1700, 'happy': 1800, 'blue': 1900, 'green': 1950
            },
            'arthritis': {
                // Rank 1: Target
                'arthritis': 1,
                // Rank 2-5: Specific but requires knowledge
                'synovitis': 2, 'polyarthritis': 3, 'articular': 4, 'pannus': 5,
                // Rank 6-15: Strong clinical associations
                'rheumatoid': 6, 'erosion': 7, 'symmetric': 8, 'metacarpophalangeal': 9, 'mcp': 10,
                'pip': 11, 'proximal': 12, 'interphalangeal': 13, 'metatarsophalangeal': 14, 'mtp': 15,
                // Rank 16-30: Key features and treatments
                'morning': 16, 'stiffness': 17, 'swelling': 18, 'warmth': 19, 'tenderness': 20,
                'joint': 21, 'deformity': 22, 'swan': 23, 'neck': 24, 'boutonniere': 25,
                'ulnar': 26, 'deviation': 27, 'subluxation': 28, 'nodule': 29, 'rheumatoid': 30,
                // Rank 31-50: Related clinical concepts
                'factor': 31, 'rf': 32, 'ccp': 33, 'anti': 34, 'citrullinated': 35,
                'peptide': 36, 'acpa': 37, 'seropositive': 38, 'seronegative': 39, 'inflammatory': 40,
                'dmard': 41, 'methotrexate': 42, 'sulfasalazine': 43, 'hydroxychloroquine': 44, 'leflunomide': 45,
                'biologic': 46, 'humira': 47, 'enbrel': 48, 'remicade': 49, 'orencia': 50,
                // Rank 51-80: Clinical presentation
                'pain': 51, 'ache': 52, 'soreness': 53, 'discomfort': 54, 'limitation': 55,
                'range': 56, 'motion': 57, 'function': 58, 'disability': 59, 'quality': 60,
                'life': 61, 'work': 62, 'grip': 63, 'strength': 64, 'weakness': 65,
                'fatigue': 66, 'malaise': 67, 'fever': 68, 'weight': 69, 'loss': 70,
                'oligoarthritis': 71, 'monoarthritis': 72, 'pauciarticular': 73, 'large': 74, 'small': 75,
                'knee': 76, 'hip': 77, 'shoulder': 78, 'elbow': 79, 'wrist': 80,
                // Rank 81-120: Types and related conditions
                'osteoarthritis': 81, 'degenerative': 82, 'oa': 83, 'wear': 84, 'tear': 85,
                'psoriatic': 86, 'psa': 87, 'dactylitis': 88, 'sausage': 89, 'digit': 90,
                'ankylosing': 91, 'spondylitis': 92, 'sacroiliitis': 93, 'enthesitis': 94, 'axial': 95,
                'reactive': 96, 'reiter': 97, 'postinfectious': 98, 'septic': 99, 'infectious': 100,
                'gout': 101, 'pseudogout': 102, 'crystal': 103, 'juvenile': 104, 'jia': 105,
                'still': 106, 'disease': 107, 'adult': 108, 'onset': 109, 'systemic': 110,
                'cartilage': 111, 'bone': 112, 'subchondral': 113, 'sclerosis': 114, 'osteophyte': 115,
                'spur': 116, 'narrowing': 117, 'space': 118, 'xray': 119, 'imaging': 120,
                // Rank 121-180: Treatment and management
                'nsaid': 121, 'ibuprofen': 122, 'naproxen': 123, 'celecoxib': 124, 'prednisone': 125,
                'steroid': 126, 'injection': 127, 'corticosteroid': 128, 'infusion': 129, 'subcutaneous': 130,
                'tocilizumab': 131, 'actemra': 132, 'abatacept': 133, 'tofacitinib': 134, 'xeljanz': 135,
                'jak': 136, 'inhibitor': 137, 'baricitinib': 138, 'upadacitinib': 139, 'rinvoq': 140,
                'physical': 141, 'therapy': 142, 'occupational': 143, 'splint': 144, 'brace': 145,
                'surgery': 146, 'replacement': 147, 'arthroplasty': 148, 'synovectomy': 149, 'fusion': 150,
                'inflammation': 151, 'autoimmune': 152, 'immune': 153, 'flare': 154, 'remission': 155,
                'das28': 156, 'cdai': 157, 'sdai': 158, 'activity': 159, 'score': 160,
                'swollen': 161, 'tender': 162, 'count': 163, 'crp': 164, 'esr': 165,
                'diagnosis': 166, 'criteria': 167, 'acr': 168, 'eular': 169, 'treatment': 170,
                'target': 171, 'treat': 172, 'goal': 173, 'tight': 174, 'control': 175,
                'rheumatologist': 176, 'rheumatology': 177, 'specialist': 178, 'referral': 179, 'care': 180,
                // Rank 200+: General medical
                'lupus': 200, 'vasculitis': 220, 'scleroderma': 240, 'fibromyalgia': 260, 'myositis': 280,
                'doctor': 300, 'patient': 310, 'hospital': 320, 'clinic': 330, 'medicine': 340,
                'tendon': 350, 'muscle': 360, 'ligament': 370, 'synovium': 25, 'bursa': 380,
                // Rank 400+: Doctor life
                'tired': 450, 'coffee': 480, 'pager': 500, 'rounds': 520, 'charting': 540,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'vasculitis': {
                // Rank 1: Target
                'vasculitis': 1,
                // Rank 2-5: Specific but requires knowledge
                'anca': 2, 'granulomatosis': 3, 'polyangiitis': 4, 'mpo': 5,
                // Rank 6-15: Strong clinical associations
                'pr3': 6, 'proteinase': 7, 'myeloperoxidase': 8, 'wegener': 9, 'microscopic': 10,
                'polyarteritis': 11, 'nodosa': 12, 'temporal': 13, 'arteritis': 14, 'giant': 15,
                // Rank 16-30: Types of vasculitis
                'cell': 16, 'gca': 17, 'takayasu': 18, 'aortitis': 19, 'large': 20,
                'medium': 21, 'small': 22, 'vessel': 23, 'kawasaki': 24, 'iga': 25,
                'henoch': 26, 'schonlein': 27, 'purpura': 28, 'hsp': 29, 'leukocytoclastic': 30,
                // Rank 31-50: Clinical features
                'cryoglobulinemia': 31, 'cryoglobulin': 32, 'hepatitis': 33, 'eosinophilic': 34, 'churg': 35,
                'strauss': 36, 'egpa': 37, 'asthma': 38, 'eosinophilia': 39, 'neuropathy': 40,
                'mononeuritis': 41, 'multiplex': 42, 'foot': 43, 'drop': 44, 'wrist': 45,
                'palpable': 46, 'rash': 47, 'petechiae': 48, 'livedo': 49, 'reticularis': 50,
                // Rank 51-80: Organ involvement
                'glomerulonephritis': 51, 'crescentic': 52, 'rpgn': 53, 'rapidly': 54, 'progressive': 55,
                'kidney': 56, 'renal': 57, 'failure': 58, 'dialysis': 59, 'pulmonary': 60,
                'hemorrhage': 61, 'alveolar': 62, 'hemoptysis': 63, 'nodule': 64, 'cavitary': 65,
                'sinus': 66, 'nasal': 67, 'saddle': 68, 'nose': 69, 'deformity': 70,
                'ear': 71, 'hearing': 72, 'loss': 73, 'eye': 74, 'scleritis': 75,
                'episcleritis': 76, 'uveitis': 77, 'vision': 78, 'blindness': 79, 'ischemic': 80,
                // Rank 81-120: Symptoms and diagnosis
                'constitutional': 81, 'fever': 82, 'fatigue': 83, 'weight': 84, 'malaise': 85,
                'myalgia': 86, 'arthralgia': 87, 'headache': 88, 'jaw': 89, 'claudication': 90,
                'scalp': 91, 'tenderness': 92, 'temporal': 93, 'artery': 94, 'biopsy': 95,
                'skin': 96, 'nerve': 97, 'sural': 98, 'angiography': 99, 'cta': 100,
                'mra': 101, 'pet': 102, 'scan': 103, 'fdg': 104, 'uptake': 105,
                'inflammation': 106, 'vessel': 107, 'wall': 108, 'thickening': 109, 'stenosis': 110,
                'aneurysm': 111, 'occlusion': 112, 'thrombosis': 113, 'stroke': 114, 'infarct': 115,
                'blood': 116, 'artery': 117, 'vein': 118, 'capillary': 119, 'damage': 120,
                // Rank 121-180: Treatment
                'prednisone': 121, 'steroid': 122, 'high': 123, 'dose': 124, 'pulse': 125,
                'methylprednisolone': 126, 'cyclophosphamide': 127, 'cytoxan': 128, 'rituximab': 129, 'rituxan': 130,
                'azathioprine': 131, 'imuran': 132, 'methotrexate': 133, 'mycophenolate': 134, 'cellcept': 135,
                'tocilizumab': 136, 'actemra': 137, 'mepolizumab': 138, 'nucala': 139, 'avacopan': 140,
                'complement': 141, 'c5a': 142, 'inhibitor': 143, 'induction': 144, 'remission': 145,
                'maintenance': 146, 'relapse': 147, 'flare': 148, 'bvas': 149, 'activity': 150,
                'infusion': 151, 'injection': 152, 'treatment': 153, 'therapy': 154, 'immunosuppressant': 155,
                'plasmapheresis': 156, 'plasma': 157, 'exchange': 158, 'plex': 159, 'ivig': 160,
                'diagnosis': 161, 'criteria': 162, 'classification': 163, 'acr': 164, 'chapel': 165,
                'hill': 166, 'primary': 167, 'secondary': 168, 'autoimmune': 169, 'systemic': 170,
                'rheumatology': 171, 'rheumatologist': 172, 'nephrology': 173, 'pulmonology': 174, 'multidisciplinary': 175,
                'organ': 176, 'necrosis': 177, 'gangrene': 178, 'ulcer': 179, 'ischemia': 180,
                // Rank 200+: General medical
                'lupus': 200, 'arthritis': 220, 'scleroderma': 240, 'gout': 300, 'fibromyalgia': 280,
                'joint': 320, 'bone': 340, 'cartilage': 360, 'tendon': 380, 'muscle': 350,
                'doctor': 400, 'clinic': 420, 'hospital': 440, 'patient': 460, 'medicine': 480,
                // Rank 500+: Doctor life
                'tired': 550, 'coffee': 580, 'pager': 600, 'rounds': 620, 'charting': 640,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'scleroderma': {
                // Rank 1: Target
                'scleroderma': 1,
                // Rank 2-5: Specific but requires knowledge
                'sclerodactyly': 2, 'scl70': 3, 'anticentromere': 4, 'morphea': 5,
                // Rank 6-15: Strong clinical associations
                'crest': 6, 'calcinosis': 7, 'telangiectasia': 8, 'esophageal': 9, 'dysmotility': 10,
                'raynaud': 11, 'digital': 12, 'ulcer': 13, 'pitting': 14, 'scar': 15,
                // Rank 16-30: Key features
                'skin': 16, 'thickening': 17, 'hardening': 18, 'tightening': 19, 'induration': 20,
                'fibrosis': 21, 'collagen': 22, 'deposition': 23, 'puffy': 24, 'fingers': 25,
                'edematous': 26, 'phase': 27, 'rodnan': 28, 'score': 29, 'mrss': 30,
                // Rank 31-50: Types and subtypes
                'limited': 31, 'diffuse': 32, 'cutaneous': 33, 'systemic': 34, 'sclerosis': 35,
                'ssc': 36, 'lcssc': 37, 'dcssc': 38, 'sine': 39, 'overlap': 40,
                'mixed': 41, 'connective': 42, 'tissue': 43, 'disease': 44, 'mctd': 45,
                'undifferentiated': 46, 'uctd': 47, 'autoimmune': 48, 'antibody': 49, 'ana': 50,
                // Rank 51-80: Organ involvement
                'pulmonary': 51, 'arterial': 52, 'hypertension': 53, 'pah': 54, 'interstitial': 55,
                'lung': 56, 'ild': 57, 'nsip': 58, 'uip': 59, 'ground': 60,
                'glass': 61, 'honeycombing': 62, 'renal': 63, 'crisis': 64, 'src': 65,
                'kidney': 66, 'malignant': 67, 'hypertensive': 68, 'ace': 69, 'inhibitor': 70,
                'heart': 71, 'cardiac': 72, 'pericardial': 73, 'effusion': 74, 'myocardial': 75,
                'gastrointestinal': 76, 'gi': 77, 'reflux': 78, 'gerd': 79, 'dysphagia': 80,
                // Rank 81-120: Symptoms and diagnosis
                'swallowing': 81, 'difficulty': 82, 'watermelon': 83, 'stomach': 84, 'gave': 85,
                'constipation': 86, 'diarrhea': 87, 'malabsorption': 88, 'sibo': 89, 'bacterial': 90,
                'overgrowth': 91, 'cold': 92, 'sensitivity': 93, 'white': 94, 'blue': 95,
                'red': 96, 'triphasic': 97, 'color': 98, 'change': 99, 'vasospasm': 100,
                'nailfold': 101, 'capillaroscopy': 102, 'capillary': 103, 'dropout': 104, 'dilated': 105,
                'loops': 106, 'hemorrhage': 107, 'avascular': 108, 'area': 109, 'pattern': 110,
                'hand': 111, 'face': 112, 'mask': 113, 'facies': 114, 'microstomia': 115,
                'mouth': 116, 'small': 117, 'opening': 118, 'contracture': 119, 'flexion': 120,
                // Rank 121-180: Treatment and management
                'mycophenolate': 121, 'cellcept': 122, 'cyclophosphamide': 123, 'nintedanib': 124, 'ofev': 125,
                'tocilizumab': 126, 'actemra': 127, 'rituximab': 128, 'stem': 129, 'cell': 130,
                'transplant': 131, 'autologous': 132, 'hsct': 133, 'methotrexate': 134, 'azathioprine': 135,
                'bosentan': 136, 'tracleer': 137, 'ambrisentan': 138, 'sildenafil': 139, 'tadalafil': 140,
                'epoprostenol': 141, 'prostacyclin': 142, 'iloprost': 143, 'calcium': 144, 'channel': 145,
                'blocker': 146, 'nifedipine': 147, 'amlodipine': 148, 'physical': 149, 'therapy': 150,
                'occupational': 151, 'stretching': 152, 'exercise': 153, 'paraffin': 154, 'wax': 155,
                'prednisone': 156, 'steroid': 157, 'low': 158, 'dose': 159, 'treatment': 160,
                'diagnosis': 161, 'criteria': 162, 'acr': 163, 'eular': 164, 'classification': 165,
                'rheumatology': 166, 'rheumatologist': 167, 'pulmonologist': 168, 'cardiologist': 169, 'multidisciplinary': 170,
                'fatigue': 171, 'pain': 172, 'joint': 173, 'stiffness': 174, 'swelling': 175,
                'arthralgia': 176, 'myalgia': 177, 'weakness': 178, 'inflammation': 179, 'infusion': 180,
                // Rank 200+: Related conditions
                'lupus': 200, 'vasculitis': 220, 'arthritis': 240, 'myositis': 150, 'dermatomyositis': 160,
                'polymyositis': 170, 'sjogren': 180, 'gout': 300, 'fibromyalgia': 280,
                'bone': 320, 'cartilage': 340, 'tendon': 360, 'muscle': 250, 'synovium': 380,
                'doctor': 400, 'clinic': 420, 'hospital': 440, 'patient': 460, 'medicine': 480,
                // Rank 500+: Doctor life
                'tired': 550, 'coffee': 580, 'pager': 600, 'rounds': 620, 'charting': 640,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'fibromyalgia': {
                // Rank 1: Target
                'fibromyalgia': 1,
                // Rank 2-5: Specific but requires knowledge
                'tender': 2, 'points': 3, 'widespread': 4, 'centralized': 5,
                // Rank 6-15: Strong clinical associations
                'sensitization': 6, 'hyperalgesia': 7, 'allodynia': 8, 'wpi': 9, 'sss': 10,
                'polysymptomatic': 11, 'distress': 12, 'nociplastic': 13, 'pain': 14, 'amplification': 15,
                // Rank 16-30: Key features
                'chronic': 16, 'diffuse': 17, 'musculoskeletal': 18, 'fatigue': 19, 'unrefreshing': 20,
                'sleep': 21, 'insomnia': 22, 'nonrestorative': 23, 'fog': 24, 'brain': 25,
                'cognitive': 26, 'dysfunction': 27, 'concentration': 28, 'memory': 29, 'forgetfulness': 30,
                // Rank 31-50: Symptoms and associations
                'headache': 31, 'tension': 32, 'migraine': 33, 'ibs': 34, 'irritable': 35,
                'bowel': 36, 'syndrome': 37, 'interstitial': 38, 'cystitis': 39, 'bladder': 40,
                'tmj': 41, 'temporomandibular': 42, 'jaw': 43, 'restless': 44, 'legs': 45,
                'rls': 46, 'paresthesia': 47, 'numbness': 48, 'tingling': 49, 'sensitivity': 50,
                // Rank 51-80: Related symptoms
                'light': 51, 'sound': 52, 'smell': 53, 'temperature': 54, 'weather': 55,
                'anxiety': 56, 'depression': 57, 'mood': 58, 'disorder': 59, 'ptsd': 60,
                'trauma': 61, 'stress': 62, 'psychosocial': 63, 'catastrophizing': 64, 'coping': 65,
                'stiffness': 66, 'morning': 67, 'ache': 68, 'soreness': 69, 'muscle': 70,
                'exhaustion': 71, 'tired': 72, 'malaise': 73, 'weakness': 74, 'deconditioning': 75,
                'flare': 76, 'trigger': 77, 'exacerbation': 78, 'remission': 79, 'fluctuating': 80,
                // Rank 81-120: Diagnosis and criteria
                'diagnosis': 81, 'exclusion': 82, 'criteria': 83, 'acr': 84, '2010': 85,
                '2016': 86, 'revision': 87, 'clinical': 88, 'assessment': 89, 'questionnaire': 90,
                'fiq': 91, 'impact': 92, 'severity': 93, 'functional': 94, 'status': 95,
                'normal': 96, 'labs': 97, 'workup': 98, 'negative': 99, 'inflammation': 100,
                'esr': 101, 'crp': 102, 'ana': 103, 'thyroid': 104, 'vitamin': 105,
                'd': 106, 'b12': 107, 'iron': 108, 'deficiency': 109, 'hypothyroid': 110,
                'overlap': 111, 'comorbid': 112, 'coexist': 113, 'secondary': 114, 'primary': 115,
                'central': 116, 'nervous': 117, 'system': 118, 'neurotransmitter': 119, 'serotonin': 120,
                // Rank 121-180: Treatment
                'pregabalin': 121, 'lyrica': 122, 'duloxetine': 123, 'cymbalta': 124, 'milnacipran': 125,
                'savella': 126, 'amitriptyline': 127, 'tricyclic': 128, 'antidepressant': 129, 'snri': 130,
                'gabapentin': 131, 'neurontin': 132, 'cyclobenzaprine': 133, 'flexeril': 134, 'relaxant': 135,
                'tramadol': 136, 'low': 137, 'dose': 138, 'naltrexone': 139, 'ldn': 140,
                'exercise': 141, 'aerobic': 142, 'walking': 143, 'swimming': 144, 'aquatic': 145,
                'physical': 146, 'therapy': 147, 'stretching': 148, 'yoga': 149, 'tai': 150,
                'chi': 151, 'meditation': 152, 'mindfulness': 153, 'cbt': 154, 'behavioral': 155,
                'sleep': 156, 'hygiene': 157, 'pacing': 158, 'activity': 159, 'graded': 160,
                'multidisciplinary': 161, 'approach': 162, 'education': 163, 'patient': 164, 'self': 165,
                'management': 166, 'treatment': 167, 'nonpharmacologic': 168, 'pharmacologic': 169, 'combination': 170,
                'rheumatology': 171, 'rheumatologist': 172, 'pain': 173, 'specialist': 174, 'clinic': 175,
                'doctor': 176, 'appointment': 177, 'followup': 178, 'chronic': 179, 'condition': 180,
                // Rank 200+: Related conditions
                'lupus': 220, 'arthritis': 240, 'scleroderma': 260, 'vasculitis': 280, 'gout': 300,
                'myofascial': 55, 'chronic': 60, 'fatigue': 65, 'cfs': 70, 'me': 75,
                'joint': 320, 'bone': 340, 'cartilage': 360, 'tendon': 380, 'synovium': 400,
                // Rank 450+: Doctor life
                'coffee': 480, 'pager': 500, 'rounds': 520, 'charting': 540, 'hospital': 450,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'joint': {
                // Rank 1: Target
                'joint': 1,
                // Rank 2-5: Specific but requires knowledge
                'articular': 2, 'articulation': 3, 'diarthrodial': 4, 'synovial': 5,
                // Rank 6-15: Strong clinical associations
                'capsule': 6, 'cavity': 7, 'space': 8, 'cartilage': 9, 'synovium': 10,
                'ligament': 11, 'tendon': 12, 'meniscus': 13, 'labrum': 14, 'bursa': 15,
                // Rank 16-30: Types and locations
                'knee': 16, 'hip': 17, 'shoulder': 18, 'elbow': 19, 'wrist': 20,
                'ankle': 21, 'finger': 22, 'toe': 23, 'spine': 24, 'facet': 25,
                'sacroiliac': 26, 'si': 27, 'temporomandibular': 28, 'tmj': 29, 'sternoclavicular': 30,
                // Rank 31-50: Function and movement
                'movement': 31, 'motion': 32, 'range': 33, 'rom': 34, 'flexibility': 35,
                'flexion': 36, 'extension': 37, 'rotation': 38, 'abduction': 39, 'adduction': 40,
                'pronation': 41, 'supination': 42, 'pivot': 43, 'hinge': 44, 'ball': 45,
                'socket': 46, 'gliding': 47, 'saddle': 48, 'condyloid': 49, 'ellipsoid': 50,
                // Rank 51-80: Pathology
                'pain': 51, 'ache': 52, 'soreness': 53, 'swelling': 54, 'effusion': 55,
                'stiffness': 56, 'morning': 57, 'inflammation': 58, 'synovitis': 59, 'arthritis': 60,
                'osteoarthritis': 61, 'oa': 62, 'rheumatoid': 63, 'ra': 64, 'gout': 65,
                'pseudogout': 66, 'septic': 67, 'infectious': 68, 'crystal': 69, 'deposition': 70,
                'injury': 71, 'sprain': 72, 'strain': 73, 'tear': 74, 'rupture': 75,
                'dislocation': 76, 'subluxation': 77, 'instability': 78, 'laxity': 79, 'hypermobility': 80,
                // Rank 81-120: Treatment and procedures
                'injection': 81, 'aspiration': 82, 'arthrocentesis': 83, 'steroid': 84, 'corticosteroid': 85,
                'hyaluronic': 86, 'viscosupplementation': 87, 'prp': 88, 'platelet': 89, 'rich': 90,
                'replacement': 91, 'arthroplasty': 92, 'total': 93, 'tka': 94, 'tha': 95,
                'arthroscopy': 96, 'scope': 97, 'surgery': 98, 'prosthetic': 99, 'implant': 100,
                'fusion': 101, 'arthrodesis': 102, 'osteotomy': 103, 'debridement': 104, 'lavage': 105,
                'physical': 106, 'therapy': 107, 'pt': 108, 'exercise': 109, 'stretch': 110,
                'strengthen': 111, 'mobilization': 112, 'manipulation': 113, 'brace': 114, 'splint': 115,
                'support': 116, 'orthotic': 117, 'assistive': 118, 'device': 119, 'cane': 120,
                // Rank 121-180: Diagnosis and imaging
                'xray': 121, 'radiograph': 122, 'mri': 123, 'ultrasound': 124, 'ct': 125,
                'imaging': 126, 'narrowing': 127, 'osteophyte': 128, 'spur': 129, 'erosion': 130,
                'bone': 131, 'subchondral': 132, 'sclerosis': 133, 'cyst': 134, 'loose': 135,
                'body': 136, 'mouse': 137, 'fluid': 138, 'analysis': 139, 'culture': 140,
                'count': 141, 'cell': 142, 'wbc': 143, 'diagnosis': 144, 'examination': 145,
                'palpation': 146, 'crepitus': 147, 'grinding': 148, 'clicking': 149, 'popping': 150,
                'swollen': 151, 'red': 152, 'warm': 153, 'hot': 154, 'tender': 155,
                'limited': 156, 'restricted': 157, 'mobility': 158, 'function': 159, 'disability': 160,
                'chronic': 161, 'acute': 162, 'subacute': 163, 'recurrent': 164, 'progressive': 165,
                'degenerative': 166, 'inflammatory': 167, 'autoimmune': 168, 'treatment': 169, 'management': 170,
                'prednisone': 171, 'nsaid': 172, 'dmard': 173, 'biologic': 174, 'methotrexate': 175,
                'infusion': 176, 'humira': 177, 'enbrel': 178, 'remicade': 179, 'medication': 180,
                // Rank 200+: Related conditions
                'lupus': 220, 'vasculitis': 260, 'scleroderma': 280, 'fibromyalgia': 240, 'myositis': 300,
                'muscle': 200, 'nerve': 320, 'connective': 340, 'tissue': 360, 'collagen': 380,
                'doctor': 400, 'clinic': 420, 'hospital': 440, 'rheumatologist': 390, 'orthopedic': 395,
                // Rank 500+: Doctor life
                'tired': 550, 'coffee': 580, 'pager': 600, 'rounds': 620, 'charting': 640,
                // Rank 800+: Unrelated
                'water': 800, 'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'cartilage': {
                // Rank 1: Target
                'cartilage': 1,
                // Rank 2-5: Specific but requires knowledge
                'chondrocyte': 2, 'articular': 3, 'hyaline': 4, 'fibrocartilage': 5,
                // Rank 6-15: Strong clinical associations
                'meniscus': 6, 'labrum': 7, 'disc': 8, 'intervertebral': 9, 'elastic': 10,
                'proteoglycan': 11, 'aggrecan': 12, 'collagen': 13, 'type': 14, 'ii': 15,
                // Rank 16-30: Structure and function
                'matrix': 16, 'extracellular': 17, 'ecm': 18, 'ground': 19, 'substance': 20,
                'water': 21, 'content': 22, 'avascular': 23, 'aneural': 24, 'alymphatic': 25,
                'cushion': 26, 'shock': 27, 'absorber': 28, 'smooth': 29, 'surface': 30,
                // Rank 31-50: Locations and types
                'knee': 31, 'hip': 32, 'shoulder': 33, 'ankle': 34, 'elbow': 35,
                'wrist': 36, 'finger': 37, 'toe': 38, 'spine': 39, 'rib': 40,
                'nose': 41, 'ear': 42, 'trachea': 43, 'larynx': 44, 'epiglottis': 45,
                'costal': 46, 'thyroid': 47, 'cricoid': 48, 'arytenoid': 49, 'growth': 50,
                // Rank 51-80: Pathology
                'damage': 51, 'injury': 52, 'tear': 53, 'defect': 54, 'lesion': 55,
                'degeneration': 56, 'wear': 57, 'erosion': 58, 'loss': 59, 'thinning': 60,
                'fibrillation': 61, 'fissure': 62, 'crack': 63, 'fragment': 64, 'loose': 65,
                'body': 66, 'flap': 67, 'osteochondral': 68, 'ocd': 69, 'osteochondritis': 70,
                'dissecans': 71, 'chondromalacia': 72, 'patella': 73, 'softening': 74, 'breakdown': 75,
                'osteoarthritis': 76, 'oa': 77, 'degenerative': 78, 'arthritis': 79, 'joint': 80,
                // Rank 81-120: Diagnosis and imaging
                'mri': 81, 'imaging': 82, 'xray': 83, 'narrowing': 84, 'space': 85,
                'bone': 86, 'subchondral': 87, 'edema': 88, 'cyst': 89, 'osteophyte': 90,
                'spur': 91, 'arthroscopy': 92, 'scope': 93, 'visualization': 94, 'grading': 95,
                'outerbridge': 96, 'classification': 97, 'grade': 98, 'severity': 99, 'full': 100,
                'thickness': 101, 'partial': 102, 'superficial': 103, 'deep': 104, 'subchondral': 105,
                'diagnosis': 106, 'examination': 107, 'crepitus': 108, 'grinding': 109, 'clicking': 110,
                'popping': 111, 'catching': 112, 'locking': 113, 'mechanical': 114, 'symptom': 115,
                'pain': 116, 'swelling': 117, 'effusion': 118, 'stiffness': 119, 'limited': 120,
                // Rank 121-180: Treatment
                'repair': 121, 'restoration': 122, 'regeneration': 123, 'healing': 124, 'microfracture': 125,
                'drilling': 126, 'abrasion': 127, 'chondroplasty': 128, 'debridement': 129, 'transplant': 130,
                'oats': 131, 'mosaicplasty': 132, 'autograft': 133, 'allograft': 134, 'aci': 135,
                'autologous': 136, 'chondrocyte': 137, 'implantation': 138, 'maci': 139, 'scaffold': 140,
                'stem': 141, 'cell': 142, 'prp': 143, 'platelet': 144, 'rich': 145,
                'plasma': 146, 'hyaluronic': 147, 'acid': 148, 'viscosupplementation': 149, 'injection': 150,
                'surgery': 151, 'arthroscopic': 152, 'open': 153, 'replacement': 154, 'arthroplasty': 155,
                'physical': 156, 'therapy': 157, 'exercise': 158, 'strengthening': 159, 'flexibility': 160,
                'weight': 161, 'loss': 162, 'offloading': 163, 'brace': 164, 'orthotic': 165,
                'nsaid': 166, 'glucosamine': 167, 'chondroitin': 168, 'supplement': 169, 'treatment': 170,
                'synovium': 171, 'tendon': 172, 'ligament': 173, 'muscle': 174, 'inflammation': 175,
                'rheumatoid': 176, 'autoimmune': 177, 'gout': 178, 'crystal': 179, 'steroid': 180,
                // Rank 200+: General medical
                'lupus': 240, 'vasculitis': 260, 'scleroderma': 280, 'fibromyalgia': 300, 'prednisone': 220,
                'methotrexate': 320, 'infusion': 340, 'doctor': 400, 'clinic': 420, 'hospital': 440,
                // Rank 500+: Doctor life
                'tired': 550, 'coffee': 580, 'pager': 600, 'rounds': 620, 'charting': 640,
                // Rank 800+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'synovium': {
                // Rank 1: Target
                'synovium': 1,
                // Rank 2-5: Specific but requires knowledge
                'synoviocyte': 2, 'intima': 3, 'subintima': 4, 'villous': 5,
                // Rank 6-15: Strong clinical associations
                'synovial': 6, 'membrane': 7, 'lining': 8, 'layer': 9, 'capsule': 10,
                'fluid': 11, 'joint': 12, 'hyaluronic': 13, 'lubricin': 14, 'lubrication': 15,
                // Rank 16-30: Pathology
                'synovitis': 16, 'inflammation': 17, 'pannus': 18, 'proliferation': 19, 'hyperplasia': 20,
                'hypertrophy': 21, 'thickening': 22, 'boggy': 23, 'doughy': 24, 'swelling': 25,
                'effusion': 26, 'warmth': 27, 'erythema': 28, 'tenderness': 29, 'pain': 30,
                // Rank 31-50: Disease associations
                'rheumatoid': 31, 'arthritis': 32, 'ra': 33, 'erosion': 34, 'bone': 35,
                'destruction': 36, 'cartilage': 37, 'damage': 38, 'autoimmune': 39, 'attack': 40,
                'immune': 41, 'infiltrate': 42, 'lymphocyte': 43, 't': 44, 'cell': 45,
                'macrophage': 46, 'fibroblast': 47, 'cytokine': 48, 'tnf': 49, 'alpha': 50,
                // Rank 51-80: Mediators and mechanisms
                'interleukin': 51, 'il1': 52, 'il6': 53, 'il17': 54, 'interferon': 55,
                'prostaglandin': 56, 'metalloproteinase': 57, 'mmp': 58, 'collagenase': 59, 'stromelysin': 60,
                'rankl': 61, 'osteoclast': 62, 'angiogenesis': 63, 'neovascularization': 64, 'vegf': 65,
                'hypoxia': 66, 'oxidative': 67, 'stress': 68, 'apoptosis': 69, 'survival': 70,
                'nfkb': 71, 'jak': 72, 'stat': 73, 'signaling': 74, 'pathway': 75,
                'target': 76, 'therapeutic': 77, 'biologic': 78, 'small': 79, 'molecule': 80,
                // Rank 81-120: Diagnosis and procedures
                'aspiration': 81, 'arthrocentesis': 82, 'analysis': 83, 'cell': 84, 'count': 85,
                'wbc': 86, 'differential': 87, 'neutrophil': 88, 'crystal': 89, 'microscopy': 90,
                'polarized': 91, 'culture': 92, 'gram': 93, 'stain': 94, 'infection': 95,
                'biopsy': 96, 'needle': 97, 'arthroscopic': 98, 'histology': 99, 'pathology': 100,
                'ultrasound': 101, 'doppler': 102, 'power': 103, 'mri': 104, 'contrast': 105,
                'enhancement': 106, 'imaging': 107, 'diagnosis': 108, 'inflammation': 109, 'active': 110,
                'disease': 111, 'activity': 112, 'flare': 113, 'remission': 114, 'monitoring': 115,
                'knee': 116, 'hip': 117, 'shoulder': 118, 'wrist': 119, 'ankle': 120,
                // Rank 121-180: Treatment
                'injection': 121, 'steroid': 122, 'corticosteroid': 123, 'triamcinolone': 124, 'methylprednisolone': 125,
                'dmard': 126, 'methotrexate': 127, 'sulfasalazine': 128, 'hydroxychloroquine': 129, 'leflunomide': 130,
                'humira': 131, 'adalimumab': 132, 'enbrel': 133, 'etanercept': 134, 'remicade': 135,
                'infliximab': 136, 'rituximab': 137, 'abatacept': 138, 'tocilizumab': 139, 'tofacitinib': 140,
                'baricitinib': 141, 'upadacitinib': 142, 'infusion': 143, 'subcutaneous': 144, 'oral': 145,
                'prednisone': 146, 'nsaid': 147, 'synovectomy': 148, 'surgical': 149, 'radiation': 150,
                'treatment': 151, 'therapy': 152, 'management': 153, 'control': 154, 'suppression': 155,
                'tendon': 156, 'ligament': 157, 'muscle': 158, 'bursa': 159, 'sheath': 160,
                'tenosynovitis': 161, 'tenosynovium': 162, 'trigger': 163, 'finger': 164, 'dequervain': 165,
                'gout': 166, 'pseudogout': 167, 'cppd': 168, 'septic': 169, 'infectious': 170,
                'lupus': 171, 'psoriatic': 172, 'ankylosing': 173, 'spondyloarthritis': 174, 'reactive': 175,
                'osteoarthritis': 176, 'oa': 177, 'secondary': 178, 'inflammatory': 179, 'noninflammatory': 180,
                // Rank 200+: General
                'vasculitis': 220, 'scleroderma': 240, 'fibromyalgia': 280, 'myositis': 260, 'doctor': 300,
                'clinic': 320, 'hospital': 340, 'rheumatologist': 290, 'specialist': 295,
                // Rank 400+: Doctor life
                'tired': 450, 'coffee': 480, 'pager': 500, 'rounds': 520, 'charting': 540,
                // Rank 800+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'tendon': {
                // Rank 1: Target
                'tendon': 1,
                // Rank 2-5: Specific but requires knowledge
                'tenocyte': 2, 'enthesis': 3, 'paratenon': 4, 'epitenon': 5,
                // Rank 6-15: Strong clinical associations
                'tendinopathy': 6, 'tendinitis': 7, 'tendinosis': 8, 'enthesopathy': 9, 'enthesitis': 10,
                'collagen': 11, 'fiber': 12, 'bundle': 13, 'fascicle': 14, 'crimp': 15,
                // Rank 16-30: Specific tendons
                'achilles': 16, 'rotator': 17, 'cuff': 18, 'supraspinatus': 19, 'infraspinatus': 20,
                'subscapularis': 21, 'biceps': 22, 'triceps': 23, 'patellar': 24, 'quadriceps': 25,
                'hamstring': 26, 'adductor': 27, 'iliopsoas': 28, 'gluteal': 29, 'tibialis': 30,
                // Rank 31-50: Conditions
                'tear': 31, 'rupture': 32, 'partial': 33, 'complete': 34, 'full': 35,
                'thickness': 36, 'strain': 37, 'sprain': 38, 'overuse': 39, 'repetitive': 40,
                'degeneration': 41, 'microtear': 42, 'calcific': 43, 'calcification': 44, 'deposit': 45,
                'tennis': 46, 'elbow': 47, 'lateral': 48, 'epicondylitis': 49, 'epicondylopathy': 50,
                // Rank 51-80: More conditions and anatomy
                'golfer': 51, 'medial': 52, 'jumper': 53, 'knee': 54, 'runner': 55,
                'plantar': 56, 'fasciitis': 57, 'fascia': 58, 'dequervain': 59, 'stenosing': 60,
                'tenosynovitis': 61, 'trigger': 62, 'finger': 63, 'thumb': 64, 'sheath': 65,
                'synovium': 66, 'fluid': 67, 'effusion': 68, 'ganglion': 69, 'cyst': 70,
                'muscle': 71, 'attachment': 72, 'insertion': 73, 'origin': 74, 'bone': 75,
                'periosteum': 76, 'junction': 77, 'myotendinous': 78, 'musculotendinous': 79, 'aponeurosis': 80,
                // Rank 81-120: Symptoms and diagnosis
                'pain': 81, 'ache': 82, 'soreness': 83, 'tenderness': 84, 'palpation': 85,
                'swelling': 86, 'thickening': 87, 'nodule': 88, 'crepitus': 89, 'snapping': 90,
                'weakness': 91, 'strength': 92, 'loss': 93, 'function': 94, 'disability': 95,
                'stiffness': 96, 'morning': 97, 'warmup': 98, 'phenomenon': 99, 'movement': 100,
                'ultrasound': 101, 'mri': 102, 'imaging': 103, 'hypoechoic': 104, 'heterogeneous': 105,
                'thickened': 106, 'irregular': 107, 'neovascularization': 108, 'doppler': 109, 'flow': 110,
                'xray': 111, 'calcification': 112, 'spur': 113, 'diagnosis': 114, 'clinical': 115,
                'examination': 116, 'test': 117, 'special': 118, 'provocative': 119, 'maneuver': 120,
                // Rank 121-180: Treatment
                'rest': 121, 'ice': 122, 'compression': 123, 'elevation': 124, 'rice': 125,
                'nsaid': 126, 'ibuprofen': 127, 'naproxen': 128, 'topical': 129, 'gel': 130,
                'injection': 131, 'steroid': 132, 'corticosteroid': 133, 'cortisone': 134, 'prp': 135,
                'platelet': 136, 'rich': 137, 'plasma': 138, 'prolotherapy': 139, 'dextrose': 140,
                'physical': 141, 'therapy': 142, 'exercise': 143, 'eccentric': 144, 'loading': 145,
                'stretch': 146, 'strengthening': 147, 'progressive': 148, 'resistance': 149, 'isometric': 150,
                'brace': 151, 'splint': 152, 'strap': 153, 'counterforce': 154, 'support': 155,
                'surgery': 156, 'repair': 157, 'reconstruction': 158, 'debridement': 159, 'release': 160,
                'shockwave': 161, 'eswt': 162, 'extracorporeal': 163, 'dry': 164, 'needling': 165,
                'treatment': 166, 'management': 167, 'conservative': 168, 'operative': 169, 'rehabilitation': 170,
                'joint': 171, 'cartilage': 172, 'ligament': 173, 'inflammation': 174, 'arthritis': 175,
                'rheumatoid': 176, 'psoriatic': 177, 'spondyloarthritis': 178, 'gout': 179, 'fluoroquinolone': 180,
                // Rank 200+: General
                'lupus': 250, 'vasculitis': 280, 'scleroderma': 300, 'fibromyalgia': 260, 'autoimmune': 220,
                'doctor': 350, 'clinic': 380, 'hospital': 400, 'orthopedic': 320, 'sports': 330,
                // Rank 450+: Doctor life
                'tired': 500, 'coffee': 530, 'pager': 550, 'rounds': 570, 'charting': 590,
                'swollen': 140,
                // Rank 800+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'bone': {
                // Rank 1: Target
                'bone': 1,
                // Rank 2-5: Specific but requires knowledge
                'osteocyte': 2, 'osteoblast': 3, 'osteoclast': 4, 'osseous': 5,
                // Rank 6-15: Strong clinical associations
                'cortical': 6, 'trabecular': 7, 'cancellous': 8, 'compact': 9, 'spongy': 10,
                'periosteum': 11, 'endosteum': 12, 'marrow': 13, 'medullary': 14, 'cavity': 15,
                // Rank 16-30: Structure and components
                'matrix': 16, 'collagen': 17, 'hydroxyapatite': 18, 'calcium': 19, 'phosphate': 20,
                'mineral': 21, 'density': 22, 'bmd': 23, 'mass': 24, 'strength': 25,
                'remodeling': 26, 'turnover': 27, 'formation': 28, 'resorption': 29, 'coupling': 30,
                // Rank 31-50: Specific bones
                'skeleton': 31, 'axial': 32, 'appendicular': 33, 'skull': 34, 'cranium': 35,
                'spine': 36, 'vertebra': 37, 'cervical': 38, 'thoracic': 39, 'lumbar': 40,
                'sacrum': 41, 'coccyx': 42, 'rib': 43, 'sternum': 44, 'clavicle': 45,
                'scapula': 46, 'humerus': 47, 'radius': 48, 'ulna': 49, 'carpals': 50,
                // Rank 51-80: More bones and pathology
                'metacarpal': 51, 'phalanx': 52, 'pelvis': 53, 'ilium': 54, 'ischium': 55,
                'pubis': 56, 'femur': 57, 'patella': 58, 'tibia': 59, 'fibula': 60,
                'tarsals': 61, 'metatarsal': 62, 'calcaneus': 63, 'talus': 64, 'long': 65,
                'short': 66, 'flat': 67, 'irregular': 68, 'sesamoid': 69, 'epiphysis': 70,
                'diaphysis': 71, 'metaphysis': 72, 'growth': 73, 'plate': 74, 'physis': 75,
                'fracture': 76, 'break': 77, 'crack': 78, 'stress': 79, 'pathologic': 80,
                // Rank 81-120: Conditions and diseases
                'osteoporosis': 81, 'osteopenia': 82, 'fragility': 83, 'compression': 84, 'vertebral': 85,
                'hip': 86, 'wrist': 87, 'colles': 88, 'distal': 89, 'proximal': 90,
                'healing': 91, 'callus': 92, 'union': 93, 'nonunion': 94, 'malunion': 95,
                'osteomyelitis': 96, 'infection': 97, 'septic': 98, 'osteonecrosis': 99, 'avascular': 100,
                'necrosis': 101, 'avn': 102, 'infarct': 103, 'paget': 104, 'disease': 105,
                'metastasis': 106, 'cancer': 107, 'myeloma': 108, 'lesion': 109, 'lytic': 110,
                'blastic': 111, 'tumor': 112, 'primary': 113, 'secondary': 114, 'benign': 115,
                'malignant': 116, 'erosion': 117, 'destruction': 118, 'damage': 119, 'loss': 120,
                // Rank 121-180: Diagnosis and treatment
                'xray': 121, 'radiograph': 122, 'dexa': 123, 'dxa': 124, 'scan': 125,
                'tscore': 126, 'zscore': 127, 'mri': 128, 'ct': 129, 'scintigraphy': 130,
                'imaging': 131, 'diagnosis': 132, 'screening': 133, 'frax': 134, 'risk': 135,
                'bisphosphonate': 136, 'alendronate': 137, 'fosamax': 138, 'risedronate': 139, 'actonel': 140,
                'zoledronic': 141, 'reclast': 142, 'denosumab': 143, 'prolia': 144, 'xgeva': 145,
                'teriparatide': 146, 'forteo': 147, 'abaloparatide': 148, 'tymlos': 149, 'romosozumab': 150,
                'evenity': 151, 'raloxifene': 152, 'evista': 153, 'hormone': 154, 'therapy': 155,
                'calcium': 156, 'vitamin': 157, 'd': 158, 'supplement': 159, 'diet': 160,
                'exercise': 161, 'weight': 162, 'bearing': 163, 'resistance': 164, 'fall': 165,
                'prevention': 166, 'treatment': 167, 'management': 168, 'orthopedic': 169, 'surgery': 170,
                'joint': 171, 'cartilage': 172, 'tendon': 173, 'ligament': 174, 'muscle': 175,
                'synovium': 176, 'inflammation': 177, 'arthritis': 178, 'rheumatoid': 179, 'osteoarthritis': 180,
                // Rank 200+: Related conditions
                'lupus': 220, 'gout': 260, 'vasculitis': 280, 'scleroderma': 300, 'prednisone': 190,
                'steroid': 195, 'glucocorticoid': 200, 'induced': 205, 'giop': 210, 'fibromyalgia': 320,
                'pain': 240, 'ache': 245, 'doctor': 350, 'clinic': 380, 'hospital': 400,
                // Rank 450+: Doctor life
                'tired': 500, 'coffee': 530, 'pager': 550, 'rounds': 570, 'charting': 590,
                // Rank 800+: Unrelated
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'prednisone': {
                'prednisone': 1, 'steroid': 2, 'corticosteroid': 3, 'glucocorticoid': 4, 'prednisolone': 5,
                'methylprednisolone': 6, 'medrol': 7, 'solumedrol': 8, 'dexamethasone': 9, 'hydrocortisone': 10,
                'cortisone': 11, 'anti': 12, 'inflammatory': 13, 'immunosuppressive': 14, 'dose': 15,
                'taper': 16, 'burst': 17, 'pulse': 18, 'high': 19, 'low': 20,
                'mg': 21, 'pill': 22, 'tablet': 23, 'oral': 24, 'iv': 25,
                'side': 26, 'effect': 27, 'weight': 28, 'gain': 29, 'moon': 30,
                'face': 31, 'buffalo': 32, 'hump': 33, 'diabetes': 34, 'glucose': 35,
                'osteoporosis': 36, 'bone': 37, 'loss': 38, 'infection': 39, 'risk': 40,
                'insomnia': 41, 'mood': 42, 'swing': 43, 'anxiety': 44, 'cataracts': 45,
                'glaucoma': 46, 'adrenal': 47, 'suppression': 48, 'withdrawal': 49, 'taper': 50,
                'lupus': 55, 'arthritis': 60, 'vasculitis': 65, 'inflammation': 70, 'flare': 75,
                'treatment': 80, 'medication': 85, 'drug': 90, 'prescription': 95, 'doctor': 100,
                'methotrexate': 120, 'humira': 150, 'infusion': 180, 'injection': 130,
                'joint': 200, 'pain': 110, 'swelling': 115, 'autoimmune': 90,
                'clinic': 300, 'hospital': 350, 'rounds': 400, 'charting': 450,
                'tired': 250, 'coffee': 500, 'pager': 550, 'diagnosis': 160,
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'methotrexate': {
                'methotrexate': 1, 'mtx': 2, 'dmard': 3, 'disease': 4, 'modifying': 5,
                'antirheumatic': 6, 'drug': 7, 'immunosuppressant': 8, 'folic': 9, 'acid': 10,
                'folate': 11, 'weekly': 12, 'dose': 13, 'tablet': 14, 'injection': 15,
                'subcutaneous': 16, 'oral': 17, 'mg': 18, 'rheumatoid': 19, 'arthritis': 20,
                'psoriatic': 21, 'lupus': 22, 'vasculitis': 23, 'treatment': 24, 'first': 25,
                'line': 26, 'anchor': 27, 'combination': 28, 'biologic': 29, 'humira': 30,
                'enbrel': 31, 'remicade': 32, 'efficacy': 33, 'response': 34, 'remission': 35,
                'side': 36, 'effect': 37, 'nausea': 38, 'liver': 39, 'toxicity': 40,
                'blood': 41, 'count': 42, 'monitoring': 43, 'lab': 44, 'test': 45,
                'pregnancy': 46, 'contraindicated': 47, 'teratogenic': 48, 'alcohol': 49, 'avoid': 50,
                'prednisone': 55, 'steroid': 60, 'inflammation': 65, 'joint': 70, 'pain': 75,
                'swelling': 80, 'stiffness': 85, 'autoimmune': 90, 'immune': 95, 'system': 100,
                'infusion': 150, 'clinic': 200, 'hospital': 250, 'doctor': 180,
                'diagnosis': 300, 'bone': 350, 'cartilage': 400, 'tendon': 450,
                'tired': 500, 'coffee': 550, 'pager': 600, 'rounds': 650,
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'humira': {
                'humira': 1, 'adalimumab': 2, 'biologic': 3, 'tnf': 4, 'inhibitor': 5,
                'anti': 6, 'tumor': 7, 'necrosis': 8, 'factor': 9, 'monoclonal': 10,
                'antibody': 11, 'injection': 12, 'subcutaneous': 13, 'pen': 14, 'syringe': 15,
                'biweekly': 16, 'every': 17, 'two': 18, 'weeks': 19, 'refrigerate': 20,
                'rheumatoid': 21, 'arthritis': 22, 'psoriatic': 23, 'ankylosing': 24, 'spondylitis': 25,
                'crohn': 26, 'colitis': 27, 'psoriasis': 28, 'uveitis': 29, 'hidradenitis': 30,
                'biosimilar': 31, 'hadlima': 32, 'hyrimoz': 33, 'cyltezo': 34, 'amjevita': 35,
                'enbrel': 36, 'remicade': 37, 'simponi': 38, 'cimzia': 39, 'biologic': 40,
                'dmard': 41, 'methotrexate': 42, 'combination': 43, 'therapy': 44, 'efficacy': 45,
                'remission': 46, 'response': 47, 'treatment': 48, 'failure': 49, 'switch': 50,
                'infection': 55, 'risk': 60, 'tb': 65, 'tuberculosis': 70, 'screening': 75,
                'hepatitis': 80, 'side': 85, 'effect': 90, 'reaction': 95, 'site': 100,
                'prednisone': 150, 'steroid': 180, 'infusion': 120, 'lupus': 200,
                'joint': 250, 'inflammation': 130, 'autoimmune': 110, 'pain': 160,
                'doctor': 300, 'clinic': 350, 'hospital': 400, 'rounds': 450,
                'tired': 500, 'coffee': 550, 'pager': 600, 'charting': 650,
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'infusion': {
                'infusion': 1, 'iv': 2, 'intravenous': 3, 'drip': 4, 'bag': 5,
                'saline': 6, 'pump': 7, 'line': 8, 'catheter': 9, 'port': 10,
                'center': 11, 'chair': 12, 'suite': 13, 'nurse': 14, 'monitor': 15,
                'rate': 16, 'slow': 17, 'fast': 18, 'hour': 19, 'duration': 20,
                'remicade': 21, 'infliximab': 22, 'rituxan': 23, 'rituximab': 24, 'orencia': 25,
                'abatacept': 26, 'actemra': 27, 'tocilizumab': 28, 'benlysta': 29, 'belimumab': 30,
                'biologic': 31, 'medication': 32, 'treatment': 33, 'therapy': 34, 'rheumatoid': 35,
                'arthritis': 36, 'lupus': 37, 'vasculitis': 38, 'autoimmune': 39, 'disease': 40,
                'reaction': 41, 'allergic': 42, 'premedication': 43, 'benadryl': 44, 'tylenol': 45,
                'steroid': 46, 'prednisone': 47, 'solumedrol': 48, 'side': 49, 'effect': 50,
                'injection': 55, 'humira': 60, 'enbrel': 65, 'methotrexate': 70, 'dmard': 75,
                'joint': 100, 'inflammation': 80, 'pain': 90, 'swelling': 95, 'flare': 85,
                'doctor': 150, 'clinic': 120, 'hospital': 130, 'appointment': 140,
                'rounds': 200, 'charting': 250, 'pager': 300, 'tired': 350,
                'coffee': 400, 'bone': 450, 'cartilage': 500, 'tendon': 550,
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'steroid': {
                'steroid': 1, 'corticosteroid': 2, 'glucocorticoid': 3, 'prednisone': 4, 'prednisolone': 5,
                'methylprednisolone': 6, 'dexamethasone': 7, 'hydrocortisone': 8, 'cortisone': 9, 'medrol': 10,
                'solumedrol': 11, 'anti': 12, 'inflammatory': 13, 'immunosuppressive': 14, 'hormone': 15,
                'adrenal': 16, 'cortex': 17, 'cortisol': 18, 'dose': 19, 'taper': 20,
                'burst': 21, 'pulse': 22, 'high': 23, 'low': 24, 'mg': 25,
                'oral': 26, 'iv': 27, 'injection': 28, 'topical': 29, 'inhaled': 30,
                'side': 31, 'effect': 32, 'weight': 33, 'gain': 34, 'moon': 35,
                'face': 36, 'diabetes': 37, 'osteoporosis': 38, 'infection': 39, 'risk': 40,
                'insomnia': 41, 'mood': 42, 'cataracts': 43, 'glaucoma': 44, 'thin': 45,
                'skin': 46, 'bruising': 47, 'adrenal': 48, 'suppression': 49, 'withdrawal': 50,
                'inflammation': 55, 'lupus': 60, 'arthritis': 65, 'vasculitis': 70, 'flare': 75,
                'treatment': 80, 'medication': 85, 'drug': 90, 'prescription': 95, 'doctor': 100,
                'methotrexate': 120, 'humira': 150, 'infusion': 130, 'biologic': 140,
                'joint': 180, 'pain': 110, 'swelling': 115, 'autoimmune': 105,
                'clinic': 250, 'hospital': 300, 'rounds': 350, 'charting': 400,
                'tired': 200, 'coffee': 450, 'pager': 500, 'bone': 160,
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'antibody': {
                'antibody': 1, 'immunoglobulin': 2, 'ig': 3, 'igg': 4, 'igm': 5,
                'iga': 6, 'ige': 7, 'protein': 8, 'immune': 9, 'system': 10,
                'b': 11, 'cell': 12, 'plasma': 13, 'antigen': 14, 'binding': 15,
                'specific': 16, 'response': 17, 'autoantibody': 18, 'ana': 19, 'antinuclear': 20,
                'dsdna': 21, 'smith': 22, 'rnp': 23, 'ssa': 24, 'ssb': 25,
                'anca': 26, 'rf': 27, 'rheumatoid': 28, 'factor': 29, 'ccp': 30,
                'anti': 31, 'citrullinated': 32, 'peptide': 33, 'lupus': 34, 'arthritis': 35,
                'vasculitis': 36, 'sjogren': 37, 'scleroderma': 38, 'myositis': 39, 'autoimmune': 40,
                'test': 41, 'blood': 42, 'lab': 43, 'titer': 44, 'positive': 45,
                'negative': 46, 'diagnosis': 47, 'marker': 48, 'disease': 49, 'activity': 50,
                'monoclonal': 55, 'biologic': 60, 'humira': 65, 'rituximab': 70, 'infusion': 75,
                'treatment': 80, 'therapy': 85, 'target': 90, 'inflammation': 95, 'joint': 100,
                'prednisone': 150, 'methotrexate': 180, 'steroid': 200, 'bone': 250,
                'cartilage': 300, 'tendon': 350, 'synovium': 120, 'doctor': 400,
                'clinic': 450, 'hospital': 500, 'rounds': 550, 'charting': 600,
                'tired': 650, 'coffee': 700, 'pager': 750, 'biopsy': 110,
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'inflammation': {
                'inflammation': 1, 'inflammatory': 2, 'swelling': 3, 'redness': 4, 'heat': 5,
                'pain': 6, 'loss': 7, 'function': 8, 'acute': 9, 'chronic': 10,
                'cytokine': 11, 'tnf': 12, 'interleukin': 13, 'il6': 14, 'il1': 15,
                'prostaglandin': 16, 'leukotriene': 17, 'histamine': 18, 'mediator': 19, 'cascade': 20,
                'immune': 21, 'response': 22, 'neutrophil': 23, 'macrophage': 24, 'lymphocyte': 25,
                'autoimmune': 26, 'arthritis': 27, 'lupus': 28, 'vasculitis': 29, 'ibd': 30,
                'crp': 31, 'esr': 32, 'sed': 33, 'rate': 34, 'marker': 35,
                'elevated': 36, 'blood': 37, 'test': 38, 'lab': 39, 'diagnosis': 40,
                'treatment': 41, 'anti': 42, 'nsaid': 43, 'steroid': 44, 'prednisone': 45,
                'biologic': 46, 'dmard': 47, 'methotrexate': 48, 'humira': 49, 'infusion': 50,
                'joint': 55, 'synovitis': 60, 'tendinitis': 65, 'bursitis': 70, 'myositis': 75,
                'swollen': 80, 'red': 85, 'warm': 90, 'tender': 95, 'stiff': 100,
                'bone': 150, 'cartilage': 180, 'tendon': 200, 'synovium': 120,
                'doctor': 250, 'clinic': 300, 'hospital': 350, 'rounds': 400,
                'tired': 450, 'coffee': 500, 'pager': 550, 'charting': 600,
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'autoimmune': {
                'autoimmune': 1, 'immune': 2, 'system': 3, 'self': 4, 'attack': 5,
                'antibody': 6, 'autoantibody': 7, 't': 8, 'cell': 9, 'b': 10,
                'lymphocyte': 11, 'tolerance': 12, 'loss': 13, 'dysregulation': 14, 'inflammation': 15,
                'disease': 16, 'disorder': 17, 'lupus': 18, 'rheumatoid': 19, 'arthritis': 20,
                'sjogren': 21, 'scleroderma': 22, 'vasculitis': 23, 'myositis': 24, 'thyroid': 25,
                'hashimoto': 26, 'graves': 27, 'ms': 28, 'multiple': 29, 'sclerosis': 30,
                'type1': 31, 'diabetes': 32, 'celiac': 33, 'crohn': 34, 'colitis': 35,
                'psoriasis': 36, 'vitiligo': 37, 'alopecia': 38, 'chronic': 39, 'flare': 40,
                'remission': 41, 'treatment': 42, 'immunosuppressant': 43, 'prednisone': 44, 'steroid': 45,
                'methotrexate': 46, 'biologic': 47, 'humira': 48, 'rituximab': 49, 'infusion': 50,
                'diagnosis': 55, 'ana': 60, 'blood': 65, 'test': 70, 'marker': 75,
                'joint': 80, 'pain': 85, 'swelling': 90, 'fatigue': 95, 'fever': 100,
                'bone': 150, 'cartilage': 180, 'tendon': 200, 'synovium': 130,
                'doctor': 250, 'clinic': 300, 'hospital': 350, 'rounds': 400,
                'tired': 120, 'coffee': 450, 'pager': 500, 'charting': 550,
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'biopsy': {
                'biopsy': 1, 'tissue': 2, 'sample': 3, 'specimen': 4, 'pathology': 5,
                'histology': 6, 'microscope': 7, 'examination': 8, 'diagnosis': 9, 'procedure': 10,
                'needle': 11, 'core': 12, 'punch': 13, 'excisional': 14, 'incisional': 15,
                'skin': 16, 'kidney': 17, 'renal': 18, 'liver': 19, 'lung': 20,
                'muscle': 21, 'nerve': 22, 'temporal': 23, 'artery': 24, 'salivary': 25,
                'gland': 26, 'lip': 27, 'bone': 28, 'marrow': 29, 'lymph': 30,
                'node': 31, 'synovial': 32, 'joint': 33, 'vasculitis': 34, 'lupus': 35,
                'nephritis': 36, 'sjogren': 37, 'sarcoidosis': 38, 'amyloidosis': 39, 'cancer': 40,
                'inflammation': 41, 'fibrosis': 42, 'granuloma': 43, 'necrosis': 44, 'infiltrate': 45,
                'stain': 46, 'immunofluorescence': 47, 'electron': 48, 'microscopy': 49, 'report': 50,
                'pathologist': 55, 'results': 60, 'findings': 65, 'abnormal': 70, 'normal': 75,
                'doctor': 80, 'specialist': 85, 'rheumatologist': 90, 'treatment': 95, 'plan': 100,
                'arthritis': 150, 'autoimmune': 120, 'antibody': 130, 'prednisone': 200,
                'methotrexate': 250, 'infusion': 300, 'steroid': 220, 'clinic': 350,
                'hospital': 400, 'rounds': 450, 'charting': 500, 'pager': 550,
                'tired': 600, 'coffee': 650, 'cartilage': 180, 'tendon': 280,
                'car': 1200, 'phone': 1300, 'computer': 1400, 'house': 1500
            },
            'clinic': {
                'clinic': 1, 'office': 2, 'appointment': 3, 'visit': 4, 'patient': 5,
                'doctor': 6, 'physician': 7, 'nurse': 8, 'staff': 9, 'receptionist': 10,
                'waiting': 11, 'room': 12, 'exam': 13, 'consultation': 14, 'follow': 15,
                'up': 16, 'new': 17, 'established': 18, 'schedule': 19, 'calendar': 20,
                'morning': 21, 'afternoon': 22, 'session': 23, 'outpatient': 24, 'ambulatory': 25,
                'rheumatology': 26, 'specialty': 27, 'subspecialty': 28, 'referral': 29, 'primary': 30,
                'care': 31, 'provider': 32, 'treatment': 33, 'diagnosis': 34, 'evaluation': 35,
                'assessment': 36, 'history': 37, 'physical': 38, 'examination': 39, 'lab': 40,
                'test': 41, 'imaging': 42, 'xray': 43, 'ultrasound': 44, 'injection': 45,
                'infusion': 46, 'procedure': 47, 'prescription': 48, 'medication': 49, 'education': 50,
                'hospital': 55, 'rounds': 60, 'charting': 65, 'note': 70, 'documentation': 75,
                'emr': 80, 'epic': 85, 'pager': 90, 'phone': 95, 'call': 100,
                'lupus': 150, 'arthritis': 180, 'joint': 200, 'inflammation': 220,
                'prednisone': 250, 'methotrexate': 280, 'humira': 300, 'steroid': 270,
                'tired': 120, 'coffee': 110, 'bone': 350, 'cartilage': 400,
                'car': 1200, 'computer': 500, 'house': 1500, 'autoimmune': 250
            },
            'rounds': {
                'rounds': 1, 'ward': 2, 'hospital': 3, 'inpatient': 4, 'team': 5,
                'attending': 6, 'fellow': 7, 'resident': 8, 'intern': 9, 'student': 10,
                'medical': 11, 'morning': 12, 'daily': 13, 'bedside': 14, 'teaching': 15,
                'presentation': 16, 'case': 17, 'discussion': 18, 'plan': 19, 'assessment': 20,
                'patient': 21, 'room': 22, 'visit': 23, 'examination': 24, 'history': 25,
                'physical': 26, 'labs': 27, 'imaging': 28, 'vitals': 29, 'overnight': 30,
                'events': 31, 'consult': 32, 'consultation': 33, 'rheumatology': 34, 'service': 35,
                'admission': 36, 'discharge': 37, 'transfer': 38, 'icu': 39, 'floor': 40,
                'note': 41, 'documentation': 42, 'charting': 43, 'orders': 44, 'medication': 45,
                'treatment': 46, 'diagnosis': 47, 'differential': 48, 'workup': 49, 'prognosis': 50,
                'clinic': 55, 'outpatient': 60, 'pager': 65, 'call': 70, 'night': 75,
                'shift': 80, 'schedule': 85, 'coverage': 90, 'handoff': 95, 'signout': 100,
                'lupus': 200, 'arthritis': 250, 'vasculitis': 280, 'inflammation': 300,
                'prednisone': 180, 'methotrexate': 220, 'infusion': 150, 'steroid': 190,
                'tired': 110, 'coffee': 105, 'joint': 350, 'bone': 400,
                'car': 1200, 'phone': 800, 'computer': 500, 'house': 1500
            },
            'pager': {
                'pager': 1, 'beep': 2, 'page': 3, 'call': 4, 'number': 5,
                'callback': 6, 'urgent': 7, 'stat': 8, 'emergency': 9, 'notification': 10,
                'hospital': 11, 'doctor': 12, 'physician': 13, 'resident': 14, 'intern': 15,
                'fellow': 16, 'attending': 17, 'nurse': 18, 'floor': 19, 'ward': 20,
                'consult': 21, 'consultation': 22, 'admission': 23, 'patient': 24, 'question': 25,
                'order': 26, 'medication': 27, 'lab': 28, 'result': 29, 'critical': 30,
                'value': 31, 'abnormal': 32, 'communication': 33, 'device': 34, 'electronic': 35,
                'battery': 36, 'clip': 37, 'belt': 38, 'pocket': 39, 'scrubs': 40,
                'coat': 41, 'white': 42, 'oncall': 43, 'night': 44, 'shift': 45,
                'coverage': 46, 'schedule': 47, 'rotation': 48, 'service': 49, 'duty': 50,
                'rounds': 55, 'clinic': 60, 'charting': 65, 'note': 70, 'documentation': 75,
                'tired': 80, 'coffee': 85, 'sleep': 90, 'rest': 95, 'break': 100,
                'lupus': 300, 'arthritis': 350, 'joint': 400, 'inflammation': 280,
                'prednisone': 250, 'methotrexate': 320, 'infusion': 200, 'steroid': 260,
                'diagnosis': 180, 'treatment': 190, 'bone': 450, 'cartilage': 500,
                'car': 1200, 'phone': 120, 'computer': 400, 'house': 1500
            },
            'charting': {
                'charting': 1, 'documentation': 2, 'note': 3, 'record': 4, 'emr': 5,
                'ehr': 6, 'epic': 7, 'cerner': 8, 'electronic': 9, 'medical': 10,
                'health': 11, 'progress': 12, 'assessment': 13, 'plan': 14, 'soap': 15,
                'subjective': 16, 'objective': 17, 'hpi': 18, 'history': 19, 'present': 20,
                'illness': 21, 'ros': 22, 'review': 23, 'systems': 24, 'physical': 25,
                'exam': 26, 'labs': 27, 'imaging': 28, 'diagnosis': 29, 'treatment': 30,
                'medication': 31, 'prescription': 32, 'order': 33, 'referral': 34, 'follow': 35,
                'up': 36, 'patient': 37, 'encounter': 38, 'visit': 39, 'clinic': 40,
                'hospital': 41, 'inpatient': 42, 'outpatient': 43, 'admission': 44, 'discharge': 45,
                'summary': 46, 'letter': 47, 'billing': 48, 'coding': 49, 'compliance': 50,
                'rounds': 55, 'pager': 60, 'tired': 65, 'coffee': 70, 'time': 75,
                'hours': 80, 'overtime': 85, 'work': 90, 'computer': 95, 'typing': 100,
                'lupus': 250, 'arthritis': 300, 'joint': 350, 'inflammation': 280,
                'prednisone': 200, 'methotrexate': 220, 'infusion': 180, 'steroid': 210,
                'doctor': 120, 'nurse': 130, 'bone': 400, 'cartilage': 450,
                'car': 1200, 'phone': 500, 'house': 1500, 'autoimmune': 320
            },
            'diagnosis': {
                'diagnosis': 1, 'diagnose': 2, 'diagnostic': 3, 'workup': 4, 'evaluation': 5,
                'assessment': 6, 'clinical': 7, 'criteria': 8, 'differential': 9, 'ddx': 10,
                'rule': 11, 'out': 12, 'confirm': 13, 'exclude': 14, 'definitive': 15,
                'presumptive': 16, 'provisional': 17, 'working': 18, 'final': 19, 'disease': 20,
                'condition': 21, 'disorder': 22, 'syndrome': 23, 'symptoms': 24, 'signs': 25,
                'history': 26, 'physical': 27, 'exam': 28, 'lab': 29, 'test': 30,
                'blood': 31, 'imaging': 32, 'xray': 33, 'mri': 34, 'ct': 35,
                'ultrasound': 36, 'biopsy': 37, 'pathology': 38, 'results': 39, 'findings': 40,
                'treatment': 41, 'plan': 42, 'prognosis': 43, 'outcome': 44, 'management': 45,
                'patient': 46, 'doctor': 47, 'physician': 48, 'specialist': 49, 'rheumatologist': 50,
                'lupus': 55, 'arthritis': 60, 'gout': 65, 'vasculitis': 70, 'scleroderma': 75,
                'autoimmune': 80, 'inflammation': 85, 'joint': 90, 'pain': 95, 'swelling': 100,
                'prednisone': 150, 'methotrexate': 180, 'humira': 200, 'steroid': 160,
                'clinic': 120, 'hospital': 130, 'rounds': 140, 'charting': 145,
                'tired': 250, 'coffee': 300, 'pager': 220, 'bone': 350,
                'car': 1200, 'phone': 800, 'computer': 600, 'house': 1500
            },
            'coffee': {
                'coffee': 1, 'caffeine': 2, 'espresso': 3, 'latte': 4, 'cappuccino': 5,
                'americano': 6, 'mocha': 7, 'brew': 8, 'drip': 9, 'bean': 10,
                'roast': 11, 'ground': 12, 'cup': 13, 'mug': 14, 'drink': 15,
                'beverage': 16, 'hot': 17, 'iced': 18, 'cold': 19, 'morning': 20,
                'wake': 21, 'energy': 22, 'boost': 23, 'alert': 24, 'awake': 25,
                'tired': 26, 'fatigue': 27, 'exhausted': 28, 'sleepy': 29, 'drowsy': 30,
                'break': 31, 'room': 32, 'lounge': 33, 'cafeteria': 34, 'hospital': 35,
                'clinic': 36, 'doctor': 37, 'nurse': 38, 'resident': 39, 'intern': 40,
                'rounds': 41, 'shift': 42, 'night': 43, 'oncall': 44, 'pager': 45,
                'work': 46, 'long': 47, 'hours': 48, 'charting': 49, 'documentation': 50,
                'tea': 55, 'water': 60, 'soda': 65, 'snack': 70, 'food': 75,
                'lunch': 80, 'breakfast': 85, 'dinner': 90, 'meal': 95, 'eat': 100,
                'lupus': 400, 'arthritis': 450, 'joint': 500, 'inflammation': 380,
                'prednisone': 350, 'methotrexate': 420, 'infusion': 300, 'steroid': 360,
                'diagnosis': 320, 'treatment': 340, 'bone': 550, 'cartilage': 600,
                'car': 800, 'phone': 700, 'computer': 500, 'house': 900
            },
            'tired': {
                'tired': 1, 'fatigue': 2, 'exhausted': 3, 'weary': 4, 'drained': 5,
                'sleepy': 6, 'drowsy': 7, 'worn': 8, 'out': 9, 'burnt': 10,
                'burnout': 11, 'stress': 12, 'overworked': 13, 'sleep': 14, 'deprived': 15,
                'insomnia': 16, 'rest': 17, 'nap': 18, 'energy': 19, 'low': 20,
                'coffee': 21, 'caffeine': 22, 'morning': 23, 'night': 24, 'shift': 25,
                'oncall': 26, 'pager': 27, 'hospital': 28, 'rounds': 29, 'clinic': 30,
                'doctor': 31, 'resident': 32, 'intern': 33, 'fellow': 34, 'attending': 35,
                'work': 36, 'hours': 37, 'long': 38, 'overtime': 39, 'schedule': 40,
                'charting': 41, 'documentation': 42, 'patient': 43, 'care': 44, 'demanding': 45,
                'difficult': 46, 'challenging': 47, 'busy': 48, 'hectic': 49, 'crazy': 50,
                'lupus': 100, 'fibromyalgia': 80, 'chronic': 55, 'fatigue': 2, 'syndrome': 60,
                'autoimmune': 90, 'inflammation': 120, 'disease': 130, 'symptom': 70, 'flare': 85,
                'arthritis': 200, 'joint': 250, 'pain': 150, 'muscle': 180, 'ache': 160,
                'prednisone': 300, 'steroid': 320, 'treatment': 280, 'medication': 290,
                'bone': 400, 'cartilage': 450, 'tendon': 380, 'diagnosis': 260,
                'car': 800, 'phone': 500, 'computer': 450, 'house': 900
            },
            'swollen': {
                'swollen': 1, 'swelling': 2, 'edema': 3, 'puffy': 4, 'bloated': 5,
                'inflamed': 6, 'enlarged': 7, 'distended': 8, 'fluid': 9, 'retention': 10,
                'joint': 11, 'knee': 12, 'ankle': 13, 'wrist': 14, 'finger': 15,
                'toe': 16, 'hand': 17, 'foot': 18, 'leg': 19, 'arm': 20,
                'arthritis': 21, 'inflammation': 22, 'synovitis': 23, 'effusion': 24, 'bursitis': 25,
                'tendinitis': 26, 'gout': 27, 'infection': 28, 'cellulitis': 29, 'injury': 30,
                'trauma': 31, 'sprain': 32, 'fracture': 33, 'red': 34, 'warm': 35,
                'hot': 36, 'painful': 37, 'tender': 38, 'stiff': 39, 'limited': 40,
                'movement': 41, 'range': 42, 'motion': 43, 'aspiration': 44, 'injection': 45,
                'steroid': 46, 'nsaid': 47, 'ice': 48, 'elevation': 49, 'compression': 50,
                'lupus': 80, 'vasculitis': 100, 'scleroderma': 120, 'rheumatoid': 60,
                'prednisone': 70, 'methotrexate': 150, 'humira': 180, 'infusion': 160,
                'diagnosis': 200, 'treatment': 90, 'doctor': 220, 'clinic': 250,
                'rounds': 300, 'charting': 350, 'pager': 280, 'tired': 400,
                'coffee': 450, 'bone': 140, 'cartilage': 130, 'tendon': 110,
                'car': 1200, 'phone': 800, 'computer': 900, 'house': 1100
            }
        };

        // Common words fallback for unrecognized words
        const commonWords = [
            'the', 'be', 'to', 'of', 'and', 'a', 'in', 'that', 'have', 'i',
            'it', 'for', 'not', 'on', 'with', 'he', 'as', 'you', 'do', 'at',
            'this', 'but', 'his', 'by', 'from', 'they', 'we', 'say', 'her', 'she',
            'or', 'an', 'will', 'my', 'one', 'all', 'would', 'there', 'their', 'what',
            'so', 'up', 'out', 'if', 'about', 'who', 'get', 'which', 'go', 'me',
            'when', 'make', 'can', 'like', 'time', 'no', 'just', 'him', 'know', 'take',
            'people', 'into', 'year', 'your', 'good', 'some', 'could', 'them', 'see', 'other',
            'than', 'then', 'now', 'look', 'only', 'come', 'its', 'over', 'think', 'also',
            'back', 'after', 'use', 'two', 'how', 'our', 'work', 'first', 'well', 'way',
            'even', 'new', 'want', 'because', 'any', 'these', 'give', 'day', 'most', 'us',
            'water', 'car', 'phone', 'computer', 'house', 'tree', 'book', 'happy', 'sad', 'big',
            'small', 'red', 'blue', 'green', 'yellow', 'food', 'eat', 'drink', 'run', 'walk',
            'sleep', 'talk', 'read', 'write', 'play', 'work', 'home', 'school', 'family', 'friend',
            'love', 'hate', 'help', 'need', 'try', 'call', 'feel', 'become', 'leave', 'put',
            'mean', 'keep', 'let', 'begin', 'seem', 'help', 'show', 'hear', 'play', 'run',
            'move', 'live', 'believe', 'hold', 'bring', 'happen', 'write', 'provide', 'sit', 'stand',
            'lose', 'pay', 'meet', 'include', 'continue', 'set', 'learn', 'change', 'lead', 'understand',
            'watch', 'follow', 'stop', 'create', 'speak', 'read', 'allow', 'add', 'spend', 'grow',
            'open', 'walk', 'win', 'offer', 'remember', 'consider', 'appear', 'buy', 'wait', 'serve',
            'die', 'send', 'expect', 'build', 'stay', 'fall', 'cut', 'reach', 'kill', 'remain'
        ];

        // ==================== GAME STATE ====================
        let gameState = {
            targetWord: '',
            targetIndex: 0,
            guesses: [],
            bestRank: Infinity,
            gameOver: false,
            gameWon: false,
            hardMode: false,
            hintsUsed: 0,
            maxHints: 3
        };

        // ==================== AUTOCORRECT ====================
        // Normalize words to handle plurals and common variations
        function normalizeWord(word) {
            const originalWord = word.toLowerCase().trim();

            // Check if the exact word exists first
            const rankings = wordRankings[gameState.targetWord];
            if (rankings && rankings[originalWord] !== undefined) {
                return { normalized: originalWord, wasAutocorrected: false };
            }

            // Check all target word rankings for the exact word
            for (const target of targetWords) {
                if (wordRankings[target][originalWord] !== undefined) {
                    return { normalized: originalWord, wasAutocorrected: false };
                }
            }

            // Try to find the base form
            let candidates = [];

            // Remove common plural endings
            if (originalWord.endsWith('ies') && originalWord.length > 3) {
                candidates.push(originalWord.slice(0, -3) + 'y'); // candies -> candy
            }
            if (originalWord.endsWith('es') && originalWord.length > 2) {
                candidates.push(originalWord.slice(0, -2)); // boxes -> box
                candidates.push(originalWord.slice(0, -1)); // cases -> case
            }
            if (originalWord.endsWith('s') && originalWord.length > 1) {
                candidates.push(originalWord.slice(0, -1)); // joints -> joint
            }

            // Remove common verb endings
            if (originalWord.endsWith('ing') && originalWord.length > 4) {
                candidates.push(originalWord.slice(0, -3)); // charting -> chart (but we have charting)
                candidates.push(originalWord.slice(0, -3) + 'e'); // typing -> type
            }
            if (originalWord.endsWith('ed') && originalWord.length > 3) {
                candidates.push(originalWord.slice(0, -2)); // inflamed -> inflam (not useful)
                candidates.push(originalWord.slice(0, -1)); // tired is base form
                candidates.push(originalWord.slice(0, -2) + 'e'); // diagnosed -> diagnose
            }

            // Handle -tion -> -te variations
            if (originalWord.endsWith('tion') && originalWord.length > 4) {
                candidates.push(originalWord.slice(0, -4) + 'te'); // inflammation stays, but inflame
            }

            // Common misspellings/variations
            const commonVariations = {
                'joints': 'joint',
                'bones': 'bone',
                'tendons': 'tendon',
                'steroids': 'steroid',
                'antibodies': 'antibody',
                'biopsies': 'biopsy',
                'diagnoses': 'diagnosis',
                'infusions': 'infusion',
                'clinics': 'clinic',
                'pagers': 'pager',
                'coffees': 'coffee',
                'flares': 'flare',
                'rashes': 'rash',
                'ulcers': 'ulcer',
                'symptoms': 'symptom',
                'treatments': 'treatment',
                'medications': 'medication',
                'injections': 'injection',
                'patients': 'patient',
                'doctors': 'doctor',
                'hospitals': 'hospital',
                'diseases': 'disease',
                'conditions': 'condition',
                'autoimmunity': 'autoimmune',
                'inflammatory': 'inflammation',
                'arthritic': 'arthritis',
                'inflamed': 'inflammation',
                'swells': 'swollen',
                'swell': 'swollen',
                'swelling': 'swollen',
                'fatigued': 'fatigue',
                'tiredness': 'tired',
                'exhausted': 'tired',
                'sleepy': 'tired',
                'diagnosed': 'diagnosis',
                'diagnosing': 'diagnosis',
                'treating': 'treatment',
                'treated': 'treatment'
            };

            if (commonVariations[originalWord]) {
                candidates.unshift(commonVariations[originalWord]); // Prioritize known variations
            }

            // Check each candidate
            for (const candidate of candidates) {
                // Check current target word rankings
                if (rankings && rankings[candidate] !== undefined) {
                    return { normalized: candidate, wasAutocorrected: true, original: originalWord };
                }

                // Check all target word rankings
                for (const target of targetWords) {
                    if (wordRankings[target][candidate] !== undefined) {
                        return { normalized: candidate, wasAutocorrected: true, original: originalWord };
                    }
                }
            }

            // Check if it's in common words
            if (commonWords.includes(originalWord)) {
                return { normalized: originalWord, wasAutocorrected: false };
            }

            // Check candidates against common words
            for (const candidate of candidates) {
                if (commonWords.includes(candidate)) {
                    return { normalized: candidate, wasAutocorrected: true, original: originalWord };
                }
            }

            // No match found
            return { normalized: originalWord, wasAutocorrected: false };
        }

        let stats = {
            played: 0,
            won: 0,
            totalGuesses: 0,
            bestWin: Infinity,
            currentStreak: 0,
            maxStreak: 0
        };

        // ==================== INITIALIZATION ====================
        function init() {
            loadStats();
            loadSettings();
            startNewGame();
            setupEventListeners();
        }

        function startNewGame() {
            // Pick random target word
            gameState.targetIndex = Math.floor(Math.random() * targetWords.length);
            gameState.targetWord = targetWords[gameState.targetIndex];
            gameState.guesses = [];
            gameState.bestRank = Infinity;
            gameState.gameOver = false;
            gameState.gameWon = false;
            gameState.hintsUsed = 0;

            // Reset UI
            document.getElementById('historyList').innerHTML = '';
            document.getElementById('guessCount').textContent = 'Guesses: 0';
            document.getElementById('bestRank').textContent = 'Best: -';
            document.getElementById('meterValue').textContent = '-';
            document.getElementById('meterHint').textContent = 'Enter a word to begin';
            document.getElementById('meterIndicator').classList.remove('active');
            document.getElementById('guessInput').value = '';
            document.getElementById('guessInput').disabled = false;
            document.getElementById('submitBtn').disabled = false;
            document.getElementById('giveUpBtn').style.display = 'inline-block';
            document.getElementById('errorMsg').textContent = '';
            document.getElementById('autocorrectMsg').textContent = '';

            // Reset hint UI
            document.getElementById('hintBtn').disabled = false;
            document.getElementById('hintBtn').style.display = 'inline-block';
            updateHintCount();

            // Reset joint diagram
            updateJointDiagram(Infinity);

            // Close any open modals
            closeAllModals();
        }

        function loadStats() {
            const saved = localStorage.getItem('rheumatexto_stats');
            if (saved) {
                stats = JSON.parse(saved);
            }
            updateStatsDisplay();
        }

        function saveStats() {
            localStorage.setItem('rheumatexto_stats', JSON.stringify(stats));
            updateStatsDisplay();
        }

        function loadSettings() {
            const lightMode = localStorage.getItem('rheumatexto_lightMode') === 'true';
            const hardMode = localStorage.getItem('rheumatexto_hardMode') === 'true';

            document.getElementById('lightModeToggle').checked = lightMode;
            document.getElementById('hardModeToggle').checked = hardMode;

            if (lightMode) {
                document.body.classList.add('light-mode');
            }
            gameState.hardMode = hardMode;
        }

        function saveSettings() {
            localStorage.setItem('rheumatexto_lightMode', document.getElementById('lightModeToggle').checked);
            localStorage.setItem('rheumatexto_hardMode', document.getElementById('hardModeToggle').checked);
        }

        // ==================== EVENT LISTENERS ====================
        function setupEventListeners() {
            // Submit guess
            document.getElementById('submitBtn').addEventListener('click', submitGuess);
            document.getElementById('guessInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') submitGuess();
            });

            // Modal buttons
            document.getElementById('helpBtn').addEventListener('click', () => openModal('helpModal'));
            document.getElementById('statsBtn').addEventListener('click', () => openModal('statsModal'));
            document.getElementById('settingsBtn').addEventListener('click', () => openModal('settingsModal'));

            // Settings toggles
            document.getElementById('lightModeToggle').addEventListener('change', (e) => {
                document.body.classList.toggle('light-mode', e.target.checked);
                saveSettings();
            });
            document.getElementById('hardModeToggle').addEventListener('change', (e) => {
                gameState.hardMode = e.target.checked;
                saveSettings();
            });

            // Give up
            document.getElementById('giveUpBtn').addEventListener('click', giveUp);

            // Hint button
            document.getElementById('hintBtn').addEventListener('click', useHint);

            // New game buttons
            document.getElementById('newGameBtn').addEventListener('click', () => {
                closeModal('winModal');
                startNewGame();
            });
            document.getElementById('newGameAfterGiveUp').addEventListener('click', () => {
                closeModal('giveUpModal');
                startNewGame();
            });

            // Share button
            document.getElementById('shareBtn').addEventListener('click', shareResult);

            // Close modals on overlay click
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.classList.remove('active');
                    }
                });
            });
        }

        // ==================== GAME LOGIC ====================
        function submitGuess() {
            if (gameState.gameOver) return;

            const input = document.getElementById('guessInput');
            const rawGuess = input.value.trim().toLowerCase();

            if (!rawGuess) return;

            // Apply autocorrect
            const { normalized: guess, wasAutocorrected, original } = normalizeWord(rawGuess);

            // Check if already guessed (check both original and normalized)
            if (gameState.guesses.find(g => g.word === guess || g.word === rawGuess)) {
                showError('Already guessed!');
                showAutocorrect('');
                input.value = '';
                return;
            }

            // Get rank for this guess
            const rank = getWordRank(guess);

            if (rank === -1) {
                showError('Word not recognized');
                showAutocorrect('');
                return;
            }

            // Clear error and input
            showError('');
            input.value = '';

            // Show autocorrect message if applicable
            if (wasAutocorrected) {
                showAutocorrect(`"${original}" ‚Üí "${guess}"`);
            } else {
                showAutocorrect('');
            }

            // Add guess
            const guessData = { word: guess, rank: rank };
            gameState.guesses.push(guessData);

            // Check if new best
            const isNewBest = rank < gameState.bestRank;
            if (isNewBest) {
                gameState.bestRank = rank;
            }

            // Update UI
            updateGuessDisplay(guessData, isNewBest);
            updateMeter(rank);
            updateJointDiagram(rank);
            updateGuessCount();

            // Check for win
            if (rank === 1) {
                handleWin();
            }
        }

        function getWordRank(word) {
            const rankings = wordRankings[gameState.targetWord];

            if (rankings[word] !== undefined) {
                return rankings[word];
            }

            // Check if it's a common word (give it a high rank)
            if (commonWords.includes(word)) {
                return 1500 + Math.floor(Math.random() * 500);
            }

            // Check if it's in any other target word's rankings
            for (const target of targetWords) {
                if (wordRankings[target][word] !== undefined) {
                    // Give it a modified rank based on semantic distance
                    return Math.min(2000, wordRankings[target][word] + 500);
                }
            }

            return -1; // Word not recognized
        }

        function updateGuessDisplay(guessData, isNewBest) {
            const historyList = document.getElementById('historyList');

            // Create new item
            const item = document.createElement('li');
            item.className = `history-item ${getRankClass(guessData.rank)}`;
            if (isNewBest && gameState.guesses.length > 1) {
                item.classList.add('new-best');
            }
            const hintClass = guessData.isHint ? 'hint-word' : '';
            item.innerHTML = `
                <span class="history-word ${hintClass}">${guessData.word}</span>
                <span class="history-rank">${guessData.rank}</span>
            `;

            // Sort guesses by rank
            const sortedGuesses = [...gameState.guesses].sort((a, b) => a.rank - b.rank);

            // Find position
            const position = sortedGuesses.findIndex(g => g.word === guessData.word);

            // Insert at correct position
            const existingItems = historyList.querySelectorAll('.history-item');
            if (position >= existingItems.length) {
                historyList.appendChild(item);
            } else {
                historyList.insertBefore(item, existingItems[position]);
            }

            // Update best rank display
            document.getElementById('bestRank').textContent = `Best: ${gameState.bestRank}`;
        }

        function getRankClass(rank) {
            if (rank <= 10) return 'rank-hot';
            if (rank <= 100) return 'rank-warm';
            if (rank <= 500) return 'rank-mild';
            if (rank <= 1000) return 'rank-cool';
            return 'rank-cold';
        }

        function updateMeter(rank) {
            const indicator = document.getElementById('meterIndicator');
            const valueEl = document.getElementById('meterValue');
            const hintEl = document.getElementById('meterHint');

            // Calculate position (inverse - lower rank = higher position)
            const maxRank = 2000;
            const position = Math.max(0, Math.min(100, (1 - rank / maxRank) * 100));

            indicator.style.left = `${position}%`;
            indicator.classList.add('active');

            // Update value with color
            valueEl.textContent = rank;
            valueEl.style.color = getRankColor(rank);

            // Update hint (unless hard mode)
            if (!gameState.hardMode) {
                hintEl.textContent = getHint(rank);
            } else {
                hintEl.textContent = '';
            }
        }

        function getRankColor(rank) {
            if (rank <= 10) return 'var(--accent-red)';
            if (rank <= 100) return 'var(--accent-orange)';
            if (rank <= 500) return 'var(--accent-yellow)';
            if (rank <= 1000) return 'var(--accent-blue)';
            return 'var(--accent-cold)';
        }

        function getHint(rank) {
            if (rank === 1) return 'üéâ DIAGNOSIS COMPLETE!';
            if (rank <= 5) return 'üî• ON FIRE! Almost there!';
            if (rank <= 10) return 'üî• Flaring! So close!';
            if (rank <= 20) return 'üò∞ You\'re close! Keep going!';
            if (rank <= 50) return 'üå°Ô∏è Getting warmer!';
            if (rank <= 100) return 'üëÄ Interesting... think related!';
            if (rank <= 300) return 'ü§î Lukewarm... try another angle';
            if (rank <= 500) return 'üòê Meh... keep thinking';
            if (rank <= 1000) return '‚ùÑÔ∏è Getting cold...';
            return 'ü•∂ Ice cold! Try something medical';
        }

        function updateJointDiagram(rank) {
            const joint = document.getElementById('jointDiagram');
            joint.classList.remove('inflamed-1', 'inflamed-2', 'inflamed-3', 'inflamed-4');

            if (rank <= 10) {
                joint.classList.add('inflamed-1');
            } else if (rank <= 100) {
                joint.classList.add('inflamed-2');
            } else if (rank <= 500) {
                joint.classList.add('inflamed-3');
            } else if (rank <= 1000) {
                joint.classList.add('inflamed-4');
            }
        }

        function updateGuessCount() {
            document.getElementById('guessCount').textContent = `Guesses: ${gameState.guesses.length}`;
        }

        function showError(msg) {
            document.getElementById('errorMsg').textContent = msg;
        }

        function showAutocorrect(msg) {
            document.getElementById('autocorrectMsg').textContent = msg;
        }

        // ==================== HINT SYSTEM ====================
        function getHintWord() {
            if (gameState.hintsUsed >= gameState.maxHints) return null;
            if (gameState.gameOver) return null;

            const rankings = wordRankings[gameState.targetWord];
            const guessedWords = new Set(gameState.guesses.map(g => g.word));

            // Get all words sorted by rank
            const sortedWords = Object.entries(rankings)
                .filter(([word, rank]) => !guessedWords.has(word) && word !== gameState.targetWord)
                .sort((a, b) => a[1] - b[1]);

            if (sortedWords.length === 0) return null;

            // Strategy: Give a word that's roughly halfway between current best and the answer
            // Or if no guesses yet, give something around rank 50-100
            let targetRank;

            if (gameState.bestRank === Infinity) {
                // No guesses yet - give a word around rank 50-100
                targetRank = 50 + Math.floor(Math.random() * 50);
            } else if (gameState.bestRank <= 10) {
                // Very close - give something just a bit closer (rank 2-5)
                targetRank = 2 + Math.floor(Math.random() * 4);
            } else if (gameState.bestRank <= 50) {
                // Close - give something halfway
                targetRank = Math.floor(gameState.bestRank / 2);
            } else {
                // Far away - give something roughly halfway to the answer
                targetRank = Math.floor(gameState.bestRank / 2);
            }

            // Find the word closest to our target rank
            let bestWord = null;
            let bestDiff = Infinity;

            for (const [word, rank] of sortedWords) {
                const diff = Math.abs(rank - targetRank);
                if (diff < bestDiff) {
                    bestDiff = diff;
                    bestWord = { word, rank };
                }
            }

            return bestWord;
        }

        function useHint() {
            if (gameState.gameOver) return;
            if (gameState.hintsUsed >= gameState.maxHints) {
                showError('No hints remaining!');
                return;
            }

            const hintWord = getHintWord();
            if (!hintWord) {
                showError('No hint available');
                return;
            }

            gameState.hintsUsed++;
            updateHintCount();

            // Add the hint word as a guess (marked as hint)
            const guessData = { word: hintWord.word, rank: hintWord.rank, isHint: true };
            gameState.guesses.push(guessData);

            // Check if new best
            const isNewBest = hintWord.rank < gameState.bestRank;
            if (isNewBest) {
                gameState.bestRank = hintWord.rank;
            }

            // Update UI
            showError('');
            showAutocorrect(`üí° Hint: "${hintWord.word.toUpperCase()}"`);
            updateGuessDisplay(guessData, isNewBest);
            updateMeter(hintWord.rank);
            updateJointDiagram(hintWord.rank);
            updateGuessCount();

            // Check for win (unlikely but possible)
            if (hintWord.rank === 1) {
                handleWin();
            }

            // Disable hint button if no hints left
            if (gameState.hintsUsed >= gameState.maxHints) {
                document.getElementById('hintBtn').disabled = true;
            }
        }

        function updateHintCount() {
            const remaining = gameState.maxHints - gameState.hintsUsed;
            document.getElementById('hintCount').textContent = `Hints used: ${gameState.hintsUsed}/${gameState.maxHints}`;
        }

        // ==================== WIN/LOSE ====================
        function handleWin() {
            gameState.gameOver = true;
            gameState.gameWon = true;

            // Update stats
            stats.played++;
            stats.won++;
            stats.totalGuesses += gameState.guesses.length;
            if (gameState.guesses.length < stats.bestWin) {
                stats.bestWin = gameState.guesses.length;
            }
            stats.currentStreak++;
            if (stats.currentStreak > stats.maxStreak) {
                stats.maxStreak = stats.currentStreak;
            }
            saveStats();

            // Disable input
            document.getElementById('guessInput').disabled = true;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('giveUpBtn').style.display = 'none';
            document.getElementById('hintBtn').style.display = 'none';

            // Show confetti
            createConfetti();

            // Show win modal after delay
            setTimeout(() => {
                document.getElementById('winWord').textContent = gameState.targetWord.toUpperCase();
                document.getElementById('winGuesses').textContent = gameState.guesses.length;
                createGuessVisualization();
                openModal('winModal');
            }, 1000);
        }

        function giveUp() {
            gameState.gameOver = true;
            gameState.gameWon = false;

            // Update stats
            stats.played++;
            stats.currentStreak = 0;
            saveStats();

            // Disable input
            document.getElementById('guessInput').disabled = true;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('giveUpBtn').style.display = 'none';
            document.getElementById('hintBtn').style.display = 'none';

            // Show reveal modal
            document.getElementById('revealWord').textContent = gameState.targetWord.toUpperCase();
            openModal('giveUpModal');
        }

        function createConfetti() {
            const colors = ['#e94560', '#ff6b35', '#f0c808', '#4da8da', '#7ec8e3', '#4caf50'];

            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = `${Math.random() * 100}vw`;
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDuration = `${2 + Math.random() * 2}s`;
                    document.body.appendChild(confetti);

                    setTimeout(() => confetti.remove(), 4000);
                }, i * 50);
            }
        }

        function createGuessVisualization() {
            const container = document.getElementById('guessVisualization');
            container.innerHTML = '';

            // Show last 20 guesses or all if fewer
            const recentGuesses = gameState.guesses.slice(-20);

            recentGuesses.forEach(guess => {
                const block = document.createElement('div');
                block.className = 'guess-block';

                if (guess.rank <= 10) {
                    block.style.backgroundColor = 'var(--accent-red)';
                } else if (guess.rank <= 100) {
                    block.style.backgroundColor = 'var(--accent-orange)';
                } else if (guess.rank <= 500) {
                    block.style.backgroundColor = 'var(--accent-yellow)';
                } else if (guess.rank <= 1000) {
                    block.style.backgroundColor = 'var(--accent-blue)';
                } else {
                    block.style.backgroundColor = 'var(--accent-cold)';
                }

                container.appendChild(block);
            });
        }

        function shareResult() {
            const guessBlocks = gameState.guesses.slice(-10).map(g => {
                if (g.rank <= 10) return 'üü•';
                if (g.rank <= 100) return 'üüß';
                if (g.rank <= 500) return 'üü®';
                if (g.rank <= 1000) return 'üü¶';
                return '‚¨ú';
            }).join('');

            const text = `Rheumatexto üî¨
Found: ${gameState.targetWord.toUpperCase()}
Guesses: ${gameState.guesses.length}
${guessBlocks}

Play at: [your-url-here]`;

            if (navigator.share) {
                navigator.share({ text });
            } else {
                navigator.clipboard.writeText(text).then(() => {
                    alert('Result copied to clipboard!');
                });
            }
        }

        // ==================== STATS ====================
        function updateStatsDisplay() {
            document.getElementById('statPlayed').textContent = stats.played;
            document.getElementById('statWon').textContent = stats.won;
            document.getElementById('statAvg').textContent = stats.won > 0
                ? Math.round(stats.totalGuesses / stats.won)
                : '-';
            document.getElementById('statBest').textContent = stats.bestWin === Infinity
                ? '-'
                : stats.bestWin;
            document.getElementById('statStreak').textContent = stats.currentStreak;
            document.getElementById('statMaxStreak').textContent = stats.maxStreak;
        }

        // ==================== MODALS ====================
        function openModal(id) {
            document.getElementById(id).classList.add('active');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        function closeAllModals() {
            document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('active'));
        }

        // Global close function for onclick handlers
        window.closeModal = closeModal;

        // ==================== START ====================
        init();
    </script>
</body>
</html>
