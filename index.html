<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rheumatexto - The Rheumatology Word Game</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                RHEUMATEXTO
                <span>The Rheumatology Word Game</span>
            </div>
            <div class="header-buttons">
                <button class="icon-btn" id="helpBtn" title="How to Play">?</button>
                <button class="icon-btn" id="statsBtn" title="Statistics">üìä</button>
                <button class="icon-btn" id="settingsBtn" title="Settings">‚öôÔ∏è</button>
            </div>
        </header>

        <div class="joint-container">
            <svg class="joint-svg" id="jointDiagram" viewBox="0 0 100 160">
                <defs>
                    <!-- Bone gradient -->
                    <linearGradient id="boneGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="#e0dcd5"/>
                        <stop offset="50%" stop-color="#f5f2ed"/>
                        <stop offset="100%" stop-color="#d5d0c8"/>
                    </linearGradient>
                    <!-- Cartilage gradient -->
                    <linearGradient id="cartGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#5ba3c0"/>
                        <stop offset="100%" stop-color="#3d8eb0"/>
                    </linearGradient>
                    <!-- Synovial fluid gradient (healthy) -->
                    <radialGradient id="fluidGrad" cx="50%" cy="50%" r="50%">
                        <stop offset="0%" stop-color="#c4e0ed" stop-opacity="0.6"/>
                        <stop offset="100%" stop-color="#7ec8e3" stop-opacity="0.3"/>
                    </radialGradient>
                    <!-- Inflamed fluid gradient -->
                    <radialGradient id="fluidInflamed" cx="50%" cy="50%" r="50%">
                        <stop offset="0%" stop-color="#ff6b6b" stop-opacity="0.8"/>
                        <stop offset="100%" stop-color="#e94560" stop-opacity="0.5"/>
                    </radialGradient>
                    <!-- Glow filter for inflammation -->
                    <filter id="inflammationGlow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    <!-- Tendon gradient -->
                    <linearGradient id="tendonGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="#d4c4b0"/>
                        <stop offset="50%" stop-color="#e8dcc8"/>
                        <stop offset="100%" stop-color="#d4c4b0"/>
                    </linearGradient>
                    <!-- Ligament gradient -->
                    <linearGradient id="ligamentGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#b8a890"/>
                        <stop offset="100%" stop-color="#a09080"/>
                    </linearGradient>
                </defs>

                <!-- Ligaments (behind bones) -->
                <g class="joint-ligaments">
                    <path class="ligament" d="M20 50 Q15 70 20 90" fill="none" stroke="url(#ligamentGrad)" stroke-width="4" stroke-linecap="round" opacity="0.7"/>
                    <path class="ligament" d="M80 50 Q85 70 80 90" fill="none" stroke="url(#ligamentGrad)" stroke-width="4" stroke-linecap="round" opacity="0.7"/>
                    <title>Ligaments</title>
                </g>

                <!-- Upper bone (femur-like) -->
                <g class="bone-upper">
                    <ellipse cx="50" cy="12" rx="18" ry="10" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                    <path d="M34 12 Q32 28 40 48 L60 48 Q68 28 66 12" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                    <ellipse class="joint-bone" cx="50" cy="50" rx="22" ry="12" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                    <!-- Bone texture lines -->
                    <line x1="46" y1="18" x2="45" y2="40" stroke="#c5beb0" stroke-width="1" opacity="0.5"/>
                    <line x1="54" y1="18" x2="55" y2="40" stroke="#c5beb0" stroke-width="1" opacity="0.5"/>
                    <title>Femur (Upper Bone)</title>
                </g>

                <!-- Upper cartilage -->
                <g class="cartilage-upper">
                    <ellipse class="joint-cartilage" cx="50" cy="58" rx="20" ry="4" fill="url(#cartGrad)"/>
                    <title>Articular Cartilage</title>
                </g>

                <!-- Meniscus (crescent shapes on sides) -->
                <g class="joint-meniscus">
                    <path class="meniscus" d="M28 68 Q22 70 28 72 Q35 70 28 68" fill="#4a9cb8" opacity="0.8"/>
                    <path class="meniscus" d="M72 68 Q78 70 72 72 Q65 70 72 68" fill="#4a9cb8" opacity="0.8"/>
                    <title>Meniscus</title>
                </g>

                <!-- Synovial fluid (changes with inflammation) -->
                <ellipse class="joint-fluid" cx="50" cy="70" rx="22" ry="8" fill="url(#fluidGrad)"/>

                <!-- Synovium/Joint capsule (inflames!) -->
                <ellipse class="joint-synovium" cx="50" cy="70" rx="26" ry="12" fill="none" stroke="#7ec8e3" stroke-width="2" opacity="0.5"/>

                <!-- Lower cartilage -->
                <g class="cartilage-lower">
                    <ellipse class="joint-cartilage" cx="50" cy="82" rx="20" ry="4" fill="url(#cartGrad)"/>
                    <title>Articular Cartilage</title>
                </g>

                <!-- Lower bone (tibia-like) -->
                <g class="bone-lower">
                    <ellipse class="joint-bone" cx="50" cy="90" rx="22" ry="12" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                    <path d="M40 92 Q32 112 34 138 L66 138 Q68 112 60 92" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                    <ellipse cx="50" cy="138" rx="18" ry="10" fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1.5"/>
                    <!-- Bone texture lines -->
                    <line x1="45" y1="100" x2="46" y2="130" stroke="#c5beb0" stroke-width="1" opacity="0.5"/>
                    <line x1="55" y1="100" x2="54" y2="130" stroke="#c5beb0" stroke-width="1" opacity="0.5"/>
                    <title>Tibia (Lower Bone)</title>
                </g>

                <!-- Tendons (on sides, connecting to muscles) -->
                <g class="joint-tendons">
                    <path class="tendon" d="M15 30 Q10 50 12 70 Q10 90 15 110" fill="none" stroke="url(#tendonGrad)" stroke-width="3" stroke-linecap="round" opacity="0.6"/>
                    <path class="tendon" d="M85 30 Q90 50 88 70 Q90 90 85 110" fill="none" stroke="url(#tendonGrad)" stroke-width="3" stroke-linecap="round" opacity="0.6"/>
                    <title>Tendons</title>
                </g>

                <!-- Hover labels (hidden by default, shown on hover via CSS) -->
                <g class="joint-labels" opacity="0">
                    <text x="50" y="8" text-anchor="middle" font-size="6" fill="var(--text-primary)">Bone</text>
                    <text x="50" y="60" text-anchor="middle" font-size="5" fill="var(--text-primary)">Cartilage</text>
                    <text x="50" y="72" text-anchor="middle" font-size="5" fill="var(--text-primary)">Synovium</text>
                    <text x="12" y="70" text-anchor="middle" font-size="5" fill="var(--text-primary)">Tendon</text>
                    <text x="22" y="60" text-anchor="middle" font-size="5" fill="var(--text-primary)">Ligament</text>
                </g>
            </svg>
        </div>

        <div class="meter-container">
            <div class="meter-label">
                <span>‚ùÑÔ∏è Cold</span>
                <span>üî• Flaring</span>
            </div>
            <div class="meter-bar">
                <div class="meter-indicator" id="meterIndicator"></div>
            </div>
            <div class="meter-value" id="meterValue">-</div>
            <div class="meter-hint" id="meterHint">Enter a word to begin</div>
        </div>

        <div class="input-container">
            <input type="text" class="guess-input" id="guessInput" placeholder="Type your guess..." autocomplete="off" autofocus>
            <button class="submit-btn" id="submitBtn">Guess</button>
        </div>
        <div class="error-msg" id="errorMsg"></div>
        <div class="autocorrect-msg" id="autocorrectMsg"></div>

        <div class="guess-count" id="guessCount">Guesses: 0</div>

        <div class="history-container">
            <div class="history-title">
                <span>Guess History</span>
                <span id="bestRank">Best: -</span>
            </div>
            <ul class="history-list" id="historyList"></ul>
        </div>

        <div class="action-buttons">
            <button class="hint-btn" id="hintBtn">üí° Get Hint</button>
            <button class="give-up-btn" id="giveUpBtn">Give Up</button>
        </div>
        <div class="hint-count" id="hintCount">Hints used: 0/3</div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">How to Play</h2>
                <button class="modal-close" onclick="closeModal('helpModal')">√ó</button>
            </div>
            <div class="modal-content">
                <p>Welcome to <strong>Rheumatexto</strong> ‚Äì the word guessing game for rheumatology enthusiasts!</p>

                <h3>üéØ Goal</h3>
                <p>Find the secret word! It's related to rheumatology, medicine, or the life of a doctor.</p>

                <h3>üéÆ How It Works</h3>
                <p>1. Type any word and submit your guess</p>
                <p>2. You'll see a <strong>rank</strong> showing how close your guess is:</p>
                <ul style="margin-left: 20px; margin-bottom: 15px;">
                    <li><span style="color: var(--accent-red)">1-10</span>: You're ON FIRE! üî•</li>
                    <li><span style="color: var(--accent-orange)">11-100</span>: Getting warm!</li>
                    <li><span style="color: var(--accent-yellow)">101-500</span>: Lukewarm</li>
                    <li><span style="color: var(--accent-blue)">501-1000</span>: Cool</li>
                    <li><span style="color: var(--accent-cold)">1000+</span>: Ice cold ‚ùÑÔ∏è</li>
                </ul>
                <p>3. Use the hints to guide your next guess</p>
                <p>4. Win by finding the exact word (Rank 1)!</p>

                <h3>üí° Hints</h3>
                <p>Stuck? Use up to 3 hints per game! Each hint reveals a word that's closer to the answer than your current best guess.</p>

                <h3>‚ú® Autocorrect</h3>
                <p>The game recognizes common variations like plurals (joints ‚Üí joint) and will autocorrect your guess automatically.</p>

                <h3>ü©∫ Tips</h3>
                <p>Think about rheumatology conditions, treatments, anatomy, lab tests, and doctor life!</p>
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div class="modal-overlay" id="statsModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Statistics</h2>
                <button class="modal-close" onclick="closeModal('statsModal')">√ó</button>
            </div>
            <div class="modal-content">
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="statPlayed">0</div>
                        <div class="stat-label">Played</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statWon">0</div>
                        <div class="stat-label">Won</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statAvg">-</div>
                        <div class="stat-label">Avg Guesses</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statBest">-</div>
                        <div class="stat-label">Best Win</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statStreak">0</div>
                        <div class="stat-label">Current Streak</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statMaxStreak">0</div>
                        <div class="stat-label">Max Streak</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Settings</h2>
                <button class="modal-close" onclick="closeModal('settingsModal')">√ó</button>
            </div>
            <div class="modal-content">
                <div class="setting-row">
                    <span>Light Mode</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="lightModeToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-row">
                    <span>Hard Mode (no hints)</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="hardModeToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Win Modal -->
    <div class="modal-overlay win-modal" id="winModal">
        <div class="modal">
            <h2 class="win-title">üéâ Diagnosis Complete!</h2>
            <div class="win-word" id="winWord">LUPUS</div>
            <div class="win-stats">
                Solved in <strong id="winGuesses">0</strong> guesses!
            </div>
            <div class="guess-visualization" id="guessVisualization"></div>
            <button class="share-btn" id="shareBtn">üìã Share Result</button>
            <button class="new-game-btn" id="newGameBtn">New Game</button>
        </div>
    </div>

    <!-- Give Up Modal -->
    <div class="modal-overlay" id="giveUpModal">
        <div class="modal" style="text-align: center;">
            <h2 class="modal-title">The word was...</h2>
            <div class="win-word" id="revealWord">LUPUS</div>
            <p style="margin: 20px 0; color: var(--text-secondary);">Better luck next time! Every attending started as an intern. üí™</p>
            <button class="new-game-btn" id="newGameAfterGiveUp">New Game</button>
        </div>
    </div>

    <script src="js/game.js"></script>
</body>
</html>
