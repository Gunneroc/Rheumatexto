<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rheumatexto - The Rheumatology Word Game</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                RHEUMATEXTO
                <span>The Rheumatology Word Game</span>
            </div>
            <div class="header-buttons">
                <button class="icon-btn" id="helpBtn" title="How to Play">?</button>
                <button class="icon-btn" id="statsBtn" title="Statistics">üìä</button>
                <button class="icon-btn" id="settingsBtn" title="Settings">‚öôÔ∏è</button>
            </div>
        </header>

        <div class="joint-container">
            <svg class="joint-svg" id="jointDiagram" viewBox="0 0 120 180">
                <defs>
                    <!-- Bone gradient -->
                    <linearGradient id="boneGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="#e8e4dc"/>
                        <stop offset="30%" stop-color="#f5f2ed"/>
                        <stop offset="70%" stop-color="#f5f2ed"/>
                        <stop offset="100%" stop-color="#d5d0c8"/>
                    </linearGradient>
                    <!-- Bone end gradient (for condyles) -->
                    <radialGradient id="boneEndGrad" cx="50%" cy="50%" r="50%">
                        <stop offset="0%" stop-color="#f5f2ed"/>
                        <stop offset="100%" stop-color="#e0dcd5"/>
                    </radialGradient>
                    <!-- Cartilage gradient -->
                    <linearGradient id="cartGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#7ec8e3"/>
                        <stop offset="100%" stop-color="#5ba3c0"/>
                    </linearGradient>
                    <!-- Synovial fluid gradient (healthy) -->
                    <radialGradient id="fluidGrad" cx="50%" cy="50%" r="50%">
                        <stop offset="0%" stop-color="#c4e0ed" stop-opacity="0.6"/>
                        <stop offset="100%" stop-color="#7ec8e3" stop-opacity="0.3"/>
                    </radialGradient>
                    <!-- Inflamed fluid gradient -->
                    <radialGradient id="fluidInflamed" cx="50%" cy="50%" r="50%">
                        <stop offset="0%" stop-color="#ff6b6b" stop-opacity="0.8"/>
                        <stop offset="100%" stop-color="#e94560" stop-opacity="0.5"/>
                    </radialGradient>
                    <!-- Glow filter for inflammation -->
                    <filter id="inflammationGlow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge>
                            <feMergeNode in="coloredBlur"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                    <!-- Tendon gradient -->
                    <linearGradient id="tendonGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#e8dcc8"/>
                        <stop offset="100%" stop-color="#d4c4b0"/>
                    </linearGradient>
                    <!-- Ligament gradient -->
                    <linearGradient id="ligamentGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" stop-color="#c8d8e8"/>
                        <stop offset="50%" stop-color="#b0c8d8"/>
                        <stop offset="100%" stop-color="#c8d8e8"/>
                    </linearGradient>
                    <!-- Patella gradient -->
                    <radialGradient id="patellaGrad" cx="30%" cy="30%" r="70%">
                        <stop offset="0%" stop-color="#f5f2ed"/>
                        <stop offset="100%" stop-color="#d5d0c8"/>
                    </radialGradient>
                </defs>

                <!-- Collateral Ligaments (behind everything) -->
                <g class="joint-ligaments">
                    <!-- Medial Collateral Ligament (MCL) - inner side -->
                    <path class="ligament mcl" d="M28 55 Q22 75 22 95 Q22 105 28 115"
                          fill="none" stroke="url(#ligamentGrad)" stroke-width="5" stroke-linecap="round" opacity="0.8"/>
                    <!-- Lateral Collateral Ligament (LCL) - outer side -->
                    <path class="ligament lcl" d="M82 60 Q88 75 90 90 Q90 100 88 108"
                          fill="none" stroke="url(#ligamentGrad)" stroke-width="4" stroke-linecap="round" opacity="0.8"/>
                    <title>Collateral Ligaments</title>
                </g>

                <!-- Femur (thigh bone) -->
                <g class="bone-upper">
                    <!-- Femoral shaft -->
                    <path d="M45 5 L42 45 Q40 55 38 60 L72 60 Q70 55 68 45 L65 5"
                          fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1"/>
                    <!-- Femoral condyles (rounded ends) -->
                    <ellipse class="joint-bone" cx="40" cy="68" rx="14" ry="12" fill="url(#boneEndGrad)" stroke="#a89f90" stroke-width="1"/>
                    <ellipse class="joint-bone" cx="70" cy="68" rx="14" ry="12" fill="url(#boneEndGrad)" stroke="#a89f90" stroke-width="1"/>
                    <!-- Intercondylar notch (gap between condyles) -->
                    <path d="M48 62 Q55 72 62 62" fill="var(--bg-secondary, #1a1a2e)" stroke="none"/>
                    <title>Femur</title>
                </g>

                <!-- Cartilage on femoral condyles -->
                <g class="cartilage-upper">
                    <path class="joint-cartilage" d="M28 72 Q40 82 52 72" fill="none" stroke="url(#cartGrad)" stroke-width="4" stroke-linecap="round"/>
                    <path class="joint-cartilage" d="M58 72 Q70 82 82 72" fill="none" stroke="url(#cartGrad)" stroke-width="4" stroke-linecap="round"/>
                    <title>Articular Cartilage</title>
                </g>

                <!-- Cruciate Ligaments (inside joint) -->
                <g class="joint-cruciate">
                    <!-- ACL - Anterior Cruciate Ligament -->
                    <path class="ligament acl" d="M48 78 Q55 88 62 98"
                          fill="none" stroke="#c8d8e8" stroke-width="3" stroke-linecap="round" opacity="0.7"/>
                    <!-- PCL - Posterior Cruciate Ligament -->
                    <path class="ligament pcl" d="M62 78 Q55 88 48 98"
                          fill="none" stroke="#b8c8d8" stroke-width="3" stroke-linecap="round" opacity="0.7"/>
                    <title>Cruciate Ligaments</title>
                </g>

                <!-- Synovial fluid (in joint space) -->
                <ellipse class="joint-fluid" cx="55" cy="88" rx="28" ry="10" fill="url(#fluidGrad)"/>

                <!-- Synovium/Joint capsule -->
                <path class="joint-synovium" d="M22 70 Q15 88 22 106 M88 70 Q95 88 88 106"
                      fill="none" stroke="#7ec8e3" stroke-width="2" opacity="0.5"/>

                <!-- Menisci (C-shaped cartilage) -->
                <g class="joint-meniscus">
                    <!-- Medial meniscus (inner, C-shaped) -->
                    <path class="meniscus" d="M28 85 Q22 88 28 92 Q38 88 28 85"
                          fill="#4a9cb8" stroke="#3d8eb0" stroke-width="0.5" opacity="0.9"/>
                    <!-- Lateral meniscus (outer, more O-shaped) -->
                    <path class="meniscus" d="M82 85 Q88 88 82 92 Q72 88 82 85"
                          fill="#4a9cb8" stroke="#3d8eb0" stroke-width="0.5" opacity="0.9"/>
                    <title>Meniscus</title>
                </g>

                <!-- Tibial cartilage -->
                <g class="cartilage-lower">
                    <path class="joint-cartilage" d="M26 95 Q40 100 55 95 Q70 100 84 95"
                          fill="none" stroke="url(#cartGrad)" stroke-width="3" stroke-linecap="round"/>
                    <title>Articular Cartilage</title>
                </g>

                <!-- Tibia (shin bone) -->
                <g class="bone-lower">
                    <!-- Tibial plateau -->
                    <path class="joint-bone" d="M24 98 Q35 95 55 98 Q75 95 86 98 L86 108 Q55 112 24 108 Z"
                          fill="url(#boneEndGrad)" stroke="#a89f90" stroke-width="1"/>
                    <!-- Tibial shaft -->
                    <path d="M28 108 L32 170 L68 170 L72 108"
                          fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1"/>
                    <!-- Tibial tuberosity (bump for patellar tendon) -->
                    <ellipse cx="50" cy="115" rx="6" ry="4" fill="url(#boneEndGrad)" stroke="#a89f90" stroke-width="0.5"/>
                    <title>Tibia</title>
                </g>

                <!-- Fibula (smaller outer bone) -->
                <g class="bone-fibula">
                    <!-- Fibular head -->
                    <ellipse cx="92" cy="105" rx="6" ry="5" fill="url(#boneEndGrad)" stroke="#a89f90" stroke-width="1"/>
                    <!-- Fibular shaft -->
                    <path d="M90 110 L88 170 L96 170 L94 110"
                          fill="url(#boneGrad)" stroke="#a89f90" stroke-width="1"/>
                    <title>Fibula</title>
                </g>

                <!-- Quadriceps tendon (above patella) -->
                <g class="joint-tendons">
                    <path class="tendon" d="M45 5 Q50 20 55 35 Q50 20 65 5"
                          fill="url(#tendonGrad)" stroke="#c5beb0" stroke-width="0.5" opacity="0.7"/>
                    <title>Quadriceps Tendon</title>
                </g>

                <!-- Patella (kneecap) -->
                <g class="bone-patella">
                    <ellipse cx="55" cy="55" rx="12" ry="15" fill="url(#patellaGrad)" stroke="#a89f90" stroke-width="1.5"/>
                    <!-- Patella cartilage (back) -->
                    <path class="joint-cartilage" d="M46 60 Q55 68 64 60" fill="none" stroke="url(#cartGrad)" stroke-width="2" opacity="0.6"/>
                    <title>Patella (Kneecap)</title>
                </g>

                <!-- Patellar tendon (below patella) -->
                <g class="joint-tendons">
                    <path class="tendon patellar-tendon" d="M48 68 Q50 90 50 115 M62 68 Q60 90 50 115"
                          fill="none" stroke="url(#tendonGrad)" stroke-width="4" stroke-linecap="round" opacity="0.8"/>
                    <title>Patellar Tendon</title>
                </g>

                <!-- Hover labels -->
                <g class="joint-labels" opacity="0">
                    <text x="55" y="25" text-anchor="middle" font-size="5" fill="var(--text-primary)">Femur</text>
                    <text x="55" y="50" text-anchor="middle" font-size="5" fill="var(--text-primary)">Patella</text>
                    <text x="12" y="85" text-anchor="middle" font-size="4" fill="var(--text-primary)">MCL</text>
                    <text x="100" y="85" text-anchor="middle" font-size="4" fill="var(--text-primary)">LCL</text>
                    <text x="55" y="88" text-anchor="middle" font-size="4" fill="var(--text-primary)">ACL/PCL</text>
                    <text x="22" y="92" text-anchor="middle" font-size="4" fill="var(--text-primary)">Meniscus</text>
                    <text x="50" y="140" text-anchor="middle" font-size="5" fill="var(--text-primary)">Tibia</text>
                    <text x="92" y="140" text-anchor="middle" font-size="4" fill="var(--text-primary)">Fibula</text>
                </g>
            </svg>
        </div>

        <div class="meter-container">
            <div class="meter-label">
                <span>‚ùÑÔ∏è Cold</span>
                <span>üî• Flaring</span>
            </div>
            <div class="meter-bar">
                <div class="meter-indicator" id="meterIndicator"></div>
            </div>
            <div class="meter-value" id="meterValue">-</div>
            <div class="meter-hint" id="meterHint">Enter a word to begin</div>
        </div>

        <div class="input-container">
            <input type="text" class="guess-input" id="guessInput" placeholder="Type your guess..." autocomplete="off" autofocus>
            <button class="submit-btn" id="submitBtn">Guess</button>
        </div>
        <div class="error-msg" id="errorMsg"></div>
        <div class="autocorrect-msg" id="autocorrectMsg"></div>

        <div class="guess-count" id="guessCount">Guesses: 0</div>

        <div class="history-container">
            <div class="history-title">
                <span>Guess History</span>
                <span id="bestRank">Best: -</span>
            </div>
            <ul class="history-list" id="historyList"></ul>
        </div>

        <div class="action-buttons">
            <button class="hint-btn" id="hintBtn">üí° Get Hint</button>
            <button class="give-up-btn" id="giveUpBtn">Give Up</button>
        </div>
        <div class="hint-count" id="hintCount">Hints used: 0/3</div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">How to Play</h2>
                <button class="modal-close" onclick="closeModal('helpModal')">√ó</button>
            </div>
            <div class="modal-content">
                <p>Welcome to <strong>Rheumatexto</strong> ‚Äì the word guessing game for rheumatology enthusiasts!</p>

                <h3>üéØ Goal</h3>
                <p>Find the secret word! It's related to rheumatology, medicine, or the life of a doctor.</p>

                <h3>üéÆ How It Works</h3>
                <p>1. Type any word and submit your guess</p>
                <p>2. You'll see a <strong>rank</strong> showing how close your guess is:</p>
                <ul style="margin-left: 20px; margin-bottom: 15px;">
                    <li><span style="color: var(--accent-red)">1-10</span>: You're ON FIRE! üî•</li>
                    <li><span style="color: var(--accent-orange)">11-100</span>: Getting warm!</li>
                    <li><span style="color: var(--accent-yellow)">101-500</span>: Lukewarm</li>
                    <li><span style="color: var(--accent-blue)">501-1000</span>: Cool</li>
                    <li><span style="color: var(--accent-cold)">1000+</span>: Ice cold ‚ùÑÔ∏è</li>
                </ul>
                <p>3. Use the hints to guide your next guess</p>
                <p>4. Win by finding the exact word (Rank 1)!</p>

                <h3>üí° Hints</h3>
                <p>Stuck? Use up to 3 hints per game! Each hint reveals a word that's closer to the answer than your current best guess.</p>

                <h3>‚ú® Autocorrect</h3>
                <p>The game recognizes common variations like plurals (joints ‚Üí joint) and will autocorrect your guess automatically.</p>

                <h3>ü©∫ Tips</h3>
                <p>Think about rheumatology conditions, treatments, anatomy, lab tests, and doctor life!</p>
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div class="modal-overlay" id="statsModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Statistics</h2>
                <button class="modal-close" onclick="closeModal('statsModal')">√ó</button>
            </div>
            <div class="modal-content">
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="statPlayed">0</div>
                        <div class="stat-label">Played</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statWon">0</div>
                        <div class="stat-label">Won</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statAvg">-</div>
                        <div class="stat-label">Avg Guesses</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statBest">-</div>
                        <div class="stat-label">Best Win</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statStreak">0</div>
                        <div class="stat-label">Current Streak</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="statMaxStreak">0</div>
                        <div class="stat-label">Max Streak</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Settings</h2>
                <button class="modal-close" onclick="closeModal('settingsModal')">√ó</button>
            </div>
            <div class="modal-content">
                <div class="setting-row">
                    <span>Light Mode</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="lightModeToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
                <div class="setting-row">
                    <span>Hard Mode (no hints)</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="hardModeToggle">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Win Modal -->
    <div class="modal-overlay win-modal" id="winModal">
        <div class="modal">
            <h2 class="win-title">üéâ Diagnosis Complete!</h2>
            <div class="win-word" id="winWord">LUPUS</div>
            <div class="win-stats">
                Solved in <strong id="winGuesses">0</strong> guesses!
            </div>
            <div class="guess-visualization" id="guessVisualization"></div>
            <button class="share-btn" id="shareBtn">üìã Share Result</button>
            <button class="new-game-btn" id="newGameBtn">New Game</button>
        </div>
    </div>

    <!-- Give Up Modal -->
    <div class="modal-overlay" id="giveUpModal">
        <div class="modal" style="text-align: center;">
            <h2 class="modal-title">The word was...</h2>
            <div class="win-word" id="revealWord">LUPUS</div>
            <p style="margin: 20px 0; color: var(--text-secondary);">Better luck next time! Every attending started as an intern. üí™</p>
            <button class="new-game-btn" id="newGameAfterGiveUp">New Game</button>
        </div>
    </div>

    <script src="js/game.js"></script>
</body>
</html>
